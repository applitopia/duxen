!function o(s,a,u){function c(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return c(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("immutable-sorted"),s=t("./CommonEngine");(n=s)&&n.__esModule;var a=function(t){return t},u=function(t){return a((0,o.fromJS)(t))},c=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.engine=t}return i(e,[{key:"_verifyName",value:function(t,e){var r=this.engine._compiledSchema.names[t];if(!r)throw new Error("Missing name in schema: "+t);if(r.type!==e)throw new Error("Not a "+e+": "+t)}},{key:"_verifyCollection",value:function(t){this._verifyName(t,"collection")}},{key:"_verifyValueName",value:function(t){this._verifyName(t,"value")}},{key:"_verifyCustomValueName",value:function(t){this._verifyName(t,"customValue")}},{key:"_verifyCustomName",value:function(t){this._verifyName(t,"custom")}},{key:"_action",value:function(t){Object.freeze(t);for(var e=this.engine._listeners,r=0;r<e.length;r++){(0,e[r])(t)}}},{key:"batch",value:function(t){var e={type:"DUXEN_BATCH",actions:(0,o.List)(t)};return this._action(e),e}},{key:"insert",value:function(t,e,r){this._verifyCollection(t);var n={type:"DUXEN_INSERT",collName:t,id:e=u(e),doc:r=u(r)};return this._action(n),n}},{key:"update",value:function(t,e,r){this._verifyCollection(t);var n={type:"DUXEN_UPDATE",collName:t,id:e=u(e),doc:r=u(r)};return this._action(n),n}},{key:"remove",value:function(t,e){this._verifyCollection(t);var r={type:"DUXEN_REMOVE",collName:t,id:e=u(e)};return this._action(r),r}},{key:"reset",value:function(t){this._verifyCollection(t);var e={type:"DUXEN_RESET",collName:t};return this._action(e),e}},{key:"pause",value:function(t){this._verifyCollection(t);var e={type:"DUXEN_PAUSE",collName:t};return this._action(e),e}},{key:"resume",value:function(t){this._verifyCollection(t);var e={type:"DUXEN_RESUME",collName:t};return this._action(e),e}},{key:"save",value:function(t){this._verifyCollection(t);var e={type:"DUXEN_SAVE",collName:t};return this._action(e),e}},{key:"restore",value:function(t){this._verifyCollection(t);var e={type:"DUXEN_RESTORE",collName:t};return this._action(e),e}},{key:"saveOriginals",value:function(t){this._verifyCollection(t);var e={type:"DUXEN_SAVE_ORIGINALS",collName:t};return this._action(e),e}},{key:"retrieveOriginals",value:function(t){this._verifyCollection(t);var e={type:"DUXEN_RETRIEVE_ORIGINALS",collName:t};return this._action(e),e}},{key:"init",value:function(t){var e={type:"DUXEN_INIT",state:t};return this._action(e),e}},{key:"refresh",value:function(){var t={type:"DUXEN_REFRESH"};return this._action(t),t}},{key:"value",value:function(t,e){this._verifyValueName(t);var r={type:"DUXEN_VALUE",valueName:t,value:e=u(e)};return this._action(r),r}},{key:"customValue",value:function(t,e){this._verifyCustomValueName(t);var r=this.engine._compiledSchema.names[t],n=a(r.schemaEntry),i=n.actionType;if(!i)throw new Error("Missing actionType in value schema: "+JSON.stringify(n));if(n.action){var o=n.action(e);return this._action(o),o}e=u(e);var s={type:r.namePrefix+i,value:e};return this._action(s),s}},{key:"custom",value:function(t){this._verifyCustomName(t);var e=this.engine._compiledSchema.names[t],r=a(e.schemaEntry),n=r.actionType;if(!n)throw new Error("Missing actionType in custom schema: "+JSON.stringify(r));if(!r.action)throw new Error("Missing action in custom schema: "+JSON.stringify(r));var i=r.action();if(void 0!==i.type&&i.type!==n)throw new Error("Inconsistent custom action type: "+JSON.stringify(i.type)+" vs "+n);return i.type=e.namePrefix+n,this._action(i),i}},{key:"createBranch",value:function(t){var e={type:"DUXEN_CREATE_BRANCH",branchName:t};return this._action(e),e}},{key:"switchBranch",value:function(t){var e={type:"DUXEN_SWITCH_BRANCH",branchName:t};return this._action(e),e}},{key:"saveBranch",value:function(t){var e={type:"DUXEN_SAVE_BRANCH",branchName:t};return this._action(e),e}},{key:"resetBranch",value:function(t){var e={type:"DUXEN_RESET_BRANCH",branchName:t};return this._action(e),e}},{key:"removeBranch",value:function(t){var e={type:"DUXEN_REMOVE_BRANCH",branchName:t};return this._action(e),e}},{key:"goForward",value:function(t){var e={type:"DUXEN_GO_FORWARD",steps:t};return this._action(e),e}},{key:"goBack",value:function(t){var e={type:"DUXEN_GO_BACK",steps:t};return this._action(e),e}},{key:"goLive",value:function(){var t={type:"DUXEN_GO_LIVE"};return this._action(t),t}},{key:"setOption",value:function(t,e){var r={type:"DUXEN_SET_OPTION",optionName:t,optionValue:e};return this._action(r),r}}]),e}();r.default=c},{"./CommonEngine":3,"immutable-sorted":11}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();t("immutable-sorted");var i=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._dispatch=t,this._actionFactory=e}return n(r,[{key:"batch",value:function(t){var e=this._actionFactory.batch(t);return this._dispatch(e),e}},{key:"insert",value:function(t,e,r){var n=this._actionFactory.insert(t,e,r);return this._dispatch(n),n}},{key:"update",value:function(t,e,r){var n=this._actionFactory.update(t,e,r);return this._dispatch(n),n}},{key:"remove",value:function(t,e){var r=this._actionFactory.remove(t,e);return this._dispatch(r),r}},{key:"reset",value:function(t){var e=this._actionFactory.reset(t);return this._dispatch(e),e}},{key:"pause",value:function(t){var e=this._actionFactory.pause(t);return this._dispatch(e),e}},{key:"resume",value:function(t){var e=this._actionFactory.resume(t);return this._dispatch(e),e}},{key:"save",value:function(t){var e=this._actionFactory.save(t);return this._dispatch(e),e}},{key:"restore",value:function(t){var e=this._actionFactory.restore(t);return this._dispatch(e),e}},{key:"saveOriginals",value:function(t){var e=this._actionFactory.saveOriginals(t);return this._dispatch(e),e}},{key:"retrieveOriginals",value:function(t){var e=this._actionFactory.retrieveOriginals(t);return this._dispatch(e),e}},{key:"refresh",value:function(){var t=this._actionFactory.refresh();return this._dispatch(t),t}},{key:"value",value:function(t,e){var r=this._actionFactory.value(t,e);return this._dispatch(r),r}},{key:"customValue",value:function(t,e){var r=this._actionFactory.customValue(t,e);return this._dispatch(r),r}},{key:"custom",value:function(t){var e=this._actionFactory.custom(t);return this._dispatch(e),e}},{key:"createBranch",value:function(t){var e=this._actionFactory.createBranch(t);return this._dispatch(e),e}},{key:"switchBranch",value:function(t){var e=this._actionFactory.switchBranch(t);return this._dispatch(e),e}},{key:"saveBranch",value:function(t){var e=this._actionFactory.saveBranch(t);return this._dispatch(e),e}},{key:"resetBranch",value:function(t){var e=this._actionFactory.resetBranch(t);return this._dispatch(e),e}},{key:"removeBranch",value:function(t){var e=this._actionFactory.removeBranch(t);return this._dispatch(e),e}},{key:"goForward",value:function(t){var e=this._actionFactory.goForward(t);return this._dispatch(e),e}},{key:"goBack",value:function(t){var e=this._actionFactory.goBack(t);return this._dispatch(e),e}},{key:"goLive",value:function(){var t=this._actionFactory.goLive();return this._dispatch(t),t}},{key:"setOption",value:function(t,e){var r=this._actionFactory.setOption(t,e);return this._dispatch(r),r}}]),r}();r.default=i},{"immutable-sorted":11}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),o=t("immutable-sorted"),i=t("./SchemaCompiler"),s=c(t("./SubEngine")),a=c(t("./ActionFactory")),u=c(t("./BoundActionFactory"));function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._compiledSchema=(0,i.compileSchema)(t),this._actionFactory=new a.default(this),this._listeners=[]}return n(e,[{key:"_verifyName",value:function(t,e){var r=this._compiledSchema.names[t];if(!r)throw new Error("Missing name in schema: "+t);if(r.type!==e)throw new Error("Not a "+e+": "+t)}}]),n(e,[{key:"_getCompiledName",value:function(t){var e=this._compiledSchema.names[t];if(!e)throw new Error("Name not found in schema: "+t);return e}},{key:"_getNameType",value:function(t){var e=this._compiledSchema.names[t];if(!e)throw new Error("Missing name in schema: "+t);return e.type}},{key:"get",value:function(t,e){if(!e)return t;var r=this._getCompiledName(e);return t.getIn(r.path)}},{key:"subscribe",value:function(e){var r=this;if("function"!=typeof e)throw new Error("Listener must be a function.");var n=!0;return this._listeners.push(e),function(){if(n){n=!1;var t=r._listeners.indexOf(e);r._listeners.splice(t,1)}}}},{key:"printableState",value:function(t){return t?t.withMutations(function(t){t.delete("_state")}):t}},{key:"persistableState",value:function(n){var i=this;return n?(0,o.Map)().withMutations(function(t){for(var e in i._compiledSchema.names){var r=i._getCompiledName(e);switch(r.type){case"value":case"customValue":case"collection":r.persistent&&t.setIn(r.path,n.getIn(r.path))}}}):n}},{key:"currentBranch",value:function(t){if(!t)throw Error("repo not defined");var e=t.get("currentBranch");return e}},{key:"currentBranchState",value:function(t){var e=this.currentBranch(t);return t.get("branches").get(e)}},{key:"live",value:function(t){return this.currentBranchState(t).get("live")}},{key:"liveState",value:function(t){var e=this.currentBranchState(t).get("states");if(!(e.size<=0))return e.get(e.size-1)}},{key:"head",value:function(t){var e=this.currentBranchState(t),r=e.get("currentIndex");if(!(r<0))return e.get("states").get(r)}},{key:"prev",value:function(t){var e=this.currentBranchState(t),r=e.get("currentIndex");if(!(r<=0))return e.get("states").get(r-1)}},{key:"subEngine",value:function(t){return this._verifyName(t,"schema"),new s.default(this,t)}},{key:"actionFactory",value:function(){return this._actionFactory}},{key:"boundActionFactory",value:function(t){return new u.default(t,this.actionFactory())}},{key:"stateReducer",value:function(){throw new Error("Reducer is not implemented in CommonEngine")}},{key:"repoReducer",value:function(){throw new Error("RepoReducer is not implemented in CommonEngine")}}]),e}();r.default=h},{"./ActionFactory":1,"./BoundActionFactory":2,"./SchemaCompiler":6,"./SubEngine":9,"immutable-sorted":11}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeteorDriver=r.MeteorCollection=void 0;var i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=t("immutable-sorted");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(t){return"object"===(void 0===t?"undefined":n(t))&&void 0!==t._id?t._id:function(t){if("object"!==(void 0===t?"undefined":n(t)))return!1;for(var e in t)return!1;return!0}(t)?void 0:t},o=r.MeteorCollection=function(){function o(t,e,r,n,i){a(this,o),this._name=t,this._engine=e,this._actionFactory=e.actionFactory(),this._dispatch=r,this._getData=n,this._getOriginals=i,this._paused=!1,this._pending=[],this._ids=(0,s.Set)().asMutable()}return i(o,[{key:"dispatch",value:function(t){return this._paused?this._pending.push(t):this._dispatch(t),t}},{key:"flush",value:function(){if(0<this._pending.length){var t=this._actionFactory.batch(this._pending);this._dispatch(t),this._pending=[]}}},{key:"remove",value:function(t){var e=u(t);if(e){this._ids.remove(e);var r=this._actionFactory.remove(this._name,e);this.dispatch(r)}else{this._ids=(0,s.Set)().asMutable(),this._pending=[];var n=this._actionFactory.reset(this._name);this._dispatch(n)}}},{key:"insert",value:function(t){var e=t._id;if(!e)throw new Error("Empty mongoID: "+JSON.stringify(t));this._ids.add(e);var r=this._actionFactory.insert(this._name,e,t);this.dispatch(r)}},{key:"update",value:function(t,e){var r=u(t);if(!r)throw new Error("Selector not supported:"+JSON.stringify(t));var n=this._actionFactory.update(this._name,r,e);this.dispatch(n)}},{key:"findOne",value:function(t,e){var r=u(t);if(!r)throw new Error("Selector not supported:"+JSON.stringify(t));return"object"===(void 0===e?"undefined":n(e))&&!0===e.fetch?this.fetchOne(r):this._ids.has(r)}},{key:"fetchOne",value:function(t){var e=u(t);if(!e)throw new Error("Selector not supported:"+JSON.stringify(t));return this.flush(),this._getData().get(e)}},{key:"pauseObservers",value:function(){this._paused=!0,this._pending=[];var t=this._actionFactory.pause(this._name);this.dispatch(t)}},{key:"resumeObservers",value:function(){this.flush(),this._paused=!1;var t=this._actionFactory.resume(this._name);this.dispatch(t)}},{key:"saveOriginals",value:function(){var t=this._actionFactory.saveOriginals(this._name);this.dispatch(t)}},{key:"retrieveOriginals",value:function(){this.flush();var t=this._getOriginals(),e=this._actionFactory.retrieveOriginals(this._name);return this.dispatch(e),t?(0,s.Seq)(t).map(function(t){return t?t.toJS():t}):t}}]),o}();r.MeteorDriver=function(){function n(t,e,r){a(this,n),this._engine=t,this._dispatch=e,this._getState=r}return i(n,[{key:"open",value:function(t,e){var r=this;return new o(t,this._engine,this._dispatch,function(){return r._engine.get(r._getState(),t)},function(){return r._getState().getIn(["_state",t,"originals"])})}}]),n}()},{"immutable-sorted":11}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),tt=t("immutable-sorted"),o=t("./StateEngine"),s=(n=o)&&n.__esModule?n:{default:n};var et=function(t){return t},a=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"repoReducer",value:function(){var $=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stateReducer",this).call(this),t={version:0,options:{history:1e3,showRepo:!1},currentBranch:"master",branches:{master:{currentIndex:-1,live:!0,states:[],actions:[]}}},Q=(0,tt.fromJS)(t),Z=function(t,e){if(!t.get("branches").has(e))throw Error("the branch does not exist: "+e)},n=function(t,e,r){switch(r.type){case"DUXEN_INIT":var n=et(r),i={currentIndex:0,live:!0,states:[(0,tt.fromJS)(n.state)],actions:[r]};t.set("currentBranch","master"),t.set("branches",(0,tt.fromJS)({master:i}));break;case"DUXEN_CREATE_BRANCH":var o=et(r),s=e.get("branches");if(s.has(o.branchName))throw Error("the branch already exists: "+o.branchName);var a=Q.getIn(["branches","master"]),u=s.set(o.branchName,a);t.set("branches",u);break;case"DUXEN_SWITCH_BRANCH":var c=et(r);Z(e,c.branchName),t.set("currentBranch",c.branchName);break;case"DUXEN_SAVE_BRANCH":var h=et(r),f=t.get("currentBranch"),p=e.get("branches"),l=p.get(f),_=l.get("currentIndex"),v=l.withMutations(function(t){var e=t.get("states").slice(0,_+1);t.set("states",e);var r=t.get("actions").slice(0,_+1);t.set("actions",r),t.set("currentIndex",_)}),y=p.set(h.branchName,v);t.set("branches",y);break;case"DUXEN_RESET_BRANCH":var d=et(r);Z(e,d.branchName);var g=t.get("currentBranch"),m=e.get("branches"),w=m.get(d.branchName),b=w.get("currentIndex"),S=w.withMutations(function(t){var e=t.get("states").slice(0,b+1);t.set("states",e);var r=t.get("actions").slice(0,b+1);t.set("actions",r),t.set("currentIndex",b)}),I=m.set(g,S);t.set("branches",I);break;case"DUXEN_REMOVE_BRANCH":var k=et(r);if(Z(e,k.branchName),t.get("currentBranch")===k.branchName)throw Error("cannot remove branch that is current");var O=e.get("branches").remove(k.branchName);t.set("branches",O);break;case"DUXEN_GO_FORWARD":var E=et(r),z=t.get("currentBranch"),N=e.get("branches"),D=N.get(z),M=D.get("currentIndex"),x=D.get("states"),A=E.steps,q=D.withMutations(function(t){var e=M+A;e<0?e=0:e>=x.size&&(e=x.size-1),t.set("currentIndex",e),t.set("live",!1)}),j=N.set(z,q);t.set("branches",j);break;case"DUXEN_GO_BACK":var R=et(r),C=t.get("currentBranch"),T=e.get("branches"),U=T.get(C),P=U.get("currentIndex"),B=U.get("states"),L=R.steps,F=U.withMutations(function(t){var e=P-L;e<0?e=0:e>=B.size&&(e=B.size-1),t.set("currentIndex",e),t.set("live",!1)}),K=T.set(C,F);t.set("branches",K);break;case"DUXEN_GO_LIVE":var J=t.get("currentBranch"),V=e.get("branches"),X=V.get(J),W=X.get("states"),H=X.withMutations(function(t){var e=W.size-1;t.set("currentIndex",e),t.set("live",!0)}),Y=V.set(J,H);t.set("branches",Y);break;case"DUXEN_SET_OPTION":var G=et(r);t.setIn(["options",G.optionName],G.optionValue);break;default:!function(t,e,c){if(!Object.isFrozen())throw new Error("Action object is not frozen");var h=t.get("options").get("history"),r=t.get("currentBranch");Z(e,r);var n=t.get("branches"),i=n.get(r).withMutations(function(t){var e=t.get("currentIndex"),r=t.get("live"),n=t.get("states"),i=t.get("actions"),o=n.get(n.size-1),s=$(o,c),a=n.withMutations(function(t){for(t.push(s);t.size>h;)t.shift(),0<e&&e--}),u=i.withMutations(function(t){var e=c;for(t.push(e);t.size>h;)t.shift()});r&&(e=a.size-1),t.set("currentIndex",e),t.set("states",a),t.set("actions",u)}),o=n.set(r,i);t.set("branches",o)}(t,e,r)}};return function(e,r){return void 0===e&&(e=Q),e.withMutations(function(t){n(t,e,r)})}}}]),e}();r.default=a},{"./StateEngine":7,"immutable-sorted":11}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compileSchema=r.compileDependencies=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=t("immutable-sorted"),C=t("seqen"),T=function(t){return t},U=r.compileDependencies=function(t){for(var u={},e={},r=0;r<t.length;r++){var n=t[r],i=n[0],o=n[1],s=u[i];s||(s=[],u[i]=s),s.push(o)}var a=function t(e,r,n,i){if(i.push(e),n[e])throw new Error("Dependency loop: "+i.toString());n[e]=!0;var o=u[e];if(o)for(var s=0;s<o.length;s++){var a=o[s];r.push(a),t(a,r,n,i)}i.pop(),delete n[e]},c=function(t){for(var e={},r=t.length-1;0<=r;r--){var n=t[r];void 0===e[n]&&(e[n]=r)}for(var i=[],o=0;o<t.length;o++){var s=t[o];e[s]===o&&i.push(s)}return i};for(var h in u){var f=[];a(h,f,{},[]);var p=c(f);e[h]=p}return e};r.compileSchema=function(t){var M={names:{},actions:{},initState:(0,u.Map)(),allDependents:[]},x=function(t,e){if("string"!=typeof t)throw new Error("wrong name: "+t);if(0===t.length)throw new Error("empty name");if("string"!=typeof e)throw new Error("wrong namePrefix: "+e)},n=function(t){if(!Array.isArray(t))throw new Error("Props are not in Array");for(var e=0,r=t.length;e<r;e++){var n=t[e];switch(void 0===n?"undefined":i(n)){case"string":break;default:throw new Error("Invalid type of propName: "+(void 0===n?"undefined":i(n)))}}},A=function(t,r,e){x(t,e);var n=r.actionType;if(!n)throw new Error("Missing actionType in value schema: "+JSON.stringify(r));if(n=e+n,M.actions[n])throw new Error("Duplicate actionType in value schema: "+JSON.stringify(r));M.actions[n]={type:"customValue",name:t,actionType:n,reducer:function(t,e){switch(e.type){case n:return r.reducer?r.reducer(t,e):e.value;default:return t}}}},q=function(t,e,r){if(x(t,r),n(e.props),!e.props)throw new Error("missing props: "+t)},j=function(t,e,r){if(x(t,r),n(e.props),!e.sourceName)throw new Error("missing sourceName in view schema: "+t)},R=function(t,r,e){var n=r.actionType;if(!n)throw new Error("Missing actionType in custom schema: "+JSON.stringify(r));if(n=e+n,M.actions[n])throw new Error("Duplicate actionType in custom schema: "+JSON.stringify(r));if(!r.reducer)throw new Error("Missing reducer in custom schema: "+JSON.stringify(r));if(r.path)throw new Error("Path is not allowed in custom schema: "+JSON.stringify(r));M.actions[n]={type:"custom",name:t,actionType:n,reducer:function(t,e){switch(e.type){case n:return t.withMutations(function(t){r.reducer(t,e)});default:return t}}}};return function t(e,r,n){for(var i in e){if(i.match(/^[$_]|\.|\0/))throw Error("Invalid name (can't start with $ or _, can't contain '.' or '\0'): "+i);var o=e[i];if(!o)throw Error("Improper definition in schema: "+i);var s=n?n.split("."):[],a=o.path?o.path:i,u=a.split("."),c=(n?n+".":"")+a,h=c.split(".");"custom"===o.type&&(h=h.slice(0,h.length-1),u=u.slice(0,u.length-1));var f=r?r+".":"";if(i=f+i,M.names[i])throw Error("Duplicate name in schema: "+i);var p={name:i,type:o.type,persistent:!1,namePrefix:f,path:h,schemaPath:s,subPath:u,schemaEntry:o,dependents:[]};switch(M.names[i]=p,o.type){case"value":p.initValue=o.initValue,!0===o.persistent&&(p.persistent=o.persistent),x(i,f);break;case"customValue":p.initValue=o.initValue,!0===o.persistent&&(p.persistent=o.persistent),A(i,o,f);break;case"formula":q(i,o,f);break;case"collection":!0===o.persistent&&(p.persistent=o.persistent),x(i,f);break;case"view":var l=T(o);p.seqen=new C.Seqen(l.recipe),j(i,o,f);break;case"custom":R(i,o,f);break;case"schema":t(o.schema,i,c);break;default:throw new Error("Invalid SchemaEntry type: "+o.type)}}var _=[],v=[];for(var y in M.names){var d=M.names[y],g=d.schemaEntry;switch(g.type){case"formula":for(var m=0,w=g.props.length;m<w;m++)_.push([d.namePrefix+g.props[m],y]);v.push(["allDeps",y]);break;case"view":if(!g.sourceName)throw new Error("Source collection or view name is not specified for: "+y);var b=d.namePrefix+g.sourceName;if(!M.names[b])throw new Error("Source name not found in schema: "+b);_.push([b,y]),v.push(["allDeps",y]);for(var S=0,I=g.props.length;S<I;S++)_.push([d.namePrefix+g.props[S],y])}}var k=U(_);for(var O in k){var E=k[O],z=M.names[O];if(!z)throw new Error("Missing compiled name: "+O);z.dependents=E}var N=v.concat(_),D=U(N);D.allDeps&&(M.allDependents=D.allDeps)}(t,"",""),M.initState=function i(o,s,a){return(0,u.Map)().withMutations(function(t){for(var e in a||(a=t).set("_state",(0,u.Map)()),o){var r=o[e];if(t.get(e))throw new Error("duplicate name in schema: "+e);e=s+e;var n=M.names[e];switch(r.type){case"value":case"customValue":t.setIn(T(n.subPath),n.initValue);break;case"collection":t.setIn(T(n.subPath),(0,u.Map)()),a.setIn(["_state",e,"paused"],!1);break;case"schema":t.setIn(T(n.subPath),i(r.schema,s+e+".",a));break;case"custom":break;case"view":t.setIn(T(n.subPath),(0,u.Map)());break;case"formula":t.setIn(T(n.subPath),void 0);break;default:throw new Error("Unexpected entry type: "+r.type)}}})}(t,"",void 0),M}},{"immutable-sorted":11,seqen:14}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),at=t("immutable-sorted"),o=t("./CommonEngine"),s=(n=o)&&n.__esModule?n:{default:n};var ut=function(t){return t},a=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"stateReducer",value:function(){var n=this,rt=this._compiledSchema,i=function(t){throw new Error("Schema compilation error: "+t)},o=function(t,e,r){for(var n=0,i=r.length;n<i;n++){var o=r[n],s=st(o);switch(s.type){case"formula":for(var a=ut(s.schemaEntry),u={},c=0,h=a.props.length;c<h;c++){var f=a.props[c];switch(void 0===f?"undefined":I(f)){case"string":var p=st(s.namePrefix+f);u[f]=t.getIn(p.path);break;default:throw new Error("Invalid type of propName: "+(void 0===f?"undefined":I(f)))}}var l=a.recipe(u);t.setIn(s.path,l);break;case"view":for(var _=ut(s.schemaEntry),v=st(s.namePrefix+_.sourceName),y={},d=0,g=_.props.length;d<g;d++){var m=_.props[d];switch(void 0===m?"undefined":I(m)){case"string":var w=st(s.namePrefix+m);y[m]=t.getIn(w.path);break;default:throw new Error("Invalid type of propName: "+(void 0===m?"undefined":I(m)))}}var b=t.getIn(v.path);if(!s.seqen)throw new Error("Missing seqen for view: "+v.name);var S=s.seqen.process(b,y);t.setIn(s.path,S);break;default:throw new Error("Dependent type not supported: "+s.type)}}},nt=function(t,e,r){if(!0!==(!!("collection"==r.type)&&t.getIn(["_state",r.name,"paused"]))){var n=r.dependents;n&&o(t,0,n)}},it=function(t,e){o(t,0,rt.allDependents)},ot=function(t,e,r,n){var i=t.getIn(["_state",e,"originals"]);i&&(i.has(r)||t.setIn(["_state",e,"originals",r],n))},st=function(t){var e=rt.names[t];if(!e)throw new Error("Name does not exist in schema: "+t);return e};return function(e,r){return void 0===e?(e=rt.initState).withMutations(function(t){e=it(t)}):(r.collName&&((t=ut(r)).collName||i("Missing collName in action: "+t.toString()),"collection"!==n._getNameType(t.collName)&&i("Unknown collection name: "+t.collName)),e.withMutations(function(t){!function t(e,r,n){switch(n.type){case"DUXEN_BATCH":for(var i=ut(n).actions,o=0,s=i.size;o<s;o++)t(e,r,ut(i.get(o)));break;case"DUXEN_INSERT":var a=ut(n),u=st(a.collName),c=ut(e.getIn(u.path)).set(a.id,a.doc);e.setIn(u.path,c),ot(e,a.collName,a.id),nt(e,0,u);break;case"DUXEN_UPDATE":var h=ut(n),f=st(h.collName),p=ut(e.getIn(f.path)),l=h.id,_=p.get(l);if(!_)throw new Error("Updating document that does not exist: "+JSON.stringify(l));var v=h.doc,y=ut(v.get("$set")),d=ut(v.get("$unset")),g=ut(v.get("$inc")),m=ut(v.get("$mul")),w=void 0;w=y||d||g||m?_.withMutations(function(i){y&&y.forEach(function(t,e){return i.setIn(e.split("."),t)}),d&&d.forEach(function(t,e){return i.deleteIn(e.split("."))}),g&&g.forEach(function(t,e){var r=e.split("."),n=i.getIn(r);"number"==typeof n&&(n+=t,i.setIn(r,n))}),m&&m.forEach(function(t,e){var r=e.split("."),n=i.getIn(r);"number"==typeof n&&(n*=t,i.setIn(r,n))})}):v;var b=p.set(h.id,w);e.setIn(f.path,b),ot(e,h.collName,l,_),nt(e,0,f);break;case"DUXEN_REMOVE":var S=ut(n),I=st(S.collName),k=ut(e.getIn(I.path)),O=S.id,E=k.get(O);if(E){var z=k.remove(O);e.setIn(I.path,z),ot(e,S.collName,O,E),nt(e,0,I)}break;case"DUXEN_RESET":var N=ut(n),D=st(N.collName),M=(0,at.Map)();e.setIn(D.path,M),e.deleteIn(["_state",N.collName,"originals"]),nt(e,0,D);break;case"DUXEN_PAUSE":var x=ut(n);e.setIn(["_state",x.collName,"paused"],!0);break;case"DUXEN_RESUME":var A=ut(n),q=st(A.collName);e.setIn(["_state",A.collName,"paused"],!1),nt(e,0,q);break;case"DUXEN_SAVE":var j=ut(n),R=st(j.collName),C=ut(e.getIn(R.path));e.setIn(["_state",j.collName,"saved"],C);break;case"DUXEN_RESTORE":var T=ut(n),U=st(T.collName),P=ut(e.getIn(["_state",T.collName,"saved"]));if(!P)throw new Error("Restore: nothing was saved");e.deleteIn(["_state",T.collName,"saved"]),e.setIn(U.path,P),nt(e,0,U);break;case"DUXEN_SAVE_ORIGINALS":var B=ut(n);if(ut(e.getIn(["_state",B.collName,"originals"])))throw new Error("Save Originals: called twice without retrieve originals");e.setIn(["_state",B.collName,"originals"],(0,at.Map)());break;case"DUXEN_RETRIEVE_ORIGINALS":var L=ut(n);if(!ut(e.getIn(["_state",L.collName,"originals"])))throw new Error("Retrieve Originals: called without save originals");e.deleteIn(["_state",L.collName,"originals"]);break;case"DUXEN_REFRESH":it(e);break;case"DUXEN_VALUE":var F=ut(n),K=st(F.valueName),J=r.getIn(K.path);if(void 0===J)throw Error("Lost value in state:"+F.valueName);var V=F.value;J!==V&&(e.setIn(K.path,V),nt(e,0,K));break;default:var X=rt.actions[n.type];if(X){var W=X.name,H=st(W);switch(X.type){case"customValue":var Y=ut(n),G=r.getIn(H.path);if(void 0===G)throw Error("Lost value in state:"+W);var $=(0,X.reducer)(G,Y);G!==$&&(e.setIn(H.path,$),nt(e,0,H));break;case"custom":var Q=ut(n),Z=X.reducer;if(0<H.path.length){var tt=e.getIn(H.path);if(!tt)throw new Error("Missing path in state:"+JSON.stringify(H.path));var et=tt.asMutable();Z(et,Q),e.setIn(H.path,et)}else Z(e,Q);break;default:throw new Error("CompiledAction.type not supported: "+X.type)}}}}(t,e,r)}));var t}}}]),e}();r.default=a},{"./CommonEngine":3,"immutable-sorted":11}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();t("immutable-sorted");var i=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._actionFactory=t,this._subSchemaPath=e,this._prefix=e+"."}return n(r,[{key:"batch",value:function(t){return this._actionFactory.batch(t)}},{key:"insert",value:function(t,e,r){return t=this._prefix+t,this._actionFactory.insert(t,e,r)}},{key:"update",value:function(t,e,r){return t=this._prefix+t,this._actionFactory.update(t,e,r)}},{key:"remove",value:function(t,e){return t=this._prefix+t,this._actionFactory.remove(t,e)}},{key:"reset",value:function(t){return t=this._prefix+t,this._actionFactory.reset(t)}},{key:"pause",value:function(t){return t=this._prefix+t,this._actionFactory.pause(t)}},{key:"resume",value:function(t){return t=this._prefix+t,this._actionFactory.resume(t)}},{key:"save",value:function(t){return t=this._prefix+t,this._actionFactory.save(t)}},{key:"restore",value:function(t){return t=this._prefix+t,this._actionFactory.restore(t)}},{key:"saveOriginals",value:function(t){return t=this._prefix+t,this._actionFactory.saveOriginals(t)}},{key:"retrieveOriginals",value:function(t){return t=this._prefix+t,this._actionFactory.retrieveOriginals(t)}},{key:"refresh",value:function(){return this._actionFactory.refresh()}},{key:"value",value:function(t,e){return t=this._prefix+t,this._actionFactory.value(t,e)}},{key:"customValue",value:function(t,e){return t=this._prefix+t,this._actionFactory.customValue(t,e)}},{key:"custom",value:function(t){return t=this._prefix+t,this._actionFactory.custom(t)}},{key:"createBranch",value:function(t){return this._actionFactory.createBranch(t)}},{key:"switchBranch",value:function(t){return this._actionFactory.switchBranch(t)}},{key:"saveBranch",value:function(t){return this._actionFactory.saveBranch(t)}},{key:"resetBranch",value:function(t){return this._actionFactory.resetBranch(t)}},{key:"removeBranch",value:function(t){return this._actionFactory.removeBranch(t)}},{key:"goForward",value:function(t){return this._actionFactory.goForward(t)}},{key:"goBack",value:function(t){return this._actionFactory.goBack(t)}},{key:"goLive",value:function(){return this._actionFactory.goLive()}},{key:"setOption",value:function(t,e){return this._actionFactory.setOption(t,e)}}]),r}();r.default=i},{"immutable-sorted":11}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),i=s(t("./SubActionFactory")),o=s(t("./BoundActionFactory"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this._engine=t,this._subSchemaPath=e,this._prefix=e+".",this._actionFactory=new i.default(this._engine.actionFactory(),this._subSchemaPath)}return n(r,[{key:"get",value:function(t,e){if(!e)return this._engine.get(t,this._subSchemaPath);var r=this._prefix+e;return this._engine.get(t,r)}},{key:"subscribe",value:function(t){return this._engine.subscribe(t)}},{key:"printableState",value:function(t){var e=this.get(t,void 0);return e=this._engine.printableState(e)}},{key:"persistableState",value:function(t){this._engine.persistableState(t);return this.get(t,void 0)}},{key:"currentBranch",value:function(t){if(!t)throw Error("repo not defined");var e=t.get("currentBranch");return e}},{key:"currentBranchState",value:function(t){return this._engine.currentBranchState(t)}},{key:"live",value:function(t){return this.currentBranchState(t).get("live")}},{key:"head",value:function(t){return this._engine.head(t)}},{key:"prev",value:function(t){return this._engine.prev(t)}},{key:"subEngine",value:function(t){return this._engine.subEngine(this._prefix+t)}},{key:"actionFactory",value:function(){return this._actionFactory}},{key:"boundActionFactory",value:function(t){return new o.default(t,this.actionFactory())}},{key:"stateReducer",value:function(){throw new Error("Reducer is not implemented in SubEngine")}},{key:"repoReducer",value:function(){throw new Error("RepoReducer is not implemented in SubEngine")}}]),r}();r.default=a},{"./BoundActionFactory":2,"./SubActionFactory":8}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MeteorDriver=r.createEngine=void 0;var n,i=t("./RepoEngine"),o=(n=i)&&n.__esModule?n:{default:n},s=t("./MeteorDriver");var a=function(t){return new o.default(t)};r.createEngine=a,r.MeteorDriver=s.MeteorDriver,r.default={createEngine:a}},{"./MeteorDriver":4,"./RepoEngine":5}],11:[function(t,r,n){(function(ai){var t,e;t=this,e=function(t){"use strict";var e="delete",m=5,g=1<<m,w=g-1,I={},h={value:!1},f={value:!1},k={value:!1};function O(t){return t.value=!1,t}function E(t){t&&(t.value=!0)}function z(t){return t.value}function b(){}function c(t){return void 0===t.size&&(t.size=t.__iterate(r)),t.size}function s(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?c(t)+e:e}function r(){return!0}function p(t,e,r){return(0===t&&!i(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&r<=e)}function l(t,e){return n(t,e,0)}function _(t,e){return n(t,e,e)}function n(t,e,r){return void 0===t?r:i(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function i(t){return t<0||0===t&&1/t==-1/0}function v(t){return y(t)||o(t)}function y(t){return!(!t||!t[M])}function d(t){return!(!t||!t[x])}function S(t){return!(!t||!t[A])}function u(t){return d(t)||S(t)}function N(t){return!(!t||!t[q])}function o(t){return!(!t||!t[j])}function a(t){return!(!t||"function"!=typeof t.equals||"function"!=typeof t.hashCode)}function D(t){return!(!t||!t[R])}var M="@@__IMMUTABLE_ITERABLE__@@",x="@@__IMMUTABLE_KEYED__@@",A="@@__IMMUTABLE_INDEXED__@@",q="@@__IMMUTABLE_ORDERED__@@",j="@@__IMMUTABLE_RECORD__@@",R="@@__IMMUTABLE_SORTED__@@",C=function(t){return y(t)?t:et(t)},T=function(t){function e(t){return d(t)?t:rt(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(C),U=function(t){function e(t){return S(t)?t:nt(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(C),P=function(t){function e(t){return y(t)&&!u(t)?t:it(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(C);C.Keyed=T,C.Indexed=U,C.Set=P;var B=0,L=1,F=2,K="function"==typeof Symbol&&Symbol.iterator,J="@@iterator",V=K||J,X=function(t){this.next=t};function W(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function H(){return{value:void 0,done:!0}}function Y(t){return!!Q(t)}function G(t){return t&&"function"==typeof t.next}function $(t){var e=Q(t);return e&&e.call(t)}function Q(t){var e=t&&(K&&t[K]||t[J]);if("function"==typeof e)return e}X.prototype.toString=function(){return"[Iterator]"},X.KEYS=B,X.VALUES=L,X.ENTRIES=F,X.prototype.inspect=X.prototype.toSource=function(){return this.toString()},X.prototype[V]=function(){return this};var Z=Object.prototype.hasOwnProperty;function tt(t){return t&&"number"==typeof t.length}var et=function(t){function e(t){return null==t?pt():v(t)?t.toSeq():function(t){var e=vt(t);if(e)return e;if("object"!=typeof t)throw new TypeError("Expected Array or collection object of values, or keyed object: "+t);return new at(t)}(t)}return e.__proto__=t,((e.prototype=Object.create(t.prototype)).constructor=e).prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[e?n-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(e,r){var n=this._cache;if(n){var i=n.length,o=0;return new X(function(){if(o===i)return{value:void 0,done:!0};var t=n[r?i-++o:o++];return W(e,t[0],t[1])})}return this.__iteratorUncached(e,r)},e}(C),rt=function(t){function e(t){return null==t?pt().toKeyedSeq():y(t)?d(t)?t.toSeq():t.fromEntrySeq():o(t)?t.toSeq():lt(t)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.toKeyedSeq=function(){return this},e}(et),nt=function(t){function e(t){return null==t?pt():y(t)?d(t)?t.entrySeq():t.toIndexedSeq():o(t)?t.toSeq().entrySeq():_t(t)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(et),it=function(t){function e(t){return(y(t)&&!u(t)?t:nt(t)).toSetSeq()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(et);et.isSeq=ft,et.Keyed=rt,et.Set=it,et.Indexed=nt;var ot="@@__IMMUTABLE_SEQ__@@";et.prototype[ot]=!0;var st=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return this.has(t)?this._array[s(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,i=0;i!==n;){var o=e?n-++i:i++;if(!1===t(r[o],o,this))break}return i},e.prototype.__iterator=function(e,r){var n=this._array,i=n.length,o=0;return new X(function(){if(o===i)return{value:void 0,done:!0};var t=r?i-++o:o++;return W(e,t,n[t])})},e}(nt),at=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return Z.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var s=n[e?i-++o:o++];if(!1===t(r[s],s,this))break}return o},e.prototype.__iterator=function(e,r){var n=this._object,i=this._keys,o=i.length,s=0;return new X(function(){if(s===o)return{value:void 0,done:!0};var t=i[r?o-++s:s++];return W(e,t,n[t])})},e}(rt);at.prototype[q]=!0;var ut,ct=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=$(this._collection),n=0;if(G(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},e.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=$(this._collection);if(!G(r))return new X(H);var n=0;return new X(function(){var t=r.next();return t.done?t:W(e,n++,t.value)})},e}(nt),ht=function(t){function e(t){this._iterator=t,this._iteratorCache=[]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r,n=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(r=n.next()).done;){var s=r.value;if(!1===t(i[o]=s,o++,this))break}return o},e.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,i=0;return new X(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value}return W(e,i,n[i++])})},e}(nt);function ft(t){return!(!t||!t[ot])}function pt(){return ut||(ut=new st([]))}function lt(t){var e=Array.isArray(t)?new st(t):G(t)?new ht(t):Y(t)?new ct(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new at(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function _t(t){var e=vt(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function vt(t){return tt(t)?new st(t):G(t)?new ht(t):Y(t)?new ct(t):void 0}function yt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(a(t)&&a(e)&&t.equals(e))}var dt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function gt(t){return t>>>1&1073741824|3221225471&t}function mt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);4294967295<t;)r^=t/=4294967295;return gt(r)}if("string"===e)return t.length>zt?function(t){var e=Mt[t];void 0===e&&(e=wt(t),Dt===Nt&&(Dt=0,Mt={}),Dt++,Mt[t]=e);return e}(t):wt(t);if("function"==typeof t.hashCode)return gt(t.hashCode());if("object"===e)return function(t){var e;if(kt&&void 0!==(e=It.get(t)))return e;if(void 0!==(e=t[Et]))return e;if(!St){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Et]))return e;if(void 0!==(e=function(t){if(t&&0<t.nodeType)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++Ot,1073741824&Ot&&(Ot=0);if(kt)It.set(t,e);else{if(void 0!==bt&&!1===bt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(St)Object.defineProperty(t,Et,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Et]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Et]=e}}return e}(t);if("function"==typeof t.toString)return wt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function wt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return gt(e)}var bt=Object.isExtensible,St=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var It,kt="function"==typeof WeakMap;kt&&(It=new WeakMap);var Ot=0,Et="__immutablehash__";"function"==typeof Symbol&&(Et=Symbol(Et));var zt=16,Nt=255,Dt=0,Mt={},xt=function(t,e,r){var n=t[e];t[e]=t[r],t[r]=n},At=function(t,e,r,n,i){if(!(n<e||r<n))for(;e<r;){if(1e3<r-e){var o=r-e+1,s=n-e+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*Math.sign(s-o/2),h=Math.max(e,Math.floor(n-s*u/o+c)),f=Math.min(r,Math.floor(n+(o-s)*u/o+c));At(t,h,f,n,i)}var p=t[n],l=e,_=r;for(xt(t,e,n),0<i(t[r],p)&&xt(t,r,e);l<_;){for(xt(t,l++,_--);i(t[l],p)<0;)l++;for(;0<i(t[_],p);)_--}t[e]===p?xt(t,e,_):xt(t,++_,r),_<=n&&(e=_+1),n<=_&&(r=_-1)}},qt=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Pt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=Ut(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(r,t){var n=this;return this._iter.__iterate(function(t,e){return r(t,e,n)},t)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(rt);qt.prototype[q]=!0;var jt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(e,r){var n=this,i=0;return r&&c(this),this._iter.__iterate(function(t){return e(t,r?n.size-++i:i++,n)},r)},e.prototype.__iterator=function(e,r){var n=this,i=this._iter.__iterator(L,r),o=0;return r&&c(this),new X(function(){var t=i.next();return t.done?t:W(e,r?n.size-++o:o++,t.value,t)})},e}(nt),Rt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},e.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new X(function(){var t=r.next();return t.done?t:W(e,t.value,t.value,t)})},e}(it),Ct=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(r,t){var n=this;return this._iter.__iterate(function(t){if(t){$t(t);var e=y(t);return r(e?t.get(1):t[1],e?t.get(0):t[0],n)}},t)},e.prototype.__iterator=function(n,t){var i=this._iter.__iterator(L,t);return new X(function(){for(;;){var t=i.next();if(t.done)return t;var e=t.value;if(e){$t(e);var r=y(e);return W(n,r?e.get(0):e[0],r?e.get(1):e[1],t)}}})},e}(rt);function Tt(i){var t=Zt(i);return t._iter=i,t.size=i.size,t.flip=function(){return i},t.reverse=function(){var t=i.reverse.apply(this);return t.flip=function(){return i.reverse()},t},t.has=function(t){return i.includes(t)},t.includes=function(t){return i.has(t)},t.cacheResult=te,t.__iterateUncached=function(r,t){var n=this;return i.__iterate(function(t,e){return!1!==r(e,t,n)},t)},t.__iteratorUncached=function(t,e){if(t!==F)return i.__iterator(t===L?B:L,e);var r=i.__iterator(t,e);return new X(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})},t}function Ut(o,s,a){var t=Zt(o);return t.size=o.size,t.has=function(t){return o.has(t)},t.get=function(t,e){var r=o.get(t,I);return r===I?e:s.call(a,r,t,o)},t.__iterateUncached=function(n,t){var i=this;return o.__iterate(function(t,e,r){return!1!==n(s.call(a,t,e,r),e,i)},t)},t.__iteratorUncached=function(n,t){var i=o.__iterator(F,t);return new X(function(){var t=i.next();if(t.done)return t;var e=t.value,r=e[0];return W(n,r,s.call(a,e[1],r,o),t)})},t}function Pt(s,a){var u=this,t=Zt(s);return t._iter=s,t.size=s.size,t.reverse=function(){return s},s.flip&&(t.flip=function(){var t=Tt(s);return t.reverse=function(){return s.flip()},t}),t.get=function(t,e){return s.get(a?t:-1-t,e)},t.has=function(t){return s.has(a?t:-1-t)},t.includes=function(t){return s.includes(t)},t.cacheResult=te,t.__iterate=function(r,n){var i=this,o=0;return n&&c(s),s.__iterate(function(t,e){return r(t,a?e:n?i.size-++o:o++,i)},!n)},t.__iterator=function(r,n){var i=0;n&&c(s);var o=s.__iterator(F,!n);return new X(function(){var t=o.next();if(t.done)return t;var e=t.value;return W(r,a?e[0]:n?u.size-++i:i++,e[1],t)})},t}function Bt(a,u,c,h){var t=Zt(a);return h&&(t.has=function(t){var e=a.get(t,I);return e!==I&&!!u.call(c,e,t,a)},t.get=function(t,e){var r=a.get(t,I);return r!==I&&u.call(c,r,t,a)?r:e}),t.__iterateUncached=function(n,t){var i=this,o=0;return a.__iterate(function(t,e,r){if(u.call(c,t,e,r))return o++,n(t,h?e:o-1,i)},t),o},t.__iteratorUncached=function(i,t){var o=a.__iterator(F,t),s=0;return new X(function(){for(;;){var t=o.next();if(t.done)return t;var e=t.value,r=e[0],n=e[1];if(u.call(c,n,r,a))return W(i,h?r:s++,n,t)}})},t}function Lt(a,t,e,u){var r=a.size;if(p(t,e,r))return a;var c=l(t,r),n=_(e,r);if(c!=c||n!=n)return Lt(a.toSeq().cacheResult(),t,e,u);var h,i=n-c;i==i&&(h=i<0?0:i);var o=Zt(a);return o.size=0===h?h:a.size&&h||void 0,!u&&ft(a)&&0<=h&&(o.get=function(t,e){return 0<=(t=s(this,t))&&t<h?a.get(t+c,e):e}),o.__iterateUncached=function(r,t){var n=this;if(0===h)return 0;if(t)return this.cacheResult().__iterate(r,t);var i=0,o=!0,s=0;return a.__iterate(function(t,e){if(!o||!(o=i++<c))return s++,!1!==r(t,u?e:s-1,n)&&s!==h}),s},o.__iteratorUncached=function(e,t){if(0!==h&&t)return this.cacheResult().__iterator(e,t);if(0===h)return new X(H);var r=a.__iterator(e,t),n=0,i=0;return new X(function(){for(;n++<c;)r.next();if(++i>h)return{value:void 0,done:!0};var t=r.next();return u||e===L||t.done?t:W(e,i-1,e===B?void 0:t.value[1],t)})},o}function Ft(e,c,h,f){var t=Zt(e);return t.__iterateUncached=function(n,t){var i=this;if(t)return this.cacheResult().__iterate(n,t);var o=!0,s=0;return e.__iterate(function(t,e,r){if(!o||!(o=c.call(h,t,e,r)))return s++,n(t,f?e:s-1,i)}),s},t.__iteratorUncached=function(i,t){var o=this;if(t)return this.cacheResult().__iterator(i,t);var s=e.__iterator(F,t),a=!0,u=0;return new X(function(){var t,e,r;do{if((t=s.next()).done)return f||i===L?t:W(i,u++,i===B?void 0:t.value[1],t);var n=t.value;e=n[0],r=n[1],a&&(a=c.call(h,r,e,o))}while(a);return i===F?t:W(i,e,r,t)})},t}function Kt(t,a,u){var c=Zt(t);return c.__iterateUncached=function(i,e){if(e)return this.cacheResult().__iterate(i,e);var o=0,s=!1;return function r(t,n){t.__iterate(function(t,e){return(!a||n<a)&&y(t)?r(t,n+1):(o++,!1===i(t,u?e:o-1,c)&&(s=!0)),!s},e)}(t,0),o},c.__iteratorUncached=function(r,n){if(n)return this.cacheResult().__iterator(r,n);var i=t.__iterator(r,n),o=[],s=0;return new X(function(){for(;i;){var t=i.next();if(!1===t.done){var e=t.value;if(r===F&&(e=e[1]),a&&!(o.length<a)||!y(e))return u?t:W(r,s++,e,t);o.push(i),i=e.__iterator(r,n)}else i=o.pop()}return{value:void 0,done:!0}})},c}function Jt(r,n,i){n||(n=ee);var t=d(r),o=0,s=r.toSeq().map(function(t,e){return[e,t,o++,i?i(t,e,r):t]}).valueSeq().toArray();return s.sort(function(t,e){return n(t[3],e[3])||t[2]-e[2]}).forEach(t?function(t,e){s[e].length=2}:function(t,e){s[e]=t[1]}),t?rt(s):S(r)?nt(s):it(s)}function Vt(r,t,n,i){n||(n=ee);var e,o,s,a=d(r),u=0,c=r.toSeq().map(function(t,e){return[e,t,u++,i?i(t,e,r):t]}).valueSeq().toArray(),h=function(t,e){return n(t[3],e[3])||t[2]-e[2]};return o=t,(s=h)||(s=function(t,e){return e<t?1:t<e?-1:0}),At(e=c,0,e.length-1,o,s),(c=c.slice(0,t)).sort(h).forEach(a?function(t,e){c[e].length=2}:function(t,e){c[e]=t[1]}),a?rt(c):S(r)?nt(c):it(c)}function Xt(r,_,n,v){_||(_=ee);var i=0,y=r.toSeq().map(function(t,e){return[e,t,i++,n?n(t,e,r):t]}).valueSeq(),t=Zt(r);return t.__iterateUncached=function(t,e){var r=y.toArray(),n=e?function(t,e){return _(e,t)}:_,i=function(t,e){return n(t[3],e[3])||t[2]-e[2]},o=r.length>>10;o=Math.min(r.length,10);var s,a=0,u=-1,c=0,h=0;function f(){return c<=h&&(a=u+1,u=Math.min(u+o,r.length-1),c=u-a+1,h=0,o<<=2,At(r,a,r.length-1,u,i),(s=r.slice(a,u+1)).sort(i).forEach(function(t,e){s[e].length=2})),s[h++]}for(var p=0;p<r.length;){var l=f();if(!1===t(l[1],v?l[0]:p,this))break;p++}return p},t.__iteratorUncached=function(e,t){var r=y.toArray(),n=t?function(t,e){return _(e,t)}:_,i=function(t,e){return n(t[3],e[3])||t[2]-e[2]},o=r.length>>10;o=Math.min(r.length,10);var s,a=0,u=-1,c=0,h=0;function f(){return c<=h&&(a=u+1,u=Math.min(u+o,r.length-1),c=u-a+1,h=0,o<<=2,At(r,a,r.length-1,u,i),(s=r.slice(a,u+1)).sort(i).forEach(function(t,e){s[e].length=2})),s[h++]}var p=0;return new X(function(){if(p>=r.length)return{value:void 0,done:!0};p++;var t=f();return W(e,v?t[0]:p,t[1])})},t}function Wt(r,n,i){if(n||(n=ee),i){var t=r.toSeq().map(function(t,e){return[t,i(t,e,r)]}).reduce(function(t,e){return Ht(n,t[1],e[1])?e:t});return t&&t[0]}return r.reduce(function(t,e){return Ht(n,t,e)?e:t})}function Ht(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||0<n}function Yt(t,s,a,u){var e=Zt(t),r=new st(a).map(function(t){return t.size});return e.size=u?r.max():r.min(),e.__iterate=function(t,e){for(var r,n=this.__iterator(L,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},e.__iteratorUncached=function(e,r){var n=a.map(function(t){return t=C(t),$(r?t.reverse():t)}),i=0,o=!1;return new X(function(){var t;return o||(t=n.map(function(t){return t.next()}),o=u?t.every(function(t){return t.done}):t.some(function(t){return t.done})),o?{value:void 0,done:!0}:W(e,i++,s.apply(null,t.map(function(t){return t.value})))})},e}function Gt(t,e){return t===e?t:ft(t)?e:t.constructor(e)}function $t(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qt(t){return d(t)?T:S(t)?U:P}function Zt(t){return Object.create((d(t)?rt:S(t)?nt:it).prototype)}function te(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):et.prototype.cacheResult.call(this)}function ee(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:e<t?1:t<e?-1:0}function re(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function ne(t,e){if(!t)throw new Error(e)}function ie(t){ne(t!==1/0,"Cannot perform this action with an infinite size.")}function oe(t){if(tt(t)&&"string"!=typeof t)return t;if(N(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function se(t){return t&&(t.constructor===Object||void 0===t.constructor)}function ae(t){return v(t)||Array.isArray(t)||se(t)}function ue(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function ce(t,e){return v(t)?t.has(e):ae(t)&&Z.call(t,e)}function he(t,e,r){return v(t)?t.get(e,r):ce(t,e)?"function"==typeof t.get?t.get(e):t[e]:r}function fe(t){if(Array.isArray(t))return re(t);var e={};for(var r in t)Z.call(t,r)&&(e[r]=t[r]);return e}function pe(t,e){if(!ae(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(v(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Z.call(t,e))return t;var r=fe(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function le(t,e,r){if(!ae(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(v(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(Z.call(t,e)&&r===t[e])return t;var n=fe(t);return n[e]=r,n}function _e(t,e,r,n){n||(n=r,r=void 0);var i=function t(e,r,n,i,o,s){var a=r===I;if(i===n.length){var u=a?o:r,c=s(u);return c===u?r:c}if(!a&&!ae(r))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,i).map(ue)+"]: "+r);var h=n[i];var f=a?I:he(r,h,I);var p=t(f===I?e:v(f),f,n,i+1,o,s);return p===f?r:p===I?pe(r,h):le(a?e?Ze():{}:r,h,p)}(v(t),t,oe(e),0,r,n);return i===I?r:i}function ve(t,e,r){return _e(t,e,I,function(){return r})}function ye(t,e){return ve(this,t,e)}function de(t,e){return _e(t,e,function(){return I})}function ge(t){return de(this,t)}function me(t,e,r,n){return _e(t,[e],r,n)}function we(t,e,r){return 1===arguments.length?t(this):me(this,t,e,r)}function be(t,e,r){return _e(this,t,e,r)}function Se(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ke(this,t)}function Ie(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return ke(this,e,t)}function ke(t,e,i){for(var r=[],n=0;n<e.length;n++){var o=T(e[n]);0!==o.size&&r.push(o)}return 0===r.length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(n){for(var t=i?function(e,r){me(n,r,I,function(t){return t===I?e:i(t,e,r)})}:function(t,e){n.set(e,t)},e=0;e<r.length;e++)r[e].forEach(t)}):t.constructor(r[0])}function Oe(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return Me(t,e)}function Ee(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return Me(e,r,t)}function ze(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return De(t,e)}function Ne(t,e){for(var r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return De(e,r,t)}function De(t,e,r){return Me(t,e,(i=r,function t(e,r,n){return ae(e)&&ae(r)?Me(e,[r],t):i?i(e,r,n):r}));var i}function Me(i,t,o){if(!ae(i))throw new TypeError("Cannot merge into non-data-structure value: "+i);if(v(i))return i.mergeWith?i.mergeWith.apply(i,[o].concat(t)):i.concat.apply(i,t);for(var e=Array.isArray(i),s=i,r=e?U:T,n=e?function(t){s===i&&(s=fe(s)),s.push(t)}:function(t,e){var r=Z.call(s,e),n=r&&o?o(s[e],t,e):t;r&&n===s[e]||(s===i&&(s=fe(s)),s[e]=n)},a=0;a<t.length;a++)r(t[a]).forEach(n);return s}function xe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return De(this,t)}function Ae(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return De(this,e,t)}function qe(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return _e(this,t,Ze(),function(t){return Me(t,e)})}function je(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return _e(this,t,Ze(),function(t){return De(t,e)})}function Re(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Ce(){return this.__ownerID?this:this.__ensureOwner(new b)}function Te(){return this.__ensureOwner()}function Ue(){return this.__altered}jt.prototype.cacheResult=qt.prototype.cacheResult=Rt.prototype.cacheResult=Ct.prototype.cacheResult=te;var Pe=function(n){function t(e){return null==e?Ze():!Be(e)||N(e)||D(e)?Ze().withMutations(function(r){var t=n(e);ie(t.size),t.forEach(function(t,e){return r.set(e,t)})}):e}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).of=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return Ze().withMutations(function(t){for(var e=0;e<r.length;e+=2){if(e+1>=r.length)throw new Error("Missing value for key: "+r[e]);t.set(r[e],r[e+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},t.prototype.set=function(t,e){return tr(this,t,e)},t.prototype.remove=function(t){return tr(this,t,I)},t.prototype.deleteAll=function(t){var r=C(t);return 0===r.size?this:this.withMutations(function(e){r.forEach(function(t){return e.remove(t)})})},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ze()},t.prototype.sort=function(t){return Or(Jt(this,t))},t.prototype.sortBy=function(t,e){return Or(Jt(this,e,t))},t.prototype.__iterator=function(t,e){return new Ye(this,t,e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Qe(this.size,this._root,t,this.__hash):0===this.size?Ze():(this.__ownerID=t,this.__altered=!1,this)},t}(T);function Be(t){return!(!t||!t[Le])}Pe.isMap=Be;var Le="@@__IMMUTABLE_MAP__@@",Fe=Pe.prototype;Fe[Le]=!0,Fe[e]=Fe.remove,Fe.removeAll=Fe.deleteAll,Fe.concat=Fe.merge,Fe.setIn=ye,Fe.removeIn=Fe.deleteIn=ge,Fe.update=we,Fe.updateIn=be,Fe.merge=Se,Fe.mergeWith=Ie,Fe.mergeDeep=xe,Fe.mergeDeepWith=Ae,Fe.mergeIn=qe,Fe.mergeDeepIn=je,Fe.withMutations=Re,Fe.wasAltered=Ue,Fe.asImmutable=Te,Fe["@@transducer/init"]=Fe.asMutable=Ce,Fe["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Fe["@@transducer/result"]=function(t){return t.asImmutable()};var Ke=function(t,e){this.ownerID=t,this.entries=e};Ke.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(yt(r,i[o][0]))return i[o][1];return n},Ke.prototype.update=function(t,e,r,n,i,o,s){for(var a=i===I,u=this.entries,c=0,h=u.length;c<h&&!yt(n,u[c][0]);c++);var f=c<h;if(f?u[c][1]===i:a)return this;if(E(s),(a||!f)&&E(o),!a||1!==u.length){if(!f&&!a&&u.length>=sr)return function(t,e,r,n){t||(t=new b);for(var i=new We(t,mt(r),[r,n]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,u,n,i);var p=t&&t===this.ownerID,l=p?u:re(u);return f?a?c===h-1?l.pop():l[c]=l.pop():l[c]=[n,i]:l.push([n,i]),p?(this.entries=l,this):new Ke(t,l)}};var Je=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};Je.prototype.get=function(t,e,r,n){void 0===e&&(e=mt(r));var i=1<<((0===t?e:e>>>t)&w),o=this.bitmap;return 0==(o&i)?n:this.nodes[ir(o&i-1)].get(t+m,e,r,n)},Je.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=mt(n));var a=(0===e?r:r>>>e)&w,u=1<<a,c=this.bitmap,h=0!=(c&u);if(!h&&i===I)return this;var f=ir(c&u-1),p=this.nodes,l=h?p[f]:void 0,_=er(l,t,e+m,r,n,i,o,s);if(_===l)return this;if(!h&&_&&p.length>=ar)return function(t,e,r,n,i){for(var o=0,s=new Array(g),a=0;0!==r;a++,r>>>=1)s[a]=1&r?e[o++]:void 0;return s[n]=i,new Ve(t,o+1,s)}(t,p,c,a,_);if(h&&!_&&2===p.length&&rr(p[1^f]))return p[1^f];if(h&&_&&1===p.length&&rr(_))return _;var v=t&&t===this.ownerID,y=h?_?c:c^u:c|u,d=h?_?or(p,f,_,v):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,s=0;s<n;s++)s===e&&(o=1),i[s]=t[s+o];return i}(p,f,v):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),s=0,a=0;a<i;a++)a===e?(o[a]=r,s=-1):o[a]=t[a+s];return o}(p,f,_,v);return v?(this.bitmap=y,this.nodes=d,this):new Je(t,y,d)};var Ve=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};Ve.prototype.get=function(t,e,r,n){void 0===e&&(e=mt(r));var i=(0===t?e:e>>>t)&w,o=this.nodes[i];return o?o.get(t+m,e,r,n):n},Ve.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=mt(n));var a=(0===e?r:r>>>e)&w,u=i===I,c=this.nodes,h=c[a];if(u&&!h)return this;var f=er(h,t,e+m,r,n,i,o,s);if(f===h)return this;var p=this.count;if(h){if(!f&&--p<ur)return function(t,e,r,n){for(var i=0,o=0,s=new Array(r),a=0,u=1,c=e.length;a<c;a++,u<<=1){var h=e[a];void 0!==h&&a!==n&&(i|=u,s[o++]=h)}return new Je(t,i,s)}(t,c,p,a)}else p++;var l=t&&t===this.ownerID,_=or(c,a,f,l);return l?(this.count=p,this.nodes=_,this):new Ve(t,p,_)};var Xe=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};Xe.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(yt(r,i[o][0]))return i[o][1];return n},Xe.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=mt(n));var a=i===I;if(r!==this.keyHash)return a?this:(E(s),E(o),nr(this,t,e,r,[n,i]));for(var u=this.entries,c=0,h=u.length;c<h&&!yt(n,u[c][0]);c++);var f=c<h;if(f?u[c][1]===i:a)return this;if(E(s),(a||!f)&&E(o),a&&2===h)return new We(t,this.keyHash,u[1^c]);var p=t&&t===this.ownerID,l=p?u:re(u);return f?a?c===h-1?l.pop():l[c]=l.pop():l[c]=[n,i]:l.push([n,i]),p?(this.entries=l,this):new Xe(t,this.keyHash,l)};var We=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};We.prototype.get=function(t,e,r,n){return yt(r,this.entry[0])?this.entry[1]:n},We.prototype.update=function(t,e,r,n,i,o,s){var a=i===I,u=yt(n,this.entry[0]);return(u?i===this.entry[1]:a)?this:(E(s),a?void E(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new We(t,this.keyHash,[n,i]):(E(o),nr(this,t,e,mt(n),[n,i])))},Ke.prototype.iterate=Xe.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},Je.prototype.iterate=Ve.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},We.prototype.iterate=function(t,e){return t(this.entry)};var He,Ye=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&$e(t._root)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){for(var t=this,e=this._type,r=this._stack;r;){var n=r.node,i=r.index++,o=void 0;if(n.entry){if(0===i)return Ge(e,n.entry)}else if(n.entries){if(i<=(o=n.entries.length-1))return Ge(e,n.entries[t._reverse?o-i:i])}else if(i<=(o=n.nodes.length-1)){var s=n.nodes[t._reverse?o-i:i];if(s){if(s.entry)return Ge(e,s.entry);r=t._stack=$e(s,r)}continue}r=t._stack=t._stack.__prev}return{value:void 0,done:!0}},e}(X);function Ge(t,e){return W(t,e[0],e[1])}function $e(t,e){return{node:t,index:0,__prev:e}}function Qe(t,e,r,n){var i=Object.create(Fe);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Ze(){return He||(He=Qe(0))}function tr(t,e,r){var n,i;if(t._root){var o=O(h),s=O(f);if(n=er(t._root,t.__ownerID,0,void 0,e,r,o,s),!z(s))return t;i=t.size+(z(o)?r===I?-1:1:0)}else{if(r===I)return t;i=1,n=new Ke(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Qe(i,n):Ze()}function er(t,e,r,n,i,o,s,a){return t?t.update(e,r,n,i,o,s,a):o===I?t:(E(a),E(s),new We(e,n,[i,o]))}function rr(t){return t.constructor===We||t.constructor===Xe}function nr(t,e,r,n,i){if(t.keyHash===n)return new Xe(e,n,[t.entry,i]);var o,s=(0===r?t.keyHash:t.keyHash>>>r)&w,a=(0===r?n:n>>>r)&w,u=s===a?[nr(t,e,r+m,n,i)]:(o=new We(e,n,i),s<a?[t,o]:[o,t]);return new Je(e,1<<s|1<<a,u)}function ir(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function or(t,e,r,n){var i=n?t:re(t);return i[e]=r,i}var sr=g/4,ar=g/2,ur=g/4,cr=function(o){function t(t){var e=gr();if(null==t)return e;if(hr(t))return t;var n=o(t),i=n.size;return 0===i?e:(ie(i),0<i&&i<g?dr(0,i,m,null,new lr(n.toArray())):e.withMutations(function(r){r.setSize(i),n.forEach(function(t,e){return r.set(e,t)})}))}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(t,e){if(0<=(t=s(this,t))&&t<this.size){var r=br(this,t+=this._origin);return r&&r.array[t&w]}return e},t.prototype.set=function(t,e){return function(t,e,r){if((e=s(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Sr(t,e).set(0,r):Sr(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o=O(f);e>=Ir(t._capacity)?n=mr(n,t.__ownerID,0,e,r,o):i=mr(i,t.__ownerID,t._level,e,r,o);if(!z(o))return t;if(t.__ownerID)return t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t;return dr(t._origin,t._capacity,t._level,i,n)}(this,t,e)},t.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},t.prototype.insert=function(t,e){return this.splice(t,0,e)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=m,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):gr()},t.prototype.push=function(){var r=arguments,n=this.size;return this.withMutations(function(t){Sr(t,0,n+r.length);for(var e=0;e<r.length;e++)t.set(n+e,r[e])})},t.prototype.pop=function(){return Sr(this,0,-1)},t.prototype.unshift=function(){var r=arguments;return this.withMutations(function(t){Sr(t,-r.length);for(var e=0;e<r.length;e++)t.set(e,r[e])})},t.prototype.shift=function(){return Sr(this,1)},t.prototype.concat=function(){for(var t=arguments,r=[],e=0;e<arguments.length;e++){var n=t[e],i=o("string"!=typeof n&&Y(n)?n:[n]);0!==i.size&&r.push(i)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){r.forEach(function(t){return t.forEach(function(t){return e.push(t)})})}):this.constructor(r[0])},t.prototype.setSize=function(t){return Sr(this,0,t)},t.prototype.slice=function(t,e){var r=this.size;return p(t,e,r)?this:Sr(this,l(t,r),_(e,r))},t.prototype.__iterator=function(e,r){var n=r?this.size:0,i=yr(this,r);return new X(function(){var t=i();return t===vr?{value:void 0,done:!0}:W(e,r?--n:n++,t)})},t.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,i=yr(this,e);(r=i())!==vr&&!1!==t(r,e?--n:n++,this););return n},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?dr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?gr():(this.__ownerID=t,this.__altered=!1,this)},t}(U);function hr(t){return!(!t||!t[fr])}cr.isList=hr;var fr="@@__IMMUTABLE_LIST__@@",pr=cr.prototype;pr[fr]=!0,pr[e]=pr.remove,pr.merge=pr.concat,pr.setIn=ye,pr.deleteIn=pr.removeIn=ge,pr.update=we,pr.updateIn=be,pr.mergeIn=qe,pr.mergeDeepIn=je,pr.withMutations=Re,pr.wasAltered=Ue,pr.asImmutable=Te,pr["@@transducer/init"]=pr.asMutable=Ce,pr["@@transducer/step"]=function(t,e){return t.push(e)},pr["@@transducer/result"]=function(t){return t.asImmutable()};var lr=function(t,e){this.array=t,this.ownerID=e};lr.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&w;if(n>=this.array.length)return new lr([],t);var i,o=0===n;if(0<e){var s=this.array[n];if((i=s&&s.removeBefore(t,e-m,r))===s&&o)return this}if(o&&!i)return this;var a=wr(this,t);if(!o)for(var u=0;u<n;u++)a.array[u]=void 0;return i&&(a.array[n]=i),a},lr.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,i=r-1>>>e&w;if(i>=this.array.length)return this;if(0<e){var o=this.array[i];if((n=o&&o.removeAfter(t,e-m,r))===o&&i===this.array.length-1)return this}var s=wr(this,t);return s.array.splice(i+1),n&&(s.array[i]=n),s};var _r,vr={};function yr(t,u){var c=t._origin,h=t._capacity,o=Ir(h),s=t._tail;return f(t._root,t._level,0);function f(t,e,r){return 0===e?function(t,e){var r=e===o?s&&s.array:t&&t.array,n=c<e?0:c-e,i=h-e;g<i&&(i=g);return function(){if(n===i)return vr;var t=u?--i:n++;return r&&r[t]}}(t,r):function(t,r,n){var i,o=t&&t.array,s=c<n?0:c-n>>r,a=1+(h-n>>r);g<a&&(a=g);return function(){for(;;){if(i){var t=i();if(t!==vr)return t;i=null}if(s===a)return vr;var e=u?--a:s++;i=f(o&&o[e],r-m,n+(e<<r))}}}(t,e,r)}}function dr(t,e,r,n,i,o,s){var a=Object.create(pr);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function gr(){return _r||(_r=dr(0,0,m))}function mr(t,e,r,n,i,o){var s,a=n>>>r&w,u=t&&a<t.array.length;if(!u&&void 0===i)return t;if(0<r){var c=t&&t.array[a],h=mr(c,e,r-m,n,i,o);return h===c?t:((s=wr(t,e)).array[a]=h,s)}return u&&t.array[a]===i?t:(E(o),s=wr(t,e),void 0===i&&a===s.array.length-1?s.array.pop():s.array[a]=i,s)}function wr(t,e){return e&&t&&e===t.ownerID?t:new lr(t?t.array.slice():[],e)}function br(t,e){if(e>=Ir(t._capacity))return t._tail;if(e<1<<t._level+m){for(var r=t._root,n=t._level;r&&0<n;)r=r.array[e>>>n&w],n-=m;return r}}function Sr(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new b,i=t._origin,o=t._capacity,s=i+e,a=void 0===r?o:r<0?o+r:i+r;if(s===i&&a===o)return t;if(a<=s)return t.clear();for(var u=t._level,c=t._root,h=0;s+h<0;)c=new lr(c&&c.array.length?[void 0,c]:[],n),h+=1<<(u+=m);h&&(s+=h,i+=h,a+=h,o+=h);for(var f=Ir(o),p=Ir(a);1<<u+m<=p;)c=new lr(c&&c.array.length?[c]:[],n),u+=m;var l=t._tail,_=p<f?br(t,a-1):f<p?new lr([],n):l;if(l&&f<p&&s<o&&l.array.length){for(var v=c=wr(c,n),y=u;m<y;y-=m){var d=f>>>y&w;v=v.array[d]=wr(v.array[d],n)}v.array[f>>>m&w]=l}if(a<o&&(_=_&&_.removeAfter(n,0,a)),p<=s)s-=p,a-=p,u=m,c=null,_=_&&_.removeBefore(n,0,s);else if(i<s||p<f){for(h=0;c;){var g=s>>>u&w;if(g!==p>>>u&w)break;g&&(h+=(1<<u)*g),u-=m,c=c.array[g]}c&&i<s&&(c=c.removeBefore(n,u,s-h)),c&&p<f&&(c=c.removeAfter(n,u,p-h)),h&&(s-=h,a-=h)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=_,t.__hash=void 0,t.__altered=!0,t):dr(s,a,u,c,_)}function Ir(t){return t<g?0:t-1>>>m<<m}var kr,Or=function(t){function e(e){return null==e?Nr():Er(e)?e:Nr().withMutations(function(r){var t=T(e);ie(t.size),t.forEach(function(t,e){return r.set(e,t)})})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Nr()},e.prototype.set=function(t,e){return Dr(this,t,e)},e.prototype.remove=function(t){return Dr(this,t,I)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?zr(e,r,t,this.__hash):0===this.size?Nr():(this.__ownerID=t,this._map=e,this._list=r,this)},e}(Pe);function Er(t){return Be(t)&&N(t)}function zr(t,e,r,n){var i=Object.create(Or.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function Nr(){return kr||(kr=zr(Ze(),gr()))}function Dr(t,e,r){var n,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(r===I){if(!u)return t;s.size>=g&&s.size>=2*o.size?(n=(i=s.filter(function(t,e){return void 0!==t&&a!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(r===s.get(a)[1])return t;n=o,i=s.set(a,[e,r])}else n=o.set(e,s.size),i=s.set(s.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):zr(n,i)}Or.isOrderedMap=Er,Or.prototype[q]=!0,Or.prototype[e]=Or.prototype.remove;var Mr=function(t,e,r){this.comparator=t,this.options=e,this.ownerID=r};Mr.prototype.getComparator=function(){},Mr.prototype.get=function(t,e){},Mr.prototype.upsert=function(t,e,r,n,i){},Mr.prototype.remove=function(t,e,r,n){},Mr.prototype.fastRemove=function(t,e,r,n){},Mr.prototype.iterate=function(t,e){},Mr.prototype.print=function(t,e){},Mr.prototype.checkConsistency=function(t){};var xr=function(){};xr.prototype.pack=function(t,e,r,n){};var Ar=function(){};Ar.prototype.createNode=function(t,e,r,n,i){},Ar.prototype.createPacker=function(){},Ar.prototype.createIterator=function(t,e,r){};var qr=function(v){function S(t,e,r,n,i){return v.call(this,t,e,r),this.entries=n,this.nodes=i,this.btreeOrder=e&&e.btreeOrder?e.btreeOrder:33,this.btreeNodeSplitSize=Math.floor((this.btreeOrder-1)/2),this}return v&&(S.__proto__=v),((S.prototype=Object.create(v&&v.prototype)).constructor=S).prototype.getComparator=function(){return this.comparator},S.prototype.get=function(t,e){var r=this.entries,n=O(k),i=Xr(this.comparator,r,t,n);if(z(n)){var o=r[i][1];return o===I?e:o}var s=this.nodes;if(s){var a=s[i].get(t,e);return a===I?e:a}return e},S.prototype.firstKey=function(){var t=this.nodes;return t?t[0].firstKey():this.entries[0][0]},S.prototype.lastKey=function(){var t=this.nodes;if(t)return t[t.length-1].lastKey();var e=this.entries;return e[e.length-1][0]},S.prototype.upsert=function(t,e,r,n,i,o){if(!o){var s=[],a=this.upsert(t,e,r,n,i,s);if(s[0]){var u=[s[0]],c=[a,s[1]];a=new S(this.comparator,this.options,t,u,c)}return a}var h,f,p=this.entries,l=O(k),_=Xr(this.comparator,p,e,l),v=z(l),y=this.nodes,d=t&&t===this.ownerID;if(v){if(p[_][1]===r)return this;var g=[e,r];E(i),h=Br(p,_,g,d),f=y}else if(y){var m=[],w=y[_].upsert(t,e,r,n,i,m);if(!z(i))return this;if(m[0]){if(p.length>=this.btreeOrder-1)return this.splitNode(_,w,m,o,t,d);h=Lr(p,_,m[0],d),(f=Lr(y,_+1,m[1],d))[_]=w}else h=p,f=Br(y,_,w,d)}else{var b=[e,r];if(E(i),E(n),p.length>=this.btreeOrder-1)return this.splitLeaf(_,b,o,t,d);h=Lr(p,_,b,d)}return this.makeNewNode(h,f,t,d)},S.prototype.fastRemove=function(t,e,r,n){var i,o,s=this.entries,a=O(k),u=Xr(this.comparator,s,e,a),c=z(a),h=this.nodes,f=t&&t===this.ownerID;if(c){if(s[u][1]===I)return this;E(n),E(r),i=Br(s,u,[e,I],f),o=h}else{if(!h)return this;var p=h[u].fastRemove(t,e,r,n);if(!z(n))return this;i=s,o=Br(h,u,p,f)}return this.makeNewNode(i,o,t,f)},S.prototype.remove=function(t,e,r,n,i,o,s){var a,u,c=this.entries,h=O(k),f=Xr(this.comparator,c,e,h),p=z(h),l=this.nodes,_=t&&t===this.ownerID;if(!p){if(l){var v=[void 0,void 0,void 0],y=l[f].remove(t,e,r,n,this,f,v);return z(n)?this.spliceNode(t,f,y,i,o,_,v,s):this}return this}if(l){if(c[f][1]===I)return this;E(n),E(r),a=Br(c,f,[e,I],_),u=l}else{if(c[f][1]===I)return this;if(E(n),E(r),c.length<=this.btreeNodeSplitSize&&i)return this.consolidateLeaf(t,f,i,o,_,s);a=Fr(c,f,_)}return this.makeNewNode(a,u,t,_)},S.prototype.makeNewNode=function(t,e,r,n){return 0===t.length?e?e[0]:void 0:n?(this.entries=t,this.nodes=e,this):new S(this.comparator,this.options,r,t,e)},S.prototype.print=function(t,e){function r(t){ai.stdout.write(t)}if(!(e&&e<=t)){var n=this.nodes,i=this.entries;if(n)for(var o=0;o<n.length;o++){var s=n[o];if(r(Pr(t)),s&&s instanceof v?(s.nodes?r("+ NODE["+o+"] (L"+t+")\n"):r("+ LEAF["+o+"] (L"+t+")\n"),s.print(t+1,e)):r("+ CORRUPT NODE["+o+"] (L"+t+") "+JSON.stringify(s)+"\n"),o<i.length){r(Pr(t));var a=i[o];a?a[1]===I?r("- REMOVED ENTRY["+o+"]: "+JSON.stringify(a[0])+"\n"):r("- ENTRY["+o+"]: "+JSON.stringify(a[0])+"\n"):r("- CORRUPT ENTRY["+o+"]: "+JSON.stringify(a)+"\n")}}else for(var u=0;u<i.length;u++){r(Pr(t));var c=i[u];c?c[1]===I?r("- REMOVED ENTRY["+u+"]: "+JSON.stringify(c[0])+"\n"):r("- ENTRY["+u+"]: "+JSON.stringify(c[0])+"\n"):r("- CORRUPT ENTRY["+u+"]: "+JSON.stringify(c)+"\n")}}},S.prototype.checkConsistency=function(n,r,t,e){function i(t){if(n){var e=t();void 0!==e&&(ai.stdout.write(Pr(r)),ai.stdout.write(e))}}function o(t,e){var r="Consistency Check Failed with error code "+t+": "+e;if(n)return i(function(){return r+"\n"}),t;throw new Error(r)}r||(r=0),t||(t=0),e||(e=[void 0]),this.nodes?i(function(){return"+ Checking NODE["+t+"] (L"+r+")\n"}):(i(function(){return"+ Checking LEAF["+t+"] (L"+r+")\n"}),void 0===e[0]?e[0]=r:e[0]!==r&&o(112,"leaves are not on the same level"));var s=this.entries,a=this.nodes;if(!s)return o(101,"empty entries in a node");if(!(0<s.length&&s.length<this.btreeOrder))return o(102,"entries length is out of range from 0 to (btreeOrder-1)");if(0<r&&!(this.btreeNodeSplitSize<=s.length))return o(103,"entries length is shorter than btreeNodeSplitSize");if(a&&a.length!==s.length+1)return o(104,"nodes length out of sync with entries length");for(var u=function(t){var e=s[t];return e?"object"==typeof e&&e instanceof Array?2!==e.length?{v:o(107,"entry is not Array[2]")}:void(e[1]===I?(i(function(){return"    - Checking REMOVED ENTRY["+t+"]: "+JSON.stringify(e[0])+"\n"}),a||o(113,"NOT_SET values are not allowed in leaves")):i(function(){return"    - Checking ENTRY["+t+"]: "+JSON.stringify(e[0])+"\n"})):{v:o(106,"entry is not Array")}:{v:o(105,"empty entry")}},c=0;c<s.length;c++){var h=u(c);if(h)return h.v}for(var f=0;f<s.length-1;f++)if(!(this.comparator(s[f][0],s[f+1][0])<0))return o(108,"the entries are not sorted");if(a)for(var p=0;p<a.length;p++){var l=a[p];if(!(l&&l instanceof v))return o(109,"empty or corrupt node");var _=l.checkConsistency(n,r+1,p,e);if(0!==_)return _;if(0<p&&!(this.comparator(s[p-1][0],l.firstKey())<0))return o(110,"the entry and right node not sorted");if(p<s.length&&!(this.comparator(l.lastKey(),s[p][0])<0))return o(111,"the entry and left node not sorted")}return 0},S}(Mr);qr.prototype.iterate=function(t,e){var r=this.entries,n=this.nodes;if(n){for(var i=0,o=r.length-1;i<=o;i++){if(!1===n[e?o+1-i:i].iterate(t,e))return!1;var s=r[e?o-i:i];if(s[1]!==I&&!1===t(s))return!1}if(!1===n[e?0:n.length-1].iterate(t,e))return!1}else for(var a=0,u=r.length-1;a<=u;a++){var c=r[e?u-a:a];if(c[1]!==I&&!1===t(c))return!1}return!0},qr.prototype.iterateFrom=function(e,r,t){var n=this;if(t)return this.iterate(function(t){return!(n.comparator(e,t[0])<=0)||r(t)},t);var i=this.entries,o=this.nodes,s=O(k),a=Xr(this.comparator,i,e,s);if(o){for(var u=a,c=i.length-1;u<=c;u++){var h=o[u];if(u!==a||z(s)){if(a<u&&!1===h.iterate(r,t))return!1}else if(!1===h.iterateFrom(e,r,t))return!1;var f=i[u];if(f[1]!==I&&!1===r(f))return!1}var p=o[o.length-1];if(a===o.length-1){if(!1===p.iterateFrom(e,r,t))return!1}else if(!1===p.iterate(r,t))return!1}else for(var l=a,_=i.length-1;l<=_;l++){var v=i[l];if(v[1]!==I&&!1===r(v))return!1}return!0},qr.prototype.iterateFromBackwards=function(e,r,t){var n=this;if(t)return this.iterate(function(t){return!(n.comparator(t[0],e)<=0)||r(t)},!1);var i=this.entries,o=this.nodes,s=O(k),a=Xr(this.comparator,i,e,s);if(o)for(var u=a;0<=u;u--){if(u<a||z(s)){var c=i[u];if(c[1]===I)continue;if(!1===r(c))return!1}var h=o[u];if(u!==a||z(s)){if(!1===h.iterate(r,!0))return!1}else if(!1===h.iterateFromBackwards(e,r,t))return!1}else for(var f=z(s)?a:a-1;0<=f;f--){var p=i[f];if(p[1]!==I&&!1===r(p))return!1}return!0};var jr=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Cr(t._root)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){for(var t=this,e=this._type,r=this._stack;r;){var n=r.node,i=r.index++;if(n.nodes){if(i<=n.entries.length+n.nodes.length-1){if(i%2==0){i/=2;var o=n.nodes[t._reverse?n.nodes.length-1-i:i];o&&(r=t._stack=Cr(o,r));continue}i=(i-1)/2;var s=n.entries[t._reverse?n.entries.length-1-i:i];if(s[1]===I)continue;return Rr(e,s)}}else{var a=n.entries.length-1;if(i<=a){var u=n.entries[t._reverse?a-i:i];if(u[1]===I)continue;return Rr(e,u)}}r=t._stack=t._stack.__prev}return{value:void 0,done:!0}},e}(X);function Rr(t,e){return W(t,e[0],e[1])}function Cr(t,e){return{node:t,index:0,__prev:e}}function Tr(t){return new Array(t)}var Ur=new Array(120).join(" ");function Pr(t){var e=4*t;return e>Ur.length&&(e=Ur.length),Ur.substring(0,e)}function Br(t,e,r,n){if(n)return t[e]=r,t;for(var i=t.length,o=Tr(i),s=0;s<e;s++)o[s]=t[s];o[e]=r;for(var a=e+1;a<i;a++)o[a]=t[a];return o}function Lr(t,e,r,n){var i=t.length+1;if(n){for(var o=i-1,s=e+1;s<=o;o--)t[o]=t[o-1];return t[e]=r,t}for(var a=Tr(i),u=0;u<e;u++)a[u]=t[u];a[e]=r;for(var c=e+1;c<i;c++)a[c]=t[c-1];return a}function Fr(t,e,r){var n=t.length-1;if(r){for(var i=e;i<n;i++)t[i]=t[i+1];return t.length=n,t}for(var o=Tr(n),s=0;s<e;s++)o[s]=t[s];for(var a=e;a<n;a++)o[a]=t[a+1];return o}function Kr(t,e,r,n){var i=t.length-r;if(n){for(var o=e;o<i;o++)t[o]=t[o+r];return t.length=i,t}for(var s=Tr(i),a=0;a<e;a++)s[a]=t[a];for(var u=e;u<i;u++)s[u]=t[u+r];return s}function Jr(t,e,r,n){var i,o=t.length-1+r;i=n?(t.length=o,t):Tr(o);for(var s=o-1,a=e+r;a<=s;s--)i[s]=t[s-r+1];for(var u=e+r-1;r<=u;u--)i[u]=t[u-r];return i}function Vr(t,e,r,n,i){var o=Fr(t,n,i);return e<n?o[e]=r:n<e&&(o[e-1]=r),o}function Xr(t,e,r,n){for(var i=0,o=e.length;0<o;){var s=Math.floor(o/2),a=t(r,e[i+s][0]);if(0===a)return E(n),i+s;0<a?(i+=s+1,o-=s+1):o=s}return i}qr.prototype.splitNode=function(t,e,r,n,i,o){var s,a,u=this.entries,c=this.nodes,h=this.btreeNodeSplitSize;if(t<h){var f=u.slice(h,u.length),p=c.slice(h,c.length),l=new qr(this.comparator,this.options,this.ownerID,f,p);if(n[0]=u[h-1],n[1]=l,o){u.length=h,c.length=h+1;for(var _=h-1;t+1<=_;_--)u[_]=u[_-1],c[_+1]=c[_];u[t]=r[0],c[t]=e,c[t+1]=r[1],s=u,a=c}else{s=Tr(h),a=Tr(h+1);for(var v=0;v<t;v++)s[v]=u[v],a[v]=c[v];s[t]=r[0],a[t]=e,a[t+1]=r[1];for(var y=t+1;y<h;y++)s[y]=u[y-1],a[y+1]=c[y]}}else if(t===h){var d=Tr(u.length-h),g=Tr(c.length-h);d[0]=u[h],g[0]=r[1];for(var m=1,w=d.length;m<w;m++)d[m]=u[h+m],g[m]=c[h+m];g[g.length-1]=c[c.length-1];var b=new qr(this.comparator,this.options,this.ownerID,d,g);if(n[0]=r[0],n[1]=b,o)u.length=h,c.length=h+1,c[t]=e,s=u,a=c;else{s=Tr(h),a=Tr(h+1);for(var S=0;S<h;S++)s[S]=u[S],a[S]=c[S];a[t]=e}}else{for(var I=Tr(u.length-h),k=Tr(c.length-h),O=h+1,E=t-O,z=0,N=E;z<N;z++)I[z]=u[O+z],k[z]=c[O+z];I[E]=r[0],k[E]=e,k[E+1]=r[1];for(var D=E+1,M=I.length;D<M;D++)I[D]=u[h+D],k[D+1]=c[h+D+1];var x=new qr(this.comparator,this.options,this.ownerID,I,k);n[0]=u[h],n[1]=x,a=o?(u.length=h,c.length=h+1,s=u,c):(s=u.slice(0,h),c.slice(0,h+1))}return this.makeNewNode(s,a,i,o)},qr.prototype.splitLeaf=function(t,e,r,n,i){var o,s=this.entries,a=this.btreeNodeSplitSize;if(t<a){var u=s.slice(a,s.length),c=new qr(this.comparator,this.options,this.ownerID,u);if(r[0]=s[a-1],r[1]=c,i){for(var h=(s.length=a)-1;t+1<=h;h--)s[h]=s[h-1];s[t]=e,o=s}else{o=Tr(a);for(var f=0;f<t;f++)o[f]=s[f];o[t]=e;for(var p=t+1;p<a;p++)o[p]=s[p-1]}}else if(t===a){var l=Tr(s.length-a);l[0]=s[a];for(var _=1,v=l.length;_<v;_++)l[_]=s[a+_];var y=new qr(this.comparator,this.options,this.ownerID,l);if(r[0]=e,r[1]=y,i)s.length=a,o=s;else{o=Tr(a);for(var d=0;d<a;d++)o[d]=s[d]}}else{for(var g=Tr(s.length-a),m=a+1,w=t-m,b=0,S=w;b<S;b++)g[b]=s[m+b];g[w]=e;for(var I=w+1,k=g.length;I<k;I++)g[I]=s[a+I];var O=new qr(this.comparator,this.options,this.ownerID,g);r[0]=s[a],r[1]=O,o=i?(s.length=a,s):s.slice(0,a)}return this.makeNewNode(o,void 0,n,i)},qr.prototype.spliceNode=function(t,e,r,n,i,o,s,a){var u,c,h=this.entries,f=this.nodes,p=s[0],l=s[1],_=s[2];if(l===I){if(h.length<=this.btreeNodeSplitSize&&n)return _?this.consolidateNode(t,e,r,e-1,e-1,n,i,o,a):this.consolidateNode(t,e,r,e,e+1,n,i,o,a);u=_?(c=Vr(f,e,r,e-1,o),Fr(h,e-1,o)):(c=Vr(f,e,r,e+1,o),Fr(h,e,o))}else c=Br(f,e,r,o),u=l?_?(c[e-1]=l,Br(h,e-1,p,o)):(c[e+1]=l,Br(h,e,p,o)):p?Br(h,e,p,o):h;return this.makeNewNode(u,c,t,o)},qr.prototype.consolidateNode=function(u,c,h,f,p,t,l,_,v){var e,r,n,i,y,d,g=this.entries,m=this.nodes,w=t.entries,o=t.nodes;if(0===l)r=e=i=o[l+1];else if(l===o.length-1)r=e=n=o[l-1];else{n=o[l-1],i=o[l+1];var s=(n.entries.length-this.btreeNodeSplitSize+1)/2;r=(i.entries.length-this.btreeNodeSplitSize+1)/2<=s?(e=n,i):(e=i,n)}function a(t,e,r){y=Jr(g,f,e,_),(d=Jr(m,p,e,_))[c<p?c+e:c+e-1]=h;var n,i=e-1;for(y[i]=w[l-1],d[i--]=t.nodes[t.nodes.length-1],n=t.entries.length-1;0<=i;i--,n--)y[i]=t.entries[n],d[i]=t.nodes[n];if(r)v[1]=I;else{v[0]=t.entries[n];var o=Kr(t.entries,t.entries.length-e,e,_),s=Kr(t.nodes,t.nodes.length-e,e,_);v[1]=t.makeNewNode(o,s,u,_)}v[2]=!0}function b(t,e,r){y=Fr(g,f,_),d=Fr(m,p,_);var n=y.length;y.length+=e,d.length+=e,d[c<p?c:c-1]=h,y[n++]=w[l],d[n]=t.nodes[0];for(var i=0,o=e-1;i<o;i++)y[n+i]=t.entries[i],d[n+i+1]=t.nodes[i+1];if(r)v[1]=I;else{v[0]=t.entries[e-1];var s=Kr(t.entries,0,e,_),a=Kr(t.nodes,0,e,_);v[1]=t.makeNewNode(s,a,u,_)}v[2]=!1}var S=Math.floor((e.entries.length-this.btreeNodeSplitSize+1)/2);return 0<S?e===n?a(e,S):b(e,S):r===n?a(r,r.entries.length+1,!0):b(r,r.entries.length+1,!0),this.makeNewNode(y,d,u,_)},qr.prototype.consolidateLeaf=function(a,u,t,e,c,h){var r,n,i,f,p=this.entries,o=t.entries,s=t.nodes;if(0===e)r=i=s[e+1];else if(e===s.length-1)r=n=s[e-1];else{n=s[e-1],i=s[e+1];var l=n.entries.length-this.btreeNodeSplitSize;r=i.entries.length-this.btreeNodeSplitSize<=l?n:i}function _(t,e,r){f=Jr(p,u,e,c);var n=e;d||(f[e-1]=y,n--);for(var i=0;i<n;i++)f[i]=t.entries[t.entries.length-n+i];if(r)h[1]=I;else{n++,h[0]=t.entries[t.entries.length-n];var o=Kr(t.entries,t.entries.length-n,n,c);h[1]=t.makeNewNode(o,void 0,a,c)}h[2]=!0}function v(t,e,r){var n=(f=Fr(p,u,c)).length;f.length+=e;var i=e;d||(f[n++]=y,i--);for(var o=0;o<i;o++)f[n+o]=t.entries[o];if(r)h[1]=I;else{h[0]=t.entries[i++];var s=Kr(t.entries,0,i,c);h[1]=t.makeNewNode(s,void 0,a,c)}h[2]=!1}var y=r===n?o[e-1]:o[e],d=y[1]===I,g=d?1:0,m=r.entries.length-this.btreeNodeSplitSize-g;if(0<m){var w=Math.floor((m+1)/2);r===n?_(r,w):v(r,w)}else{var b=r.entries.length+1-g;r===n?_(r,b,!0):v(r,b,!0)}return this.makeNewNode(f,void 0,a,c)};var Wr=function(t){function o(){t.apply(this,arguments)}return t&&(o.__proto__=t),((o.prototype=Object.create(t&&t.prototype)).constructor=o).prototype.calcPlanCnt=function(t,e){if(e<1||20<e)throw new Error("Height is out of supported limit");for(var r=t-1,n=1;n<e;n++)r=r*t+(t-1);return r},o.prototype.prepareCachedPlan=function(t,e){var r=t.toString()+" "+e.toString(),n=o.cache[r];if(n)return n;var i=this.preparePlan(t,e);return this.verifyPlan(i),t<100&&e<=100&&t<=e&&o.cacheSize<500&&(o.cache[r]=i,o.cacheSize++),i},o.prototype.preparePlan=function(t,e){for(var r,n=t-1,i=1,o=n;o<e;)o=(r=o)*t+n,i++;if(o===e)return{op:"build",full:!0,height:i,order:t,repeat:1,total:e};if(1===i)return{op:"build",full:!1,height:i,order:t,repeat:1,total:e};var s=r,a=1+Math.floor(e/(s+1));if(a<2)throw new Error("Something is wrong, the rootOrder is expected to be >= 2");if(a*s+(a-1)===e){var u=[],c=a*s+a-1;return u.push({op:"build",full:!0,height:i-1,order:t,repeat:a,total:c}),{op:"assemble",height:i,order:t,total:c,items:u}}var h=[];if(2<a){var f=a-2,p=f*s+f-1,l={op:"build",full:!0,height:i-1,order:t,repeat:f,total:p};h.push(l),e-=p,e--}e--;var _=Math.floor(e/2);0<e-_&&h.push(this.prepareCachedPlan(t,e-_)),0<_&&h.push(this.prepareCachedPlan(t,_));for(var v=0,y=h.length,d=0;d<y;d++)v+=h[d].total;return{op:"assemble",height:i,order:t,total:v+=h.length-1,items:h}},o.prototype.verifyPlan=function(t,e){function r(t){throw new Error(t)}if(void 0===e&&(e=0),"assemble"===t.op){for(var n=0,i=t.items.length,o=0;o<i;o++){var s=t.items[o];n+=s.total,"build"===s.op&&(s.order>=s.repeat||r("Plan verification test failed: pl.order >= pl.repeat: "+JSON.stringify(s))),t.height!==s.height+1&&r("Plan verification test failed: plan.height === pl.height+1"),this.verifyPlan(s,e+1)}n+=t.items.length-1,t.total!==n&&r("Count mismatch: "+t.total+" vs "+n)}else if("build"===t.op){var a=this.calcPlanCnt(t.order,t.height);if(t.full){var u=a*t.repeat+t.repeat-1;t.total!==u&&r("Plan verification test failed: plan.total === ec")}else{1!==t.height&&r("Plan verification test failed: expected height 1, got instead "+t.height),t.total<a||r("Plan verification test failed: plan.total < ec");var c=Math.floor((t.order-1)/2);0<e&&!(t.total>=c)&&r("Plan verification test failed: plan.total >= halfSize: "+t.total+", "+c)}}else r("Plan verification test failed: invalid op: "+t.op)},o.prototype.runPlan=function(t,e){if("assemble"===t.op)for(var r=t.items.length,n=0;n<r;n++)0<n&&this.populate(e,1),this.runPlan(t.items[n],e);else if("build"===t.op)for(var i=(t.total-t.repeat+1)/t.repeat,o=0;o<t.repeat;o++)0<o&&this.populate(e,1),this.populate(e,i);else!function(t){throw t="Packing Plan is corrupt: "+t,new Error(t)}("invalid op: "+t.op);this.flush(t.height)},o.prototype.flush=function(t){for(var e=this,r=0;r<t;r++){var n=r;e.stack[n]&&(e.prepareLevel(n+1),e.addNode(n+1,e.stack[n]),e.stack[n]=void 0)}this.stackLevel=t},o.prototype.populate=function(t,e){for(var r=this,n=0;n<e;n++){var i=t.next();if(r.entriesCnt++,i.done)throw new Error("unexpected end of iterator at "+r.entriesCnt+" vs "+t.size);var o=i.value,s=r.stackLevel;r.prepareLevel(s),r.addEntry(s,o),0<s?r.stackLevel=0:r.stackIndices[s]===r.order-1&&(r.prepareLevel(s+1),r.addNode(s+1,r.stack[s]),r.stack[s]=void 0,r.stackLevel++)}},o.prototype.addEntry=function(t,e){this.stack[t].entries[this.stackIndices[t]++]=e},o.prototype.addNode=function(t,e){this.stack[t].nodes[this.stackIndices[t]]=e,this.stackIndices[t]===this.order-1&&(this.prepareLevel(t+1),this.addNode(t+1,this.stack[t]),this.stack[t]=void 0,this.stackLevel++)},o.prototype.prepareLevel=function(t){if(!this.stack[t]){var e,r=Tr(this.order-1);(r.length=0)<t&&((e=Tr(this.order)).length=0),this.stack[t]=new qr(this.comparator,this.options,this.ownerID,r,e),this.stackIndices[t]=0}},o.prototype.finish=function(){var t=this.stackLevel;if(!(t>=this.stack.length))return this.stack[t].nodes[0]},o.prototype.pack=function(t,e,r,n){if(e&&e.type&&"btree"!==e.type)throw new Error("Unsuported type by btree factory: "+e.type);this.order=e&&e.btreeOrder?e.btreeOrder:33;var i=T(n);ie(i.size);var o=this.preparePlan(this.order,i.size);this.comparator=t,this.options=e,this.ownerID=r,this.stack=[],this.stackIndices=[],this.stackLevel=0,this.entriesCnt=0;var s=i.entries();if(this.runPlan(o,s),!s.next().done)throw new Error("iterator did not end when expected");return this.finish()},o}(xr);Wr.cache={},Wr.cacheSize=0;var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createNode=function(t,e,r,n,i){return new qr(t,e,r,n,i)},e.prototype.createPacker=function(){return new Wr},e.prototype.createIterator=function(t,e,r){return new jr(t,e,r)},e}(Ar),Yr=function(t){function n(e,t,r){return t||(this instanceof n&&(t=this.getComparator()),t||(t=n.defaultComparator)),r||(this instanceof n&&(r=this.getOptions()),r||(r=n.defaultOptions)),null==e?tn(t,r):Gr(e)&&e.getComparator()===t&&e.getOptions()===r?e:tn(t,r).withMutations(function(t){t.pack(e)})}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).of=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return tn().withMutations(function(t){for(var e=0;e<r.length;e+=2){if(e+1>=r.length)throw new Error("Missing value for key: "+r[e]);t.set(r[e],r[e+1])}})},n.prototype.toString=function(){return this.__toString("SortedMap {","}")},n.prototype.getComparator=function(){return this._comparator},n.prototype.getOptions=function(){return this._options},n.prototype.get=function(t,e){return this._root?this._root.get(t,e):e},n.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__altered=!0,this):tn(this._comparator,this._options)},n.prototype.pack=function(t){var e,r=this;if(void 0===t)e=this;else{var n=0,i=T(t).map(function(t,e){return[e,t,n++]}).valueSeq().toArray();if(0===i.length)return this.__ownerID?(this._root=void 0,this.size=0,this.__altered=!0,this):tn(this._comparator,this._options);i.sort(function(t,e){return r._comparator(t[0],e[0])||t[2]-e[2]});for(var o=[],s=0,a=i.length-1;s<a;s++){var u=i[s],c=i[s+1];if(r._comparator(u[0],c[0])<0){var h=[u[0],u[1]];o.push(h)}}var f=i[i.length-1],p=[f[0],f[1]];o.push(p),e=rt(o)}ie(e.size);var l=e.size,_=this._factory.createPacker().pack(this._comparator,this._options,this.__ownerID,e);return this.__ownerID?(this._root=_,this.size=l,this.__altered=!0,this):_?Zr(this._comparator,this._options,l,_):tn(this._comparator,this._options)},n.prototype.set=function(t,e){return en(this,t,e)},n.prototype.remove=function(t){return en(this,t,I)},n.prototype.fastRemove=function(t){return en(this,t,I,!0)},n.prototype.sort=function(t){return n(this,t,this.getOptions())},n.prototype.sortBy=function(t,e){return n(Jt(this,e,t),e,this.getOptions())},n.prototype.__iterator=function(t,e){return this._factory.createIterator(this,t,e)},n.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Zr(this._comparator,this._options,this.size,this._root,t):0===this.size?tn(this._comparator,this._options):(this.__ownerID=t,this.__altered=!1,this)},n.prototype.checkConsistency=function(t){var e=this;if(this._root)return 0<this.size?this._root.checkConsistency(t):1;if(0!==this.size)return 2;var r,n=0;return this.keySeq().forEach(function(t){if(n&&!(e._comparator(r,t)<0))return 3;r=t,n++}),this.size!==n?4:0},n.prototype.print=function(t){var e="SORTED MAP: size="+this.size;return this._options&&(e=e+", options="+JSON.stringify(this._options)),console.log(e),this._root&&this._root.print(1,t),this},n.prototype.from=function(i,o){var s=this,t=Object.create(rt).prototype;return t.__iterateUncached=function(e,t){var r=this;if(!s._root)return 0;var n=0;return o?s._root.iterateFromBackwards(i,function(t){return n++,e(t[1],t[0],r)},t):s._root.iterateFrom(i,function(t){return n++,e(t[1],t[0],r)},t),n},t},n}(Pe);function Gr(t){return Be(t)&&D(t)}Yr.isSortedMap=Gr,Yr.defaultComparator=function(t,e){if(yt(t,e))return 0;var r=typeof t,n=typeof e;if(r!==n)return r<n?-1:1;switch(r){case"undefined":break;case"object":if(null===t)return 1;if(null===e)return-1;t=t.toString(),e=e.toString();break;case"boolean":break;case"number":if(yt(t,NaN))return 1;if(yt(e,NaN))return-1;break;case"string":break;case"symbol":case"function":t=t.toString(),e=e.toString()}return t<e?-1:e<t?1:0},Yr.defaultOptions={type:"btree"};var $r,Qr=Yr.prototype;function Zr(t,e,r,n,i){var o=Object.create(Qr);if(o._comparator=t||Yr.defaultComparator,o._options=e||Yr.defaultOptions,o.size=r,o._root=n,o._factory=Yr.getFactory(o._options),o.__ownerID=i,o.__altered=!1,o._options.btreeOrder&&o._options.btreeOrder<3)throw new Error("SortedMap: minimum value of options.btreeOrder is 3, but got: "+o._options.btreeOrder);if(!o._factory)throw new Error("SortedMap type not supported: "+o._options.type);return o}function tn(t,e){return t===Yr.defaultComparator&&e===Yr.defaultOptions?$r||($r=Zr(Yr.defaultComparator,Yr.defaultOptions,0)):Zr(t,e,0)}function en(t,e,r,n){var i,o,s=r===I;if(t._root){var a=O(h),u=O(f);if(i=s?n?t._root.fastRemove(t.__ownerID,e,a,u):t._root.remove(t.__ownerID,e,a,u):t._root.upsert(t.__ownerID,e,r,a,u),!z(u))return t;0===(o=t.size+(z(a)?s?-1:1:0))&&(i=void 0)}else{if(s)return t;o=1;var c=[[e,r]];i=t._factory.createNode(t._comparator,t._options,t.__ownerID,c)}return t.__ownerID?(t.size=o,t._root=i,t.__altered=!0,t):i?Zr(t._comparator,t._options,o,i):tn(t._comparator,t._options)}Qr[R]=!0,Qr[e]=Qr.remove,Qr.removeIn=Qr.deleteIn,Qr.removeAll=Qr.deleteAll,Yr.getFactory=function(t){var e=t&&t.type?t.type:Yr.defaultOptions.type;return Yr.factories[e]},Yr.factories={btree:new Hr};var rn=function(o){function t(t){return null==t?cn():nn(t)?t:cn().pushAll(t)}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(t,e){var r=this._head;for(t=s(this,t);r&&t--;)r=r.next;return r?r.value:e},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;0<=n;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):un(e,r)},t.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;if(0===this.size&&nn(t))return t;ie(t.size);var e=this.size,r=this._head;return t.__iterate(function(t){e++,r={value:t,next:r}},!0),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):un(e,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):cn()},t.prototype.slice=function(t,e){if(p(t,e,this.size))return this;var r=l(t,this.size);if(_(e,this.size)!==this.size)return o.prototype.slice.call(this,t,e);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):un(n,i)},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?un(this.size,this._head,t,this.__hash):0===this.size?cn():(this.__ownerID=t,this.__altered=!1,this)},t.prototype.__iterate=function(r,t){var n=this;if(t)return new st(this.toArray()).__iterate(function(t,e){return r(t,e,n)},t);for(var e=0,i=this._head;i&&!1!==r(i.value,e++,n);)i=i.next;return e},t.prototype.__iterator=function(e,t){if(t)return new st(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new X(function(){if(n){var t=n.value;return n=n.next,W(e,r++,t)}return{value:void 0,done:!0}})},t}(U);function nn(t){return!(!t||!t[sn])}rn.isStack=nn;var on,sn="@@__IMMUTABLE_STACK__@@",an=rn.prototype;function un(t,e,r,n){var i=Object.create(an);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function cn(){return on||(on=un(0))}function hn(r,t){if(r===t)return!0;if(!y(t)||void 0!==r.size&&void 0!==t.size&&r.size!==t.size||void 0!==r.__hash&&void 0!==t.__hash&&r.__hash!==t.__hash||d(r)!==d(t)||S(r)!==S(t)||N(r)!==N(t)||D(r)!==D(t))return!1;if(0===r.size&&0===t.size)return!0;var n=!u(r);if(N(r)){var i=r.entries();return t.every(function(t,e){var r=i.next().value;return r&&yt(r[1],t)&&(n||yt(r[0],e))})&&i.next().done}var o=!1;if(void 0===r.size)if(void 0===t.size)"function"==typeof r.cacheResult&&r.cacheResult();else{o=!0;var e=r;r=t,t=e}var s=!0,a=t.__iterate(function(t,e){if(n?!r.has(t):o?!yt(t,r.get(e,I)):!yt(r.get(e,I),t))return s=!1});return s&&r.size===a}function fn(e,r){var t=function(t){e.prototype[t]=r[t]};return Object.keys(r).forEach(t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(t),e}function pn(t){return ae(t)?et(t).map(pn).toJSON():t}an[sn]=!0,an.shift=an.pop,an.unshift=an.push,an.unshiftAll=an.pushAll,an.withMutations=Re,an.wasAltered=Ue,an.asImmutable=Te,an["@@transducer/init"]=an.asMutable=Ce,an["@@transducer/step"]=function(t,e){return t.unshift(e)},an["@@transducer/result"]=function(t){return t.asImmutable()};var ln=function(n){function e(r){return null==r?wn():_n(r)&&!N(r)?r:wn().withMutations(function(e){var t=n(r);ie(t.size),t.forEach(function(t){return e.add(t)})})}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).of=function(){return this(arguments)},e.fromKeys=function(t){return this(T(t).keySeq())},e.intersect=function(t){return(t=C(t).toArray()).length?dn.intersect.apply(e(t.pop()),t):wn()},e.union=function(t){return(t=C(t).toArray()).length?dn.union.apply(e(t.pop()),t):wn()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return gn(this,this._map.set(t,t))},e.prototype.remove=function(t){return gn(this,this._map.remove(t))},e.prototype.clear=function(){return gn(this,this._map.clear())},e.prototype.union=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return 0===(r=r.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){for(var t=0;t<r.length;t++)n(r[t]).forEach(function(t){return e.add(t)})}):this.constructor(r[0])},e.prototype.intersect=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return n(t)});var r=[];return this.forEach(function(e){t.every(function(t){return t.includes(e)})||r.push(e)}),this.withMutations(function(e){r.forEach(function(t){e.remove(t)})})},e.prototype.subtract=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return n(t)});var r=[];return this.forEach(function(e){t.some(function(t){return t.includes(e)})&&r.push(e)}),this.withMutations(function(e){r.forEach(function(t){e.remove(t)})})},e.prototype.sort=function(t){return Kn(Jt(this,t))},e.prototype.sortBy=function(t,e){return Kn(Jt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t){return e(t,t,r)},t)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(P);function _n(t){return!(!t||!t[yn])}ln.isSet=_n;var vn,yn="@@__IMMUTABLE_SET__@@",dn=ln.prototype;function gn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function mn(t,e){var r=Object.create(dn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function wn(){return vn||(vn=mn(Ze()))}dn[yn]=!0,dn[e]=dn.remove,dn.merge=dn.concat=dn.union,dn.withMutations=Re,dn.asImmutable=Te,dn["@@transducer/init"]=dn.asMutable=Ce,dn["@@transducer/step"]=function(t,e){return t.add(e)},dn["@@transducer/result"]=function(t){return t.asImmutable()},dn.__empty=wn,dn.__make=mn;var bn=function(t){function n(e,t,r){return t||(this instanceof n&&(t=this._map&&this.getComparator()),t||(t=n.defaultComparator)),r||(this instanceof n&&(r=this._map&&this.getOptions()),r||(r=n.defaultOptions)),null==e?On(t,r):Sn(e)&&e.getComparator()===t&&e.getOptions()===r?e:On(t,r).withMutations(function(t){t.pack(e)})}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).of=function(){return this(arguments)},n.fromKeys=function(t){return this(T(t).keySeq())},n.prototype.toString=function(){return this.__toString("SortedSet {","}")},n.prototype.getComparator=function(){return this._map.getComparator()},n.prototype.getOptions=function(){return this._map.getOptions()},n.prototype.pack=function(t){var e=void 0===t?void 0:P(t).toKeyedSeq().mapKeys(function(t,e){return e});return function(t,e){if(t.__ownerID)return t.size=e.size,t._map=e,t;return e===t._map?t:0===e.size?t.__empty():t.__make(e)}(this,this._map.pack(e))},n.prototype.from=function(t,e){return this._map.from(t,e).toSetSeq()},n.prototype.sort=function(t){return n(this,t,this.getOptions())},n.prototype.sortBy=function(t,e){return n(Ut(this,t),e,this.getOptions())},n.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},n}(ln);function Sn(t){return _n(t)&&D(t)}bn.isSortedSet=Sn,bn.defaultComparator=Yr.defaultComparator,bn.defaultOptions=Yr.defaultOptions;var In=bn.prototype;function kn(t,e){var r=Object.create(In);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function On(t,e){return kn(tn(t,e))}In[R]=!0,In.__empty=function(){return On(this.getComparator(),this.getOptions())},In.__make=kn;var En,zn=function(t){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);if(ne(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(En)return En;En=this}}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},n.prototype.get=function(t,e){return this.has(t)?this._start+s(this,t)*this._step:e},n.prototype.includes=function(t){var e=(t-this._start)/this._step;return 0<=e&&e<this.size&&e===Math.floor(e)},n.prototype.slice=function(t,e){return p(t,e,this.size)?this:(t=l(t,this.size),(e=_(e,this.size))<=t?new n(0,0):new n(this.get(t,this._end),this.get(e,this._end),this._step))},n.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(0<=r&&r<this.size)return r}return-1},n.prototype.lastIndexOf=function(t){return this.indexOf(t)},n.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==t(i,e?r-++o:o++,this);)i+=e?-n:n;return o},n.prototype.__iterator=function(e,r){var n=this.size,i=this._step,o=r?this._start+(n-1)*i:this._start,s=0;return new X(function(){if(s===n)return{value:void 0,done:!0};var t=o;return o+=r?-i:i,W(e,r?n-++s:s++,t)})},n.prototype.equals=function(t){return t instanceof n?this._start===t._start&&this._end===t._end&&this._step===t._step:hn(this,t)},n}(nt);function Nn(t,e,r){for(var n=oe(e),i=0;i!==n.length;)if((t=he(t,n[i++],I))===I)return r;return t}function Dn(t,e){return Nn(this,t,e)}function Mn(t,e){return Nn(t,e,I)!==I}function xn(){ie(this.size);var r={};return this.__iterate(function(t,e){r[e]=t}),r}C.isIterable=y,C.isKeyed=d,C.isIndexed=S,C.isAssociative=u,C.isOrdered=N,C.Iterator=X,fn(C,{toArray:function(){ie(this.size);var r=new Array(this.size||0),n=d(this),i=0;return this.__iterate(function(t,e){r[i++]=n?[e,t]:t}),r},toIndexedSeq:function(){return new jt(this)},toJS:function(){return pn(this)},toKeyedSeq:function(){return new qt(this,!0)},toMap:function(){return Pe(this.toKeyedSeq())},toObject:xn,toOrderedMap:function(){return Or(this.toKeyedSeq())},toSortedMap:function(t,e){return Yr(this.toKeyedSeq(),t,e)},toSortedSet:function(t,e){return bn(d(this)?this.valueSeq():this,t,e)},toOrderedSet:function(){return Kn(d(this)?this.valueSeq():this)},toSet:function(){return ln(d(this)?this.valueSeq():this)},toSetSeq:function(){return new Rt(this)},toSeq:function(){return S(this)?this.toIndexedSeq():d(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return rn(d(this)?this.valueSeq():this)},toList:function(){return cr(d(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Gt(this,function(t,e){var r=d(t),n=[t].concat(e).map(function(t){return y(t)?r&&(t=T(t)):t=r?lt(t):_t(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===n.length)return t;if(1===n.length){var i=n[0];if(i===t||r&&d(i)||S(t)&&S(i))return i}var o=new st(n);return r?o=o.toKeyedSeq():S(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),o}(this,t))},includes:function(e){return this.some(function(t){return yt(t,e)})},entries:function(){return this.__iterator(F)},every:function(n,i){ie(this.size);var o=!0;return this.__iterate(function(t,e,r){if(!n.call(i,t,e,r))return o=!1}),o},filter:function(t,e){return Gt(this,Bt(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return ie(this.size),this.__iterate(e?t.bind(e):t)},join:function(e){ie(this.size),e=void 0!==e?""+e:",";var r="",n=!0;return this.__iterate(function(t){n?n=!1:r+=e,r+=null!=t?t.toString():""}),r},keys:function(){return this.__iterator(B)},map:function(t,e){return Gt(this,Ut(this,t,e))},reduce:function(t,e,r){return Rn(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return Rn(this,t,e,r,arguments.length<2,!0)},reverse:function(){return Gt(this,Pt(this,!0))},slice:function(t,e){return Gt(this,Lt(this,t,e,!0))},some:function(t,e){return!this.every(Un(t),e)},sort:function(t){return Gt(this,Jt(this,t))},partialSort:function(t,e){return Gt(this,Vt(this,t,e))},incSort:function(t){return Gt(this,Xt(this,t,null,!0))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return c(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return r=this,n=t,i=e,o=Pe().asMutable(),r.__iterate(function(t,e){o.update(n.call(i,t,e,r),0,function(t){return t+1})}),o.asImmutable();var r,n,i,o},equals:function(t){return hn(this,t)},entrySeq:function(){var t=this;if(t._cache)return new st(t._cache);var e=t.toSeq().map(Tn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Un(t),e)},findEntry:function(n,i,t){var o=t;return this.__iterate(function(t,e,r){if(n.call(i,t,e,r))return!(o=[e,t])}),o},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(r)},flatMap:function(t,e){return Gt(this,(n=t,i=e,o=Qt(r=this),r.toSeq().map(function(t,e){return o(n.call(i,t,e,r))}).flatten(!0)));var r,n,i,o},flatten:function(t){return Gt(this,Kt(this,t,!0))},fromEntrySeq:function(){return new Ct(this)},get:function(r,t){return this.find(function(t,e){return yt(e,r)},void 0,t)},getIn:Dn,groupBy:function(t,e){return function(n,t,i){var o=d(n),s=(N(n)?Or():Pe()).asMutable();n.__iterate(function(e,r){s.update(t.call(i,e,r,n),function(t){return(t=t||[]).push(o?[r,e]:e),t})});var e=Qt(n);return s.map(function(t){return Gt(n,e(t))})}(this,t,e)},has:function(t){return this.get(t,I)!==I},hasIn:function(t){return Mn(this,t)},isSubset:function(e){return e="function"==typeof e.includes?e:C(e),this.every(function(t){return e.includes(t)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:C(t)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return yt(t,e)})},keySeq:function(){return this.toSeq().map(Cn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Wt(this,t)},maxBy:function(t,e){return Wt(this,e,t)},min:function(t){return Wt(this,t?Pn(t):Ln)},minBy:function(t,e){return Wt(this,e?Pn(e):Ln,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Gt(this,Ft(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Un(t),e)},sortBy:function(t,e){return Gt(this,Jt(this,e,t))},partialSortBy:function(t,e,r){return Gt(this,Vt(this,t,r,e))},incSortBy:function(t,e){return Gt(this,Xt(this,e,t,!0))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Gt(this,(u=t,c=e,(n=Zt(r=this)).__iterateUncached=function(n,t){var i=this;if(t)return this.cacheResult().__iterate(n,t);var o=0;return r.__iterate(function(t,e,r){return u.call(c,t,e,r)&&++o&&n(t,e,i)}),o},n.__iteratorUncached=function(i,t){var o=this;if(t)return this.cacheResult().__iterator(i,t);var s=r.__iterator(F,t),a=!0;return new X(function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var e=t.value,r=e[0],n=e[1];return u.call(c,n,r,o)?i===F?t:W(i,r,n,t):{value:void 0,done:!(a=!1)}})},n));var r,u,c,n},takeUntil:function(t,e){return this.takeWhile(Un(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=N(t),r=d(t),n=e?1:0;return i=t.__iterate(r?e?function(t,e){n=31*n+Fn(mt(t),mt(e))|0}:function(t,e){n=n+Fn(mt(t),mt(e))|0}:e?function(t){n=31*n+mt(t)|0}:function(t){n=n+mt(t)|0}),o=n,o=dt(o,3432918353),o=dt(o<<15|o>>>-15,461845907),o=dt(o<<13|o>>>-13,5),o=dt((o=(o+3864292196|0)^i)^o>>>16,2246822507),o=gt((o=dt(o^o>>>13,3266489909))^o>>>16);var i,o}(this))}});var An=C.prototype;An[M]=!0,An[V]=An.values,An.toJSON=An.toArray,An.__toStringMapper=ue,An.inspect=An.toSource=function(){return this.toString()},An.chain=An.flatMap,An.contains=An.includes,fn(T,{flip:function(){return Gt(this,Tt(this))},mapEntries:function(r,n){var i=this,o=0;return Gt(this,this.toSeq().map(function(t,e){return r.call(n,[e,t],o++,i)}).fromEntrySeq())},mapKeys:function(r,n){var i=this;return Gt(this,this.toSeq().flip().map(function(t,e){return r.call(n,t,e,i)}).flip())}});var qn=T.prototype;qn[x]=!0,qn[V]=An.entries,qn.toJSON=xn,qn.__toStringMapper=function(t,e){return ue(e)+": "+ue(t)},fn(U,{toKeyedSeq:function(){return new qt(this,!1)},filter:function(t,e){return Gt(this,Bt(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Gt(this,Pt(this,!1))},slice:function(t,e){return Gt(this,Lt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=l(t,t<0?this.count():this.size);var n=this.slice(0,t);return Gt(this,1===r?n:n.concat(re(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Gt(this,Kt(this,t,!1))},get:function(r,t){return(r=s(this,r))<0||this.size===1/0||void 0!==this.size&&r>this.size?t:this.find(function(t,e){return e===r},void 0,t)},has:function(t){return 0<=(t=s(this,t))&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Gt(this,(s=t,(e=Zt(o=this)).size=o.size&&2*o.size-1,e.__iterateUncached=function(e,t){var r=this,n=0;return o.__iterate(function(t){return(!n||!1!==e(s,n++,r))&&!1!==e(t,n++,r)},t),n},e.__iteratorUncached=function(t,e){var r,n=o.__iterator(L,e),i=0;return new X(function(){return(!r||i%2)&&(r=n.next()).done?r:i%2?W(t,i++,s):W(t,i++,r.value,r)})},e));var o,s,e},interleave:function(){var t=[this].concat(re(arguments)),e=Yt(this.toSeq(),nt.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Gt(this,r)},keySeq:function(){return zn(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Gt(this,Ft(this,t,e,!1))},incSort:function(t){return Gt(this,Xt(this,t,null,!1))},incSortBy:function(t,e){return Gt(this,Xt(this,e,t,!1))},zip:function(){return Gt(this,Yt(this,Bn,[this].concat(re(arguments))))},zipAll:function(){return Gt(this,Yt(this,Bn,[this].concat(re(arguments)),!0))},zipWith:function(t){var e=re(arguments);return Gt(e[0]=this,Yt(this,t,e))}});var jn=U.prototype;function Rn(t,n,i,o,s,e){return ie(t.size),t.__iterate(function(t,e,r){i=s?(s=!1,t):n.call(o,i,t,e,r)},e),i}function Cn(t,e){return e}function Tn(t,e){return[e,t]}function Un(t){return function(){return!t.apply(this,arguments)}}function Pn(t){return function(){return-t.apply(this,arguments)}}function Bn(){return re(arguments)}function Ln(t,e){return t<e?1:e<t?-1:0}function Fn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}jn[A]=!0,jn[q]=!0,fn(P,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),P.prototype.has=An.includes,P.prototype.contains=P.prototype.includes,fn(rt,T.prototype),fn(nt,U.prototype),fn(it,P.prototype);var Kn=function(t){function e(r){return null==r?Hn():Jn(r)?r:Hn().withMutations(function(e){var t=P(r);ie(t.size),t.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return this(arguments)},e.fromKeys=function(t){return this(T(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(ln);function Jn(t){return _n(t)&&N(t)}Kn.isOrderedSet=Jn;var Vn,Xn=Kn.prototype;function Wn(t,e){var r=Object.create(Xn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Hn(){return Vn||(Vn=Wn(Nr()))}Xn[q]=!0,Xn.zip=jn.zip,Xn.zipWith=jn.zipWith,Xn.__empty=Hn,Xn.__make=Wn;var Yn=function(s,a){var u,c=function(t){var n=this;if(t instanceof c)return t;if(!(this instanceof c))return new c(t);if(!u){u=!0;var e=Object.keys(s),r=h._indices={};h._name=a,h._keys=e,h._defaultValues=s;for(var i=0;i<e.length;i++){var o=e[i];r[o]=i,h[o]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+Qn(n)+' with property "'+o+'" since that property name is part of the Record API.'):ti(h,o)}}this.__ownerID=void 0,this._values=cr().withMutations(function(r){r.setSize(n._keys.length),T(t).forEach(function(t,e){r.set(n._indices[e],t===n._defaultValues[e]?void 0:t)})})},h=c.prototype=Object.create(Gn);return h.constructor=c};Yn.prototype.toString=function(){for(var t,e=Qn(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)e+=(n?", ":"")+(t=r[n])+": "+ue(this.get(t));return e+" }"},Yn.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&Zn(this).equals(Zn(t))},Yn.prototype.hashCode=function(){return Zn(this).hashCode()},Yn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},Yn.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},Yn.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return $n(this,r)}return this},Yn.prototype.remove=function(t){return this.set(t)},Yn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:$n(this,t)},Yn.prototype.wasAltered=function(){return this._values.wasAltered()},Yn.prototype.toSeq=function(){return Zn(this)},Yn.prototype.toJS=function(){return pn(this)},Yn.prototype.entries=function(){return this.__iterator(F)},Yn.prototype.__iterator=function(t,e){return Zn(this).__iterator(t,e)},Yn.prototype.__iterate=function(t,e){return Zn(this).__iterate(t,e)},Yn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?$n(this,e,t):(this.__ownerID=t,this._values=e,this)},Yn.isRecord=o,Yn.getDescriptiveName=Qn;var Gn=Yn.prototype;function $n(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function Qn(t){return t._name||t.constructor.name||"Record"}function Zn(e){return lt(e._keys.map(function(t){return[t,e.get(t)]}))}function ti(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){ne(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}Gn[j]=!0,Gn[e]=Gn.remove,Gn.deleteIn=Gn.removeIn=ge,Gn.getIn=Dn,Gn.hasIn=An.hasIn,Gn.merge=Se,Gn.mergeWith=Ie,Gn.mergeIn=qe,Gn.mergeDeep=xe,Gn.mergeDeepWith=Ae,Gn.mergeDeepIn=je,Gn.setIn=ye,Gn.update=we,Gn.updateIn=be,Gn.withMutations=Re,Gn.asMutable=Ce,Gn.asImmutable=Te,Gn[V]=Gn.entries,Gn.toJSON=Gn.toObject=An.toObject,Gn.inspect=Gn.toSource=function(){return this.toString()};var ei,ri=function(t){function n(t,e){if(!(this instanceof n))return new n(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(ei)return ei;ei=this}}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},n.prototype.get=function(t,e){return this.has(t)?this._value:e},n.prototype.includes=function(t){return yt(this._value,t)},n.prototype.slice=function(t,e){var r=this.size;return p(t,e,r)?this:new n(this._value,_(e,r)-l(t,r))},n.prototype.reverse=function(){return this},n.prototype.indexOf=function(t){return yt(this._value,t)?0:-1},n.prototype.lastIndexOf=function(t){return yt(this._value,t)?this.size:-1},n.prototype.__iterate=function(t,e){for(var r=this.size,n=0;n!==r&&!1!==t(this._value,e?r-++n:n++,this););return n},n.prototype.__iterator=function(t,e){var r=this,n=this.size,i=0;return new X(function(){return i===n?{value:void 0,done:!0}:W(t,e?n-++i:i++,r._value)})},n.prototype.equals=function(t){return t instanceof n?yt(this._value,t._value):hn(t)},n}(nt);function ni(t,e){return function r(n,i,o,t,s,e){var a=Array.isArray(o)?nt:se(o)?rt:null;if(a){if(~n.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");n.push(o),s&&""!==t&&s.push(t);var u=i.call(e,t,a(o).map(function(t,e){return r(n,i,t,e,s,o)}),s&&s.slice());return n.pop(),s&&s.pop(),u}return o}([],e||ii,t,"",e&&2<e.length?[]:void 0,{"":t})}function ii(t,e){return d(e)?e.toMap():e.toList()}var oi={version:"0.2.6",Collection:C,Iterable:C,Seq:et,Map:Pe,OrderedMap:Or,SortedMap:Yr,List:cr,Stack:rn,Set:ln,OrderedSet:Kn,SortedSet:bn,Record:Yn,Range:zn,Repeat:ri,is:yt,fromJS:ni,hash:mt,isImmutable:v,isCollection:y,isKeyed:d,isIndexed:S,isAssociative:u,isOrdered:N,isSorted:D,isValueObject:a,get:he,getIn:Nn,has:ce,hasIn:Mn,merge:Oe,mergeDeep:ze,mergeWith:Ee,mergeDeepWith:Ne,remove:pe,removeIn:de,set:le,setIn:ve,update:me,updateIn:_e},si=C;t.default=oi,t.version="0.2.6",t.Collection=C,t.Iterable=si,t.Seq=et,t.Map=Pe,t.OrderedMap=Or,t.SortedMap=Yr,t.List=cr,t.Stack=rn,t.Set=ln,t.OrderedSet=Kn,t.SortedSet=bn,t.Record=Yn,t.Range=zn,t.Repeat=ri,t.is=yt,t.fromJS=ni,t.hash=mt,t.isImmutable=v,t.isCollection=y,t.isKeyed=d,t.isIndexed=S,t.isAssociative=u,t.isOrdered=N,t.isSorted=D,t.isValueObject=a,t.get=he,t.getIn=Nn,t.has=ce,t.hasIn=Mn,t.merge=Oe,t.mergeDeep=ze,t.mergeWith=Ee,t.mergeDeepWith=Ne,t.remove=pe,t.removeIn=de,t.set=le,t.setIn=ve,t.update=me,t.updateIn=_e,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==r?e(n):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Immutable={})}).call(this,t("_process"))},{_process:12}],12:[function(t,e,r){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,h=[],f=!1,p=-1;function l(){f&&c&&(f=!1,c.length?h=c.concat(h):p=-1,h.length&&_())}function _(){if(!f){var t=u(l);f=!0;for(var e=h.length;e;){for(c=h,h=[];++p<e;)c&&c[p].run();p=-1,e=h.length}c=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new v(t,e)),1!==h.length||f||u(_)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();t("immutable-sorted");var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.recipe=t}return n(e,[{key:"process",value:function(t,e){return this.recipe(t.toKeyedSeq(),e)}}]),e}();r.default=i},{"immutable-sorted":15}],14:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Seqen=void 0;var n,i=t("./Seqen"),o=(n=i)&&n.__esModule?n:{default:n};r.Seqen=o.default,r.default={Seqen:o.default}},{"./Seqen":13}],15:[function(t,r,n){(function(kn){var t,e;t=this,e=function(t){"use strict";var e="delete",m=5,g=1<<m,w=g-1,I={},h={value:!1},f={value:!1},k={value:!1};function O(t){return t.value=!1,t}function E(t){t&&(t.value=!0)}function z(t){return t.value}function b(){}function _(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function c(t){return void 0===t.size&&(t.size=t.__iterate(r)),t.size}function s(t,e){if("number"!=typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?c(t)+e:e}function r(){return!0}function p(t,e,r){return(0===t||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&r<=e)}function l(t,e){return n(t,e,0)}function v(t,e){return n(t,e,e)}function n(t,e,r){return void 0===t?r:t<0?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function i(t){return(y(t)||o(t))&&!t.__ownerID}function y(t){return!(!t||!t[M])}function u(t){return!(!t||!t[x])}function d(t){return!(!t||!t[A])}function S(t){return u(t)||d(t)}function N(t){return!(!t||!t[q])}function o(t){return!(!t||!t[j])}function a(t){return!(!t||"function"!=typeof t.equals||"function"!=typeof t.hashCode)}function D(t){return!(!t||!t[R])}var M="@@__IMMUTABLE_ITERABLE__@@",x="@@__IMMUTABLE_KEYED__@@",A="@@__IMMUTABLE_INDEXED__@@",q="@@__IMMUTABLE_ORDERED__@@",j="@@__IMMUTABLE_RECORD__@@",R="@@__IMMUTABLE_SORTED__@@",C=function(t){return y(t)?t:tt(t)},T=function(t){function e(t){return u(t)?t:et(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(C),U=function(t){function e(t){return d(t)?t:rt(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(C),P=function(t){function e(t){return y(t)&&!S(t)?t:nt(t)}return e.__proto__=t,(e.prototype=Object.create(t.prototype)).constructor=e}(C);C.Keyed=T,C.Indexed=U,C.Set=P;var B=0,L=1,F=2,K="function"==typeof Symbol&&Symbol.iterator,J="@@iterator",V=K||J,X=function(t){this.next=t};function W(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function H(){return{value:void 0,done:!0}}function Y(t){return!!Q(t)}function G(t){return t&&"function"==typeof t.next}function $(t){var e=Q(t);return e&&e.call(t)}function Q(t){var e=t&&(K&&t[K]||t[J]);if("function"==typeof e)return e}function Z(t){return t&&"number"==typeof t.length}X.prototype.toString=function(){return"[Iterator]"},X.KEYS=B,X.VALUES=L,X.ENTRIES=F,X.prototype.inspect=X.prototype.toSource=function(){return this.toString()},X.prototype[V]=function(){return this};var tt=function(t){function e(t){return null==t?ft():y(t)||o(t)?t.toSeq():function(t){var e=_t(t);if(e)return e;if("object"!=typeof t)throw new TypeError("Expected Array or collection object of values, or keyed object: "+t);return new st(t)}(t)}return e.__proto__=t,((e.prototype=Object.create(t.prototype)).constructor=e).of=function(){return e(arguments)},e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[e?n-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(e,r){var n=this._cache;if(n){var i=n.length,o=0;return new X(function(){if(o===i)return{value:void 0,done:!0};var t=n[r?i-++o:o++];return W(e,t[0],t[1])})}return this.__iteratorUncached(e,r)},e}(C),et=function(t){function e(t){return null==t?ft().toKeyedSeq():y(t)?u(t)?t.toSeq():t.fromEntrySeq():o(t)?t.toSeq():pt(t)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.toKeyedSeq=function(){return this},e}(tt),rt=function(t){function e(t){return null==t?ft():y(t)?u(t)?t.entrySeq():t.toIndexedSeq():o(t)?t.toSeq().entrySeq():lt(t)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(tt),nt=function(t){function e(t){return(y(t)&&!S(t)?t:rt(t)).toSetSeq()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(tt);tt.isSeq=ht,tt.Keyed=et,tt.Set=nt,tt.Indexed=rt;var it="@@__IMMUTABLE_SEQ__@@";tt.prototype[it]=!0;var ot=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return this.has(t)?this._array[s(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,i=0;i!==n;){var o=e?n-++i:i++;if(!1===t(r[o],o,this))break}return i},e.prototype.__iterator=function(e,r){var n=this._array,i=n.length,o=0;return new X(function(){if(o===i)return{value:void 0,done:!0};var t=r?i-++o:o++;return W(e,t,n[t])})},e}(rt),st=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return this._object.hasOwnProperty(t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var s=n[e?i-++o:o++];if(!1===t(r[s],s,this))break}return o},e.prototype.__iterator=function(e,r){var n=this._object,i=this._keys,o=i.length,s=0;return new X(function(){if(s===o)return{value:void 0,done:!0};var t=i[r?o-++s:s++];return W(e,t,n[t])})},e}(et);st.prototype[q]=!0;var at,ut=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=$(this._collection),n=0;if(G(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},e.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=$(this._collection);if(!G(r))return new X(H);var n=0;return new X(function(){var t=r.next();return t.done?t:W(e,n++,t.value)})},e}(rt),ct=function(t){function e(t){this._iterator=t,this._iteratorCache=[]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var r,n=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(r=n.next()).done;){var s=r.value;if(!1===t(i[o]=s,o++,this))break}return o},e.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,i=0;return new X(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value}return W(e,i,n[i++])})},e}(rt);function ht(t){return!(!t||!t[it])}function ft(){return at||(at=new ot([]))}function pt(t){var e=Array.isArray(t)?new ot(t):G(t)?new ct(t):Y(t)?new ut(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new st(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function lt(t){var e=_t(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function _t(t){return Z(t)?new ot(t):G(t)?new ct(t):Y(t)?new ut(t):void 0}function vt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(a(t)&&a(e)&&t.equals(e))}function yt(t,e){return function r(n,i,o,t,s,e){var a=Array.isArray(o)?rt:(u=o,!u||u.constructor!==Object&&void 0!==u.constructor?null:et);var u;if(a){if(~n.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");n.push(o),s&&""!==t&&s.push(t);var c=i.call(e,t,a(o).map(function(t,e){return r(n,i,t,e,s,o)}),s&&s.slice());return n.pop(),s&&s.pop(),c}return o}([],e||dt,t,"",e&&2<e.length?[]:void 0,{"":t})}function dt(t,e){return u(e)?e.toMap():e.toList()}var gt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function mt(t){return t>>>1&1073741824|3221225471&t}function wt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);4294967295<t;)r^=t/=4294967295;return mt(r)}if("string"===e)return t.length>Nt?function(t){var e=xt[t];void 0===e&&(e=bt(t),Mt===Dt&&(Mt=0,xt={}),Mt++,xt[t]=e);return e}(t):bt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(Ot&&void 0!==(e=kt.get(t)))return e;if(void 0!==(e=t[zt]))return e;if(!It){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[zt]))return e;if(void 0!==(e=function(t){if(t&&0<t.nodeType)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++Et,1073741824&Et&&(Et=0);if(Ot)kt.set(t,e);else{if(void 0!==St&&!1===St(t))throw new Error("Non-extensible objects are not allowed as keys.");if(It)Object.defineProperty(t,zt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[zt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[zt]=e}}return e}(t);if("function"==typeof t.toString)return bt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function bt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return mt(e)}var St=Object.isExtensible,It=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var kt,Ot="function"==typeof WeakMap;Ot&&(kt=new WeakMap);var Et=0,zt="__immutablehash__";"function"==typeof Symbol&&(zt=Symbol(zt));var Nt=16,Dt=255,Mt=0,xt={},At=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Ut(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=Tt(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(r,t){var n=this;return this._iter.__iterate(function(t,e){return r(t,e,n)},t)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(et);At.prototype[q]=!0;var qt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(e,r){var n=this,i=0;return r&&c(this),this._iter.__iterate(function(t){return e(t,r?n.size-++i:i++,n)},r)},e.prototype.__iterator=function(e,r){var n=this,i=this._iter.__iterator(L,r),o=0;return r&&c(this),new X(function(){var t=i.next();return t.done?t:W(e,r?n.size-++o:o++,t.value,t)})},e}(rt),jt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},e.prototype.__iterator=function(e,t){var r=this._iter.__iterator(L,t);return new X(function(){var t=r.next();return t.done?t:W(e,t.value,t.value,t)})},e}(nt),Rt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(r,t){var n=this;return this._iter.__iterate(function(t){if(t){Ht(t);var e=y(t);return r(e?t.get(1):t[1],e?t.get(0):t[0],n)}},t)},e.prototype.__iterator=function(n,t){var i=this._iter.__iterator(L,t);return new X(function(){for(;;){var t=i.next();if(t.done)return t;var e=t.value;if(e){Ht(e);var r=y(e);return W(n,r?e.get(0):e[0],r?e.get(1):e[1],t)}}})},e}(et);function Ct(i){var t=Gt(i);return t._iter=i,t.size=i.size,t.flip=function(){return i},t.reverse=function(){var t=i.reverse.apply(this);return t.flip=function(){return i.reverse()},t},t.has=function(t){return i.includes(t)},t.includes=function(t){return i.has(t)},t.cacheResult=$t,t.__iterateUncached=function(r,t){var n=this;return i.__iterate(function(t,e){return!1!==r(e,t,n)},t)},t.__iteratorUncached=function(t,e){if(t!==F)return i.__iterator(t===L?B:L,e);var r=i.__iterator(t,e);return new X(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})},t}function Tt(o,s,a){var t=Gt(o);return t.size=o.size,t.has=function(t){return o.has(t)},t.get=function(t,e){var r=o.get(t,I);return r===I?e:s.call(a,r,t,o)},t.__iterateUncached=function(n,t){var i=this;return o.__iterate(function(t,e,r){return!1!==n(s.call(a,t,e,r),e,i)},t)},t.__iteratorUncached=function(n,t){var i=o.__iterator(F,t);return new X(function(){var t=i.next();if(t.done)return t;var e=t.value,r=e[0];return W(n,r,s.call(a,e[1],r,o),t)})},t}function Ut(s,a){var u=this,t=Gt(s);return t._iter=s,t.size=s.size,t.reverse=function(){return s},s.flip&&(t.flip=function(){var t=Ct(s);return t.reverse=function(){return s.flip()},t}),t.get=function(t,e){return s.get(a?t:-1-t,e)},t.has=function(t){return s.has(a?t:-1-t)},t.includes=function(t){return s.includes(t)},t.cacheResult=$t,t.__iterate=function(r,n){var i=this,o=0;return n&&c(s),s.__iterate(function(t,e){return r(t,a?e:n?i.size-++o:o++,i)},!n)},t.__iterator=function(r,n){var i=0;n&&c(s);var o=s.__iterator(F,!n);return new X(function(){var t=o.next();if(t.done)return t;var e=t.value;return W(r,a?e[0]:n?u.size-++i:i++,e[1],t)})},t}function Pt(a,u,c,h){var t=Gt(a);return h&&(t.has=function(t){var e=a.get(t,I);return e!==I&&!!u.call(c,e,t,a)},t.get=function(t,e){var r=a.get(t,I);return r!==I&&u.call(c,r,t,a)?r:e}),t.__iterateUncached=function(n,t){var i=this,o=0;return a.__iterate(function(t,e,r){if(u.call(c,t,e,r))return o++,n(t,h?e:o-1,i)},t),o},t.__iteratorUncached=function(i,t){var o=a.__iterator(F,t),s=0;return new X(function(){for(;;){var t=o.next();if(t.done)return t;var e=t.value,r=e[0],n=e[1];if(u.call(c,n,r,a))return W(i,h?r:s++,n,t)}})},t}function Bt(a,t,e,u){var r=a.size;if(p(t,e,r))return a;var c=l(t,r),n=v(e,r);if(c!=c||n!=n)return Bt(a.toSeq().cacheResult(),t,e,u);var h,i=n-c;i==i&&(h=i<0?0:i);var o=Gt(a);return o.size=0===h?h:a.size&&h||void 0,!u&&ht(a)&&0<=h&&(o.get=function(t,e){return 0<=(t=s(this,t))&&t<h?a.get(t+c,e):e}),o.__iterateUncached=function(r,t){var n=this;if(0===h)return 0;if(t)return this.cacheResult().__iterate(r,t);var i=0,o=!0,s=0;return a.__iterate(function(t,e){if(!o||!(o=i++<c))return s++,!1!==r(t,u?e:s-1,n)&&s!==h}),s},o.__iteratorUncached=function(e,t){if(0!==h&&t)return this.cacheResult().__iterator(e,t);var r=0!==h&&a.__iterator(e,t),n=0,i=0;return new X(function(){for(;n++<c;)r.next();if(++i>h)return{value:void 0,done:!0};var t=r.next();return u||e===L?t:W(e,i-1,e===B?void 0:t.value[1],t)})},o}function Lt(e,c,h,f){var t=Gt(e);return t.__iterateUncached=function(n,t){var i=this;if(t)return this.cacheResult().__iterate(n,t);var o=!0,s=0;return e.__iterate(function(t,e,r){if(!o||!(o=c.call(h,t,e,r)))return s++,n(t,f?e:s-1,i)}),s},t.__iteratorUncached=function(i,t){var o=this;if(t)return this.cacheResult().__iterator(i,t);var s=e.__iterator(F,t),a=!0,u=0;return new X(function(){var t,e,r;do{if((t=s.next()).done)return f||i===L?t:W(i,u++,i===B?void 0:t.value[1],t);var n=t.value;e=n[0],r=n[1],a&&(a=c.call(h,r,e,o))}while(a);return i===F?t:W(i,e,r,t)})},t}function Ft(t,a,u){var c=Gt(t);return c.__iterateUncached=function(i,e){if(e)return this.cacheResult().__iterate(i,e);var o=0,s=!1;return function r(t,n){t.__iterate(function(t,e){return(!a||n<a)&&y(t)?r(t,n+1):(o++,!1===i(t,u?e:o-1,c)&&(s=!0)),!s},e)}(t,0),o},c.__iteratorUncached=function(r,n){if(n)return this.cacheResult().__iterator(r,n);var i=t.__iterator(r,n),o=[],s=0;return new X(function(){for(;i;){var t=i.next();if(!1===t.done){var e=t.value;if(r===F&&(e=e[1]),a&&!(o.length<a)||!y(e))return u?t:W(r,s++,e,t);o.push(i),i=e.__iterator(r,n)}else i=o.pop()}return{value:void 0,done:!0}})},c}function Kt(r,n,i){n||(n=Qt);var t=u(r),o=0,s=r.toSeq().map(function(t,e){return[e,t,o++,i?i(t,e,r):t]}).toArray();return s.sort(function(t,e){return n(t[3],e[3])||t[2]-e[2]}).forEach(t?function(t,e){s[e].length=2}:function(t,e){s[e]=t[1]}),t?et(s):d(r)?rt(s):nt(s)}function Jt(r,n,i){if(n||(n=Qt),i){var t=r.toSeq().map(function(t,e){return[t,i(t,e,r)]}).reduce(function(t,e){return Vt(n,t[1],e[1])?e:t});return t&&t[0]}return r.reduce(function(t,e){return Vt(n,t,e)?e:t})}function Vt(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(null==r||r!=r)||0<n}function Xt(t,s,a){var e=Gt(t);return e.size=new ot(a).map(function(t){return t.size}).min(),e.__iterate=function(t,e){for(var r,n=this.__iterator(L,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},e.__iteratorUncached=function(e,r){var n=a.map(function(t){return t=C(t),$(r?t.reverse():t)}),i=0,o=!1;return new X(function(){var t;return o||(t=n.map(function(t){return t.next()}),o=t.some(function(t){return t.done})),o?{value:void 0,done:!0}:W(e,i++,s.apply(null,t.map(function(t){return t.value})))})},e}function Wt(t,e){return t===e?t:ht(t)?e:t.constructor(e)}function Ht(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Yt(t){return u(t)?T:d(t)?U:P}function Gt(t){return Object.create((u(t)?et:d(t)?rt:nt).prototype)}function $t(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):tt.prototype.cacheResult.call(this)}function Qt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:e<t?1:t<e?-1:0}function Zt(t){if(Z(t)&&"string"!=typeof t)return t;if(N(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function te(t,e){if(!t)throw new Error(e)}function ee(t){te(t!==1/0,"Cannot perform this action with an infinite size.")}function re(t){return"string"==typeof t?JSON.stringify(t):String(t)}qt.prototype.cacheResult=At.prototype.cacheResult=jt.prototype.cacheResult=Rt.prototype.cacheResult=$t;var ne=function(n){function t(e){return null==e?de():!ie(e)||N(e)||D()?de().withMutations(function(r){var t=n(e);ee(t.size),t.forEach(function(t,e){return r.set(e,t)})}):e}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).of=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return de().withMutations(function(t){for(var e=0;e<r.length;e+=2){if(e+1>=r.length)throw new Error("Missing value for key: "+r[e]);t.set(r[e],r[e+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},t.prototype.set=function(t,e){return ge(this,t,e)},t.prototype.setIn=function(t,e){return this.updateIn(t,I,function(){return e})},t.prototype.remove=function(t){return ge(this,t,I)},t.prototype.deleteIn=function(t){if((t=[].concat(Zt(t))).length){var e=t.pop();return this.updateIn(t,function(t){return t&&t.remove(e)})}},t.prototype.deleteAll=function(t){var r=C(t);return 0===r.size?this:this.withMutations(function(e){r.forEach(function(t){return e.remove(t)})})},t.prototype.update=function(t,e,r){return 1===arguments.length?t(this):this.updateIn([t],e,r)},t.prototype.updateIn=function(t,e,r){r||(r=e,e=void 0);var n=function t(e,r,n,i,o){var s=e===I;if(n===r.length){var a=s?i:e,u=o(a);return u===a?e:u}if(!(s||e&&e.set))throw new TypeError("Invalid keyPath: Value at ["+r.slice(0,n).map(re)+"] does not have a .set() method and cannot be updated: "+e);var c=r[n];var h=s?I:e.get(c,I);var f=t(h,r,n+1,i,o);return f===h?e:f===I?e.remove(c):(s?de():e).set(c,f)}(this,Zt(t),0,e,r);return n===I?e:n},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):de()},t.prototype.merge=function(){return Se(this,void 0,arguments)},t.prototype.mergeWith=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return Se(this,t,e)},t.prototype.mergeIn=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.updateIn(t,de(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},t.prototype.mergeDeep=function(){return Se(this,Ie,arguments)},t.prototype.mergeDeepWith=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return Se(this,ke(t),e)},t.prototype.mergeDeepIn=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.updateIn(t,de(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},t.prototype.sort=function(t){return He(Kt(this,t))},t.prototype.sortBy=function(t,e){return He(Kt(this,e,t))},t.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},t.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new b)},t.prototype.asImmutable=function(){return this.__ensureOwner()},t.prototype.wasAltered=function(){return this.__altered},t.prototype.__iterator=function(t,e){return new le(this,t,e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ye(this.size,this._root,t,this.__hash):0===this.size?de():(this.__ownerID=t,this.__altered=!1,this)},t}(T);function ie(t){return!(!t||!t[oe])}ne.isMap=ie;var oe="@@__IMMUTABLE_MAP__@@",se=ne.prototype;se[oe]=!0,se[e]=se.remove,se.removeIn=se.deleteIn,se.removeAll=se.deleteAll;var ae=function(t,e){this.ownerID=t,this.entries=e};ae.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(vt(r,i[o][0]))return i[o][1];return n},ae.prototype.update=function(t,e,r,n,i,o,s){for(var a=i===I,u=this.entries,c=0,h=u.length;c<h&&!vt(n,u[c][0]);c++);var f=c<h;if(f?u[c][1]===i:a)return this;if(E(s),(a||!f)&&E(o),!a||1!==u.length){if(!f&&!a&&u.length>=Ne)return function(t,e,r,n){t||(t=new b);for(var i=new fe(t,wt(r),[r,n]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,u,n,i);var p=t&&t===this.ownerID,l=p?u:_(u);return f?a?c===h-1?l.pop():l[c]=l.pop():l[c]=[n,i]:l.push([n,i]),p?(this.entries=l,this):new ae(t,l)}};var ue=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};ue.prototype.get=function(t,e,r,n){void 0===e&&(e=wt(r));var i=1<<((0===t?e:e>>>t)&w),o=this.bitmap;return 0==(o&i)?n:this.nodes[Ee(o&i-1)].get(t+m,e,r,n)},ue.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=wt(n));var a=(0===e?r:r>>>e)&w,u=1<<a,c=this.bitmap,h=0!=(c&u);if(!h&&i===I)return this;var f=Ee(c&u-1),p=this.nodes,l=h?p[f]:void 0,_=me(l,t,e+m,r,n,i,o,s);if(_===l)return this;if(!h&&_&&p.length>=De)return function(t,e,r,n,i){for(var o=0,s=new Array(g),a=0;0!==r;a++,r>>>=1)s[a]=1&r?e[o++]:void 0;return s[n]=i,new ce(t,o+1,s)}(t,p,c,a,_);if(h&&!_&&2===p.length&&we(p[1^f]))return p[1^f];if(h&&_&&1===p.length&&we(_))return _;var v=t&&t===this.ownerID,y=h?_?c:c^u:c|u,d=h?_?ze(p,f,_,v):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,s=0;s<n;s++)s===e&&(o=1),i[s]=t[s+o];return i}(p,f,v):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),s=0,a=0;a<i;a++)a===e?(o[a]=r,s=-1):o[a]=t[a+s];return o}(p,f,_,v);return v?(this.bitmap=y,this.nodes=d,this):new ue(t,y,d)};var ce=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};ce.prototype.get=function(t,e,r,n){void 0===e&&(e=wt(r));var i=(0===t?e:e>>>t)&w,o=this.nodes[i];return o?o.get(t+m,e,r,n):n},ce.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=wt(n));var a=(0===e?r:r>>>e)&w,u=i===I,c=this.nodes,h=c[a];if(u&&!h)return this;var f=me(h,t,e+m,r,n,i,o,s);if(f===h)return this;var p=this.count;if(h){if(!f&&--p<Me)return function(t,e,r,n){for(var i=0,o=0,s=new Array(r),a=0,u=1,c=e.length;a<c;a++,u<<=1){var h=e[a];void 0!==h&&a!==n&&(i|=u,s[o++]=h)}return new ue(t,i,s)}(t,c,p,a)}else p++;var l=t&&t===this.ownerID,_=ze(c,a,f,l);return l?(this.count=p,this.nodes=_,this):new ce(t,p,_)};var he=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};he.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(vt(r,i[o][0]))return i[o][1];return n},he.prototype.update=function(t,e,r,n,i,o,s){void 0===r&&(r=wt(n));var a=i===I;if(r!==this.keyHash)return a?this:(E(s),E(o),be(this,t,e,r,[n,i]));for(var u=this.entries,c=0,h=u.length;c<h&&!vt(n,u[c][0]);c++);var f=c<h;if(f?u[c][1]===i:a)return this;if(E(s),(a||!f)&&E(o),a&&2===h)return new fe(t,this.keyHash,u[1^c]);var p=t&&t===this.ownerID,l=p?u:_(u);return f?a?c===h-1?l.pop():l[c]=l.pop():l[c]=[n,i]:l.push([n,i]),p?(this.entries=l,this):new he(t,this.keyHash,l)};var fe=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};fe.prototype.get=function(t,e,r,n){return vt(r,this.entry[0])?this.entry[1]:n},fe.prototype.update=function(t,e,r,n,i,o,s){var a=i===I,u=vt(n,this.entry[0]);return(u?i===this.entry[1]:a)?this:(E(s),a?void E(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new fe(t,this.keyHash,[n,i]):(E(o),be(this,t,e,wt(n),[n,i])))},ae.prototype.iterate=he.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},ue.prototype.iterate=ce.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},fe.prototype.iterate=function(t,e){return t(this.entry)};var pe,le=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&ve(t._root)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++,i=void 0;if(r.entry){if(0===n)return _e(t,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return _e(t,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return _e(t,o.entry);e=this._stack=ve(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(X);function _e(t,e){return W(t,e[0],e[1])}function ve(t,e){return{node:t,index:0,__prev:e}}function ye(t,e,r,n){var i=Object.create(se);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function de(){return pe||(pe=ye(0))}function ge(t,e,r){var n,i;if(t._root){var o=O(h),s=O(f);if(n=me(t._root,t.__ownerID,0,void 0,e,r,o,s),!z(s))return t;i=t.size+(z(o)?r===I?-1:1:0)}else{if(r===I)return t;i=1,n=new ae(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?ye(i,n):de()}function me(t,e,r,n,i,o,s,a){return t?t.update(e,r,n,i,o,s,a):o===I?t:(E(a),E(s),new fe(e,n,[i,o]))}function we(t){return t.constructor===fe||t.constructor===he}function be(t,e,r,n,i){if(t.keyHash===n)return new he(e,n,[t.entry,i]);var o,s=(0===r?t.keyHash:t.keyHash>>>r)&w,a=(0===r?n:n>>>r)&w,u=s===a?[be(t,e,r+m,n,i)]:(o=new fe(e,n,i),s<a?[t,o]:[o,t]);return new ue(e,1<<s|1<<a,u)}function Se(t,e,r){for(var n=[],i=0;i<r.length;i++){var o=r[i],s=T(o);y(o)||(s=s.map(function(t){return yt(t)})),n.push(s)}return Oe(t,e,n)}function Ie(t,e){return t&&t.mergeDeep&&y(e)?t.mergeDeep(e):vt(t,e)?t:e}function ke(i){return function(t,e,r){if(t&&t.mergeDeepWith&&y(e))return t.mergeDeepWith(i,e);var n=i(t,e,r);return vt(t,n)?t:n}}function Oe(t,i,r){return 0===(r=r.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==r.length?t.withMutations(function(n){for(var t=i?function(e,r){n.update(r,I,function(t){return t===I?e:i(t,e,r)})}:function(t,e){n.set(e,t)},e=0;e<r.length;e++)r[e].forEach(t)}):t.constructor(r[0])}function Ee(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ze(t,e,r,n){var i=n?t:_(t);return i[e]=r,i}var Ne=g/4,De=g/2,Me=g/4,xe=function(r){function t(t){var e=Be();if(null==t)return e;if(Ae(t))return t;var n=r(t),i=n.size;return 0===i?e:(ee(i),0<i&&i<g?Pe(0,i,m,null,new Re(n.toArray())):e.withMutations(function(r){r.setSize(i),n.forEach(function(t,e){return r.set(e,t)})}))}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(t,e){if(0<=(t=s(this,t))&&t<this.size){var r=Ke(this,t+=this._origin);return r&&r.array[t&w]}return e},t.prototype.set=function(t,e){return function(t,e,r){if((e=s(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Je(t,e).set(0,r):Je(t,0,e+1).set(e,r)});e+=t._origin;var n=t._tail,i=t._root,o=O(f);e>=Xe(t._capacity)?n=Le(n,t.__ownerID,0,e,r,o):i=Le(i,t.__ownerID,t._level,e,r,o);if(!z(o))return t;if(t.__ownerID)return t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t;return Pe(t._origin,t._capacity,t._level,i,n)}(this,t,e)},t.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},t.prototype.insert=function(t,e){return this.splice(t,0,e)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=m,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Be()},t.prototype.push=function(){var r=arguments,n=this.size;return this.withMutations(function(t){Je(t,0,n+r.length);for(var e=0;e<r.length;e++)t.set(n+e,r[e])})},t.prototype.pop=function(){return Je(this,0,-1)},t.prototype.unshift=function(){var r=arguments;return this.withMutations(function(t){Je(t,-r.length);for(var e=0;e<r.length;e++)t.set(e,r[e])})},t.prototype.shift=function(){return Je(this,1)},t.prototype.merge=function(){return Ve(this,void 0,arguments)},t.prototype.mergeWith=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return Ve(this,t,e)},t.prototype.mergeDeep=function(){return Ve(this,Ie,arguments)},t.prototype.mergeDeepWith=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return Ve(this,ke(t),e)},t.prototype.setSize=function(t){return Je(this,0,t)},t.prototype.slice=function(t,e){var r=this.size;return p(t,e,r)?this:Je(this,l(t,r),v(e,r))},t.prototype.__iterator=function(e,r){var n=r?this.size:0,i=Ue(this,r);return new X(function(){var t=i();return t===Te?{value:void 0,done:!0}:W(e,r?--n:n++,t)})},t.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,i=Ue(this,e);(r=i())!==Te&&!1!==t(r,e?--n:n++,this););return n},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Pe(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?Be():(this.__ownerID=t,this)},t}(U);function Ae(t){return!(!t||!t[qe])}xe.isList=Ae;var qe="@@__IMMUTABLE_LIST__@@",je=xe.prototype;je[qe]=!0,je[e]=je.remove,je.setIn=se.setIn,je.deleteIn=je.removeIn=se.removeIn,je.update=se.update,je.updateIn=se.updateIn,je.mergeIn=se.mergeIn,je.mergeDeepIn=se.mergeDeepIn,je.withMutations=se.withMutations,je.asMutable=se.asMutable,je.asImmutable=se.asImmutable,je.wasAltered=se.wasAltered;var Re=function(t,e){this.array=t,this.ownerID=e};Re.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&w;if(n>=this.array.length)return new Re([],t);var i,o=0===n;if(0<e){var s=this.array[n];if((i=s&&s.removeBefore(t,e-m,r))===s&&o)return this}if(o&&!i)return this;var a=Fe(this,t);if(!o)for(var u=0;u<n;u++)a.array[u]=void 0;return i&&(a.array[n]=i),a},Re.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,i=r-1>>>e&w;if(i>=this.array.length)return this;if(0<e){var o=this.array[i];if((n=o&&o.removeAfter(t,e-m,r))===o&&i===this.array.length-1)return this}var s=Fe(this,t);return s.array.splice(i+1),n&&(s.array[i]=n),s};var Ce,Te={};function Ue(t,u){var c=t._origin,h=t._capacity,o=Xe(h),s=t._tail;return f(t._root,t._level,0);function f(t,e,r){return 0===e?function(t,e){var r=e===o?s&&s.array:t&&t.array,n=c<e?0:c-e,i=h-e;g<i&&(i=g);return function(){if(n===i)return Te;var t=u?--i:n++;return r&&r[t]}}(t,r):function(t,r,n){var i,o=t&&t.array,s=c<n?0:c-n>>r,a=1+(h-n>>r);g<a&&(a=g);return function(){for(;;){if(i){var t=i();if(t!==Te)return t;i=null}if(s===a)return Te;var e=u?--a:s++;i=f(o&&o[e],r-m,n+(e<<r))}}}(t,e,r)}}function Pe(t,e,r,n,i,o,s){var a=Object.create(je);return a.size=e-t,a._origin=t,a._capacity=e,a._level=r,a._root=n,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function Be(){return Ce||(Ce=Pe(0,0,m))}function Le(t,e,r,n,i,o){var s,a=n>>>r&w,u=t&&a<t.array.length;if(!u&&void 0===i)return t;if(0<r){var c=t&&t.array[a],h=Le(c,e,r-m,n,i,o);return h===c?t:((s=Fe(t,e)).array[a]=h,s)}return u&&t.array[a]===i?t:(E(o),s=Fe(t,e),void 0===i&&a===s.array.length-1?s.array.pop():s.array[a]=i,s)}function Fe(t,e){return e&&t&&e===t.ownerID?t:new Re(t?t.array.slice():[],e)}function Ke(t,e){if(e>=Xe(t._capacity))return t._tail;if(e<1<<t._level+m){for(var r=t._root,n=t._level;r&&0<n;)r=r.array[e>>>n&w],n-=m;return r}}function Je(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new b,i=t._origin,o=t._capacity,s=i+e,a=void 0===r?o:r<0?o+r:i+r;if(s===i&&a===o)return t;if(a<=s)return t.clear();for(var u=t._level,c=t._root,h=0;s+h<0;)c=new Re(c&&c.array.length?[void 0,c]:[],n),h+=1<<(u+=m);h&&(s+=h,i+=h,a+=h,o+=h);for(var f=Xe(o),p=Xe(a);1<<u+m<=p;)c=new Re(c&&c.array.length?[c]:[],n),u+=m;var l=t._tail,_=p<f?Ke(t,a-1):f<p?new Re([],n):l;if(l&&f<p&&s<o&&l.array.length){for(var v=c=Fe(c,n),y=u;m<y;y-=m){var d=f>>>y&w;v=v.array[d]=Fe(v.array[d],n)}v.array[f>>>m&w]=l}if(a<o&&(_=_&&_.removeAfter(n,0,a)),p<=s)s-=p,a-=p,u=m,c=null,_=_&&_.removeBefore(n,0,s);else if(i<s||p<f){for(h=0;c;){var g=s>>>u&w;if(g!==p>>>u&w)break;g&&(h+=(1<<u)*g),u-=m,c=c.array[g]}c&&i<s&&(c=c.removeBefore(n,u,s-h)),c&&p<f&&(c=c.removeAfter(n,u,p-h)),h&&(s-=h,a-=h)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=_,t.__hash=void 0,t.__altered=!0,t):Pe(s,a,u,c,_)}function Ve(t,e,r){for(var n=[],i=0,o=0;o<r.length;o++){var s=r[o],a=U(s);a.size>i&&(i=a.size),y(s)||(a=a.map(function(t){return yt(t)})),n.push(a)}return i>t.size&&(t=t.setSize(i)),Oe(t,e,n)}function Xe(t){return t<g?0:t-1>>>m<<m}var We,He=function(t){function e(e){return null==e?$e():Ye(e)?e:$e().withMutations(function(r){var t=T(e);ee(t.size),t.forEach(function(t,e){return r.set(e,t)})})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):$e()},e.prototype.set=function(t,e){return Qe(this,t,e)},e.prototype.remove=function(t){return Qe(this,t,I)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?Ge(e,r,t,this.__hash):0===this.size?$e():(this.__ownerID=t,this._map=e,this._list=r,this)},e}(ne);function Ye(t){return ie(t)&&N(t)}function Ge(t,e,r,n){var i=Object.create(He.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i}function $e(){return We||(We=Ge(de(),Be()))}function Qe(t,e,r){var n,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(r===I){if(!u)return t;s.size>=g&&s.size>=2*o.size?(n=(i=s.filter(function(t,e){return void 0!==t&&a!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(r===s.get(a)[1])return t;n=o,i=s.set(a,[e,r])}else n=o.set(e,s.size),i=s.set(s.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t):Ge(n,i)}He.isOrderedMap=Ye,He.prototype[q]=!0,He.prototype[e]=He.prototype.remove;var Ze=function(t,e,r){this.comparator=t,this.options=e,this.ownerID=r};Ze.prototype.getComparator=function(){},Ze.prototype.get=function(t,e){},Ze.prototype.upsert=function(t,e,r,n,i){},Ze.prototype.remove=function(t,e,r,n){},Ze.prototype.fastRemove=function(t,e,r,n){},Ze.prototype.iterate=function(t,e){},Ze.prototype.print=function(t,e){},Ze.prototype.checkConsistency=function(t){};var tr=function(){};tr.prototype.pack=function(t,e,r,n){};var er=function(){};er.prototype.createNode=function(t,e,r,n,i){},er.prototype.createPacker=function(){},er.prototype.createIterator=function(t,e,r){};var rr=function(v){function S(t,e,r,n,i){return v.call(this,t,e,r),this.entries=n,this.nodes=i,this.btreeOrder=e&&e.btreeOrder?e.btreeOrder:33,this.btreeNodeSplitSize=Math.floor((this.btreeOrder-1)/2),this}return v&&(S.__proto__=v),((S.prototype=Object.create(v&&v.prototype)).constructor=S).prototype.getComparator=function(){return this.comparator},S.prototype.get=function(t,e){var r=this.entries,n=O(k),i=vr(this.comparator,r,t,n);if(z(n)){var o=r[i][1];return o===I?e:o}var s=this.nodes;if(s){var a=s[i].get(t,e);return a===I?e:a}return e},S.prototype.firstKey=function(){var t=this.nodes;return t?t[0].firstKey():this.entries[0][0]},S.prototype.lastKey=function(){var t=this.nodes;if(t)return t[t.length-1].lastKey();var e=this.entries;return e[e.length-1][0]},S.prototype.upsert=function(t,e,r,n,i,o){if(!o){var s=[],a=this.upsert(t,e,r,n,i,s);if(s[0]){var u=[s[0]],c=[a,s[1]];a=new S(this.comparator,this.options,t,u,c)}return a}var h,f,p=this.entries,l=O(k),_=vr(this.comparator,p,e,l),v=z(l),y=this.nodes,d=t&&t===this.ownerID;if(v){if(p[_][1]===r)return this;var g=[e,r];E(i),h=cr(p,_,g,d),f=y}else if(y){var m=[],w=y[_].upsert(t,e,r,n,i,m);if(!z(i))return this;if(m[0]){if(p.length>=this.btreeOrder-1)return this.splitNode(_,w,m,o,t,d);h=hr(p,_,m[0],d),(f=hr(y,_+1,m[1],d))[_]=w}else h=p,f=cr(y,_,w,d)}else{var b=[e,r];if(E(i),E(n),p.length>=this.btreeOrder-1)return this.splitLeaf(_,b,o,t,d);h=hr(p,_,b,d)}return this.makeNewNode(h,f,t,d)},S.prototype.fastRemove=function(t,e,r,n){var i,o,s=this.entries,a=O(k),u=vr(this.comparator,s,e,a),c=z(a),h=this.nodes,f=t&&t===this.ownerID;if(c){if(s[u][1]===I)return this;E(n),E(r),i=cr(s,u,[e,I],f),o=h}else{if(!h)return this;var p=h[u].fastRemove(t,e,r,n);if(!z(n))return this;i=s,o=cr(h,u,p,f)}return this.makeNewNode(i,o,t,f)},S.prototype.remove=function(t,e,r,n,i,o,s){var a,u,c=this.entries,h=O(k),f=vr(this.comparator,c,e,h),p=z(h),l=this.nodes,_=t&&t===this.ownerID;if(!p){if(l){var v=[void 0,void 0,void 0],y=l[f].remove(t,e,r,n,this,f,v);return z(n)?this.spliceNode(t,f,y,i,o,_,v,s):this}return this}if(l){if(c[f][1]===I)return this;E(n),E(r),a=cr(c,f,[e,I],_),u=l}else{if(c[f][1]===I)return this;if(E(n),E(r),c.length<=this.btreeNodeSplitSize&&i)return this.consolidateLeaf(t,f,i,o,_,s);a=fr(c,f,_)}return this.makeNewNode(a,u,t,_)},S.prototype.makeNewNode=function(t,e,r,n){return 0===t.length?e?e[0]:void 0:n?(this.entries=t,this.nodes=e,this):new S(this.comparator,this.options,r,t,e)},S.prototype.print=function(t,e){function r(t){kn.stdout.write(t)}if(!(e&&e<=t)){var n=this.nodes,i=this.entries;if(n)for(var o=0;o<n.length;o++){var s=n[o];if(r(ur(t)),s&&s instanceof v?(s.nodes?r("+ NODE["+o+"] (L"+t+")\n"):r("+ LEAF["+o+"] (L"+t+")\n"),s.print(t+1,e)):r("+ CORRUPT NODE["+o+"] (L"+t+") "+JSON.stringify(s)+"\n"),o<i.length){r(ur(t));var a=i[o];a?a[1]===I?r("- REMOVED ENTRY["+o+"]: "+JSON.stringify(a[0])+"\n"):r("- ENTRY["+o+"]: "+JSON.stringify(a[0])+"\n"):r("- CORRUPT ENTRY["+o+"]: "+JSON.stringify(a)+"\n")}}else for(var u=0;u<i.length;u++){r(ur(t));var c=i[u];c?c[1]===I?r("- REMOVED ENTRY["+u+"]: "+JSON.stringify(c[0])+"\n"):r("- ENTRY["+u+"]: "+JSON.stringify(c[0])+"\n"):r("- CORRUPT ENTRY["+u+"]: "+JSON.stringify(c)+"\n")}}},S.prototype.checkConsistency=function(n,r,t,e){function i(t){if(n){var e=t();void 0!==e&&(kn.stdout.write(ur(r)),kn.stdout.write(e))}}function o(t,e){var r="Consistency Check Failed with error code "+t+": "+e;if(n)return i(function(){return r+"\n"}),t;throw new Error(r)}r||(r=0),t||(t=0),e||(e=[void 0]),this.nodes?i(function(){return"+ Checking NODE["+t+"] (L"+r+")\n"}):(i(function(){return"+ Checking LEAF["+t+"] (L"+r+")\n"}),void 0===e[0]?e[0]=r:e[0]!=r&&o(112,"leaves are not on the same level"));var s=this.entries,a=this.nodes;if(!s)return o(101,"empty entries in a node");if(!(0<s.length&&s.length<this.btreeOrder))return o(102,"entries length is out of range from 0 to (btreeOrder-1)");if(0<r&&!(this.btreeNodeSplitSize<=s.length))return o(103,"entries length is shorter than btreeNodeSplitSize");if(a&&a.length!==s.length+1)return o(104,"nodes length out of sync with entries length");for(var u=function(t){var e=s[t];return e?"object"==typeof e&&e instanceof Array?2!==e.length?{v:o(107,"entry is not Array[2]")}:void(e[1]===I?(i(function(){return"    - Checking REMOVED ENTRY["+t+"]: "+JSON.stringify(e[0])+"\n"}),a||o(113,"NOT_SET values are not allowed in leaves")):i(function(){return"    - Checking ENTRY["+t+"]: "+JSON.stringify(e[0])+"\n"})):{v:o(106,"entry is not Array")}:{v:o(105,"empty entry")}},c=0;c<s.length;c++){var h=u(c);if(h)return h.v}for(var f=0;f<s.length-1;f++)if(!(this.comparator(s[f][0],s[f+1][0])<0))return o(108,"the entries are not sorted");if(a)for(var p=0;p<a.length;p++){var l=a[p];if(!(l&&l instanceof v))return o(109,"empty or corrupt node");var _=l.checkConsistency(n,r+1,p,e);if(0!==_)return _;if(0<p&&!(this.comparator(s[p-1][0],l.firstKey())<0))return o(110,"the entry and right node not sorted");if(p<s.length&&!(this.comparator(l.lastKey(),s[p][0])<0))return o(111,"the entry and left node not sorted")}return 0},S}(Ze);rr.prototype.iterate=function(t,e){var r=this.entries,n=this.nodes;if(n){for(var i=0,o=r.length-1;i<=o;i++){if(!1===n[e?o+1-i:i].iterate(t,e))return!1;var s=r[e?o-i:i];if(s[1]!==I&&!1===t(s))return!1}if(!1===n[e?0:n.length-1].iterate(t,e))return!1}else for(var a=0,u=r.length-1;a<=u;a++){var c=r[e?u-a:a];if(c[1]!==I&&!1===t(c))return!1}};var nr=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&or(t._root)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++;if(r.nodes){if(n<=r.entries.length+r.nodes.length-1){if(n%2==0){n/=2;var i=r.nodes[this._reverse?r.nodes.length-1-n:n];i&&(e=this._stack=or(i,e));continue}n=(n-1)/2;var o=r.entries[this._reverse?r.entries.length-1-n:n];if(o[1]===I)continue;return ir(t,o)}}else{var s=r.entries.length-1;if(n<=s){var a=r.entries[this._reverse?s-n:n];if(a[1]===I)continue;return ir(t,a)}}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(X);function ir(t,e){return W(t,e[0],e[1])}function or(t,e){return{node:t,index:0,__prev:e}}function sr(t){return new Array(t)}var ar=new Array(120).join(" ");function ur(t){var e=4*t;return e>ar.length&&(e=ar.length),ar.substring(0,e)}function cr(t,e,r,n){if(n)return t[e]=r,t;for(var i=t.length,o=sr(i),s=0;s<e;s++)o[s]=t[s];o[e]=r;for(var a=e+1;a<i;a++)o[a]=t[a];return o}function hr(t,e,r,n){var i=t.length+1;if(n){for(var o=i-1,s=e+1;s<=o;o--)t[o]=t[o-1];return t[e]=r,t}for(var a=sr(i),u=0;u<e;u++)a[u]=t[u];a[e]=r;for(var c=e+1;c<i;c++)a[c]=t[c-1];return a}function fr(t,e,r){var n=t.length-1;if(r){for(var i=e;i<n;i++)t[i]=t[i+1];return t.length=n,t}for(var o=sr(n),s=0;s<e;s++)o[s]=t[s];for(var a=e;a<n;a++)o[a]=t[a+1];return o}function pr(t,e,r,n){var i=t.length-r;if(n){for(var o=e;o<i;o++)t[o]=t[o+r];return t.length=i,t}for(var s=sr(i),a=0;a<e;a++)s[a]=t[a];for(var u=e;u<i;u++)s[u]=t[u+r];return s}function lr(t,e,r,n){var i,o=t.length-1+r;i=n?(t.length=o,t):sr(o);for(var s=o-1,a=e+r;a<=s;s--)i[s]=t[s-r+1];for(var u=e+r-1;r<=u;u--)i[u]=t[u-r];return i}function _r(t,e,r,n,i){var o=fr(t,n,i);return e<n?o[e]=r:n<e&&(o[e-1]=r),o}function vr(t,e,r,n){for(var i=0,o=e.length;0<o;){var s=Math.floor(o/2),a=t(r,e[i+s][0]);if(0==a)return E(n),i+s;0<a?(i+=s+1,o-=s+1):o=s}return i}rr.prototype.splitNode=function(t,e,r,n,i,o){var s,a,u=this.entries,c=this.nodes,h=this.btreeNodeSplitSize;if(t<h){var f=u.slice(h,u.length),p=c.slice(h,c.length),l=new rr(this.comparator,this.options,this.ownerID,f,p);if(n[0]=u[h-1],n[1]=l,o){u.length=h,c.length=h+1;for(var _=h-1;t+1<=_;_--)u[_]=u[_-1],c[_+1]=c[_];u[t]=r[0],c[t]=e,c[t+1]=r[1],s=u,a=c}else{s=sr(h),a=sr(h+1);for(var v=0;v<t;v++)s[v]=u[v],a[v]=c[v];s[t]=r[0],a[t]=e,a[t+1]=r[1];for(var y=t+1;y<h;y++)s[y]=u[y-1],a[y+1]=c[y]}}else if(t===h){var d=sr(u.length-h),g=sr(c.length-h);d[0]=u[h],g[0]=r[1];for(var m=1,w=d.length;m<w;m++)d[m]=u[h+m],g[m]=c[h+m];g[g.length-1]=c[c.length-1];var b=new rr(this.comparator,this.options,this.ownerID,d,g);if(n[0]=r[0],n[1]=b,o)u.length=h,c.length=h+1,c[t]=e,s=u,a=c;else{s=sr(h),a=sr(h+1);for(var S=0;S<h;S++)s[S]=u[S],a[S]=c[S];a[t]=e}}else{for(var I=sr(u.length-h),k=sr(c.length-h),O=h+1,E=t-O,z=0,N=E;z<N;z++)I[z]=u[O+z],k[z]=c[O+z];I[E]=r[0],k[E]=e,k[E+1]=r[1];for(var D=E+1,M=I.length;D<M;D++)I[D]=u[h+D],k[D+1]=c[h+D+1];var x=new rr(this.comparator,this.options,this.ownerID,I,k);n[0]=u[h],n[1]=x,a=o?(u.length=h,c.length=h+1,s=u,c):(s=u.slice(0,h),c.slice(0,h+1))}return this.makeNewNode(s,a,i,o)},rr.prototype.splitLeaf=function(t,e,r,n,i){var o,s=this.entries,a=(this.nodes,this.btreeNodeSplitSize);if(t<a){var u=s.slice(a,s.length),c=new rr(this.comparator,this.options,this.ownerID,u);if(r[0]=s[a-1],r[1]=c,i){for(var h=(s.length=a)-1;t+1<=h;h--)s[h]=s[h-1];s[t]=e,o=s}else{o=sr(a);for(var f=0;f<t;f++)o[f]=s[f];o[t]=e;for(var p=t+1;p<a;p++)o[p]=s[p-1]}}else if(t===a){var l=sr(s.length-a);l[0]=s[a];for(var _=1,v=l.length;_<v;_++)l[_]=s[a+_];var y=new rr(this.comparator,this.options,this.ownerID,l);if(r[0]=e,r[1]=y,i)s.length=a,o=s;else{o=sr(a);for(var d=0;d<a;d++)o[d]=s[d]}}else{for(var g=sr(s.length-a),m=a+1,w=t-m,b=0,S=w;b<S;b++)g[b]=s[m+b];g[w]=e;for(var I=w+1,k=g.length;I<k;I++)g[I]=s[a+I];var O=new rr(this.comparator,this.options,this.ownerID,g);r[0]=s[a],r[1]=O,o=i?(s.length=a,s):s.slice(0,a)}return this.makeNewNode(o,void 0,n,i)},rr.prototype.spliceNode=function(t,e,r,n,i,o,s,a){var u,c,h=this.entries,f=this.nodes,p=s[0],l=s[1],_=s[2];if(l===I){if(h.length<=this.btreeNodeSplitSize&&n)return _?this.consolidateNode(t,e,r,e-1,e-1,n,i,o,a):this.consolidateNode(t,e,r,e,e+1,n,i,o,a);u=_?(c=_r(f,e,r,e-1,o),fr(h,e-1,o)):(c=_r(f,e,r,e+1,o),fr(h,e,o))}else c=cr(f,e,r,o),u=l?_?(c[e-1]=l,cr(h,e-1,p,o)):(c[e+1]=l,cr(h,e,p,o)):p?cr(h,e,p,o):h;return this.makeNewNode(u,c,t,o)},rr.prototype.consolidateNode=function(u,c,h,f,p,t,l,_,v){var e,r,n,i,y,d,g=this.entries,m=this.nodes,w=t.entries,o=t.nodes;if(0===l)r=e=i=o[l+1];else if(l===o.length-1)r=e=n=o[l-1];else{n=o[l-1],i=o[l+1];var s=(n.entries.length-this.btreeNodeSplitSize+1)/2;r=(i.entries.length-this.btreeNodeSplitSize+1)/2<=s?(e=n,i):(e=i,n)}function a(t,e,r){y=lr(g,f,e,_),(d=lr(m,p,e,_))[c<p?c+e:c+e-1]=h;var n,i=e-1;for(y[i]=w[l-1],d[i--]=t.nodes[t.nodes.length-1],n=t.entries.length-1;0<=i;i--,n--)y[i]=t.entries[n],d[i]=t.nodes[n];if(r)v[1]=I;else{v[0]=t.entries[n];var o=pr(t.entries,t.entries.length-e,e,_),s=pr(t.nodes,t.nodes.length-e,e,_);v[1]=t.makeNewNode(o,s,u,_)}v[2]=!0}function b(t,e,r){y=fr(g,f,_),d=fr(m,p,_);var n=y.length;y.length=y.length+e,d.length=d.length+e,d[c<p?c:c-1]=h,y[n++]=w[l],d[n]=t.nodes[0];for(var i=0,o=e-1;i<o;i++)y[n+i]=t.entries[i],d[n+i+1]=t.nodes[i+1];if(r)v[1]=I;else{v[0]=t.entries[e-1];var s=pr(t.entries,0,e,_),a=pr(t.nodes,0,e,_);v[1]=t.makeNewNode(s,a,u,_)}v[2]=!1}var S=Math.floor((e.entries.length-this.btreeNodeSplitSize+1)/2);return 0<S?e===n?a(e,S):b(e,S):r===n?a(r,r.entries.length+1,!0):b(r,r.entries.length+1,!0),this.makeNewNode(y,d,u,_)},rr.prototype.consolidateLeaf=function(a,u,t,e,c,h){var r,n,i,f,p=this.entries,o=t.entries,s=t.nodes;if(0===e)r=i=s[e+1];else if(e===s.length-1)r=n=s[e-1];else{n=s[e-1],i=s[e+1];var l=n.entries.length-this.btreeNodeSplitSize;r=i.entries.length-this.btreeNodeSplitSize<=l?n:i}function _(t,e,r){f=lr(p,u,e,c);var n=e;d||(f[e-1]=y,n--);for(var i=0;i<n;i++)f[i]=t.entries[t.entries.length-n+i];if(r)h[1]=I;else{n++,h[0]=t.entries[t.entries.length-n];var o=pr(t.entries,t.entries.length-n,n,c);h[1]=t.makeNewNode(o,void 0,a,c)}h[2]=!0}function v(t,e,r){var n=(f=fr(p,u,c)).length;f.length=f.length+e;var i=e;d||(f[n++]=y,i--);for(var o=0;o<i;o++)f[n+o]=t.entries[o];if(r)h[1]=I;else{h[0]=t.entries[i++];var s=pr(t.entries,0,i,c);h[1]=t.makeNewNode(s,void 0,a,c)}h[2]=!1}var y=r===n?o[e-1]:o[e],d=y[1]===I,g=d?1:0,m=r.entries.length-this.btreeNodeSplitSize-g;if(0<m){var w=Math.floor((m+1)/2);r===n?_(r,w):v(r,w)}else{var b=r.entries.length+1-g;r===n?_(r,b,!0):v(r,b,!0)}return this.makeNewNode(f,void 0,a,c)};var yr=function(t){function o(){t.apply(this,arguments)}return t&&(o.__proto__=t),((o.prototype=Object.create(t&&t.prototype)).constructor=o).prototype.calcPlanCnt=function(t,e){if(e<1||20<e)throw new Error("Height is out of supported limit");for(var r=t-1,n=1;n<e;n++)r=r*t+(t-1);return r},o.prototype.prepareCachedPlan=function(t,e){var r=t.toString()+" "+e.toString(),n=o.cache[r];if(n)return n;var i=this.preparePlan(t,e);return this.verifyPlan(i),t<100&&e<=100&&t<=e&&o.cacheSize<500&&(o.cache[r]=i,o.cacheSize++),i},o.prototype.preparePlan=function(t,e){for(var r,n=t-1,i=1,o=n;o<e;)o=(r=o)*t+n,i++;if(o===e)return{op:"build",full:!0,height:i,order:t,repeat:1,total:e};if(1===i)return{op:"build",full:!1,height:i,order:t,repeat:1,total:e};var s=r,a=1+Math.floor(e/(s+1));if(a<2)throw new Error("Something is wrong, the rootOrder is expected to be >= 2");if(a*s+(a-1)===e){var u=[],c=a*s+a-1;return u.push({op:"build",full:!0,height:i-1,order:t,repeat:a,total:c}),{op:"assemble",height:i,order:t,total:c,items:u}}var h=[];if(2<a){var f=a-2,p=f*s+f-1,l={op:"build",full:!0,height:i-1,order:t,repeat:f,total:p};h.push(l),e-=p,e--}e--;var _=Math.floor(e/2);0<e-_&&h.push(this.prepareCachedPlan(t,e-_)),0<_&&h.push(this.prepareCachedPlan(t,_));var v=0;for(var y in h)v+=h[y].total;return{op:"assemble",height:i,order:t,total:v+=h.length-1,items:h}},o.prototype.verifyPlan=function(t,e){function r(t){throw new Error(t)}if(void 0===e&&(e=0),"assemble"===t.op){var n=0;for(var i in t.items){var o=t.items[i];n+=o.total,"build"===o.op&&(o.order>=o.repeat||r("Plan verification test failed: pl.order >= pl.repeat: "+JSON.stringify(o))),t.height!==o.height+1&&r("Plan verification test failed: plan.height === pl.height+1"),this.verifyPlan(o,e+1)}n+=t.items.length-1,t.total!==n&&r("Count mismatch: "+t.total+" vs "+n)}else if("build"===t.op){var s=this.calcPlanCnt(t.order,t.height);if(t.full){var a=s*t.repeat+t.repeat-1;t.total!==a&&r("Plan verification test failed: plan.total === ec")}else{1!==t.height&&r("Plan verification test failed: expected height 1, got instead "+t.height),t.total<s||r("Plan verification test failed: plan.total < ec");var u=Math.floor((t.order-1)/2);0<e&&!(t.total>=u)&&r("Plan verification test failed: plan.total >= halfSize: "+t.total+", "+u)}}else r("Plan verification test failed: invalid op: "+t.op)},o.prototype.runPlan=function(t,e){if("assemble"===t.op)for(var r in t.items)0<r&&this.populate(e,1),this.runPlan(t.items[r],e);else if("build"===t.op)for(var n=(t.total-t.repeat+1)/t.repeat,i=0;i<t.repeat;i++)0<i&&this.populate(e,1),this.populate(e,n);else!function(t){throw t="Packing Plan is corrupt: "+t,new Error(t)}("invalid op: "+t.op);this.flush(t.height)},o.prototype.flush=function(t){for(var e=0;e<t;e++){var r=e;this.stack[r]&&(this.prepareLevel(r+1),this.addNode(r+1,this.stack[r]),this.stack[r]=void 0)}this.stackLevel=t},o.prototype.populate=function(t,e){for(var r=this,n=0;n<e;n++){var i=t.next();if(r.entriesCnt++,i.done)throw new Error("unexpected end of iterator at "+r.entriesCnt+" vs "+t.size);var o=i.value,s=r.stackLevel;r.prepareLevel(s),r.addEntry(s,o),0<s?r.stackLevel=0:r.stackIndices[s]===r.order-1&&(r.prepareLevel(s+1),r.addNode(s+1,r.stack[s]),r.stack[s]=void 0,r.stackLevel++)}},o.prototype.addEntry=function(t,e){this.stack[t].entries[this.stackIndices[t]++]=e},o.prototype.addNode=function(t,e){this.stack[t].nodes[this.stackIndices[t]]=e,this.stackIndices[t]===this.order-1&&(this.prepareLevel(t+1),this.addNode(t+1,this.stack[t]),this.stack[t]=void 0,this.stackLevel++)},o.prototype.prepareLevel=function(t){if(!this.stack[t]){var e,r=sr(this.order-1);(r.length=0)<t&&((e=sr(this.order)).length=0),this.stack[t]=new rr(this.comparator,this.options,this.ownerID,r,e),this.stackIndices[t]=0}},o.prototype.finish=function(){var t=this.stackLevel;if(!(t>=this.stack.length))return this.stack[t].nodes[0]},o.prototype.pack=function(t,e,r,n){if(e&&e.type&&"btree"!==e.type)throw new Error("Unsuported type by btree factory: "+e.type);this.order=e&&e.btreeOrder?e.btreeOrder:33;var i=T(n);ee(i.size);var o=this.preparePlan(this.order,i.size);this.comparator=t,this.options=e,this.ownerID=r,this.stack=[],this.stackIndices=[],this.stackLevel=0,this.entriesCnt=0;var s=i.entries();if(this.runPlan(o,s),!s.next().done)throw new Error("iterator did not end when expected");return this.finish()},o}(tr);yr.cache={},yr.cacheSize=0;var dr=function(t){function e(){}return e.__proto__=t,((e.prototype=Object.create(t.prototype)).constructor=e).prototype.createNode=function(t,e,r,n,i){return new rr(t,e,r,n,i)},e.prototype.createPacker=function(){return new yr},e.prototype.createIterator=function(t,e,r){return new nr(t,e,r)},e}(er),gr=function(t){function n(e,t,r){return t||(this instanceof n&&(t=this.getComparator()),t||(t=n.defaultComparator)),r||(this instanceof n&&(r=this.getOptions()),r||(r=n.defaultOptions)),null==e?Ir(t,r):mr(e)&&e.getComparator()===t&&e.getOptions()===r?e:Ir(t,r).withMutations(function(t){t.pack(e)})}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).of=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return Ir().withMutations(function(t){for(var e=0;e<r.length;e+=2){if(e+1>=r.length)throw new Error("Missing value for key: "+r[e]);t.set(r[e],r[e+1])}})},n.prototype.toString=function(){return this.__toString("SortedMap {","}")},n.prototype.getComparator=function(){return this._comparator},n.prototype.getOptions=function(){return this._options},n.prototype.get=function(t,e){return this._root?this._root.get(t,e):e},n.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__altered=!0,this):Ir(this._comparator,this._options)},n.prototype.pack=function(t){var e,r=this;if(void 0===t)e=this;else{var n=0,i=T(t).map(function(t,e){return[e,t,n++]}).toArray();if(0===i.length)return this.__ownerID?(this._root=void 0,this.size=0,this.__altered=!0,this):Ir(this._comparator,this._options);i.sort(function(t,e){return r._comparator(t[0],e[0])||t[2]-e[2]});for(var o=[],s=0,a=i.length-1;s<a;s++){var u=i[s],c=i[s+1];if(r._comparator(u[0],c[0])<0){var h=[u[0],u[1]];o.push(h)}}var f=i[i.length-1],p=[f[0],f[1]];o.push(p),e=et(o)}ee(e.size);var l=e.size,_=this._factory.createPacker().pack(this._comparator,this._options,this.__ownerID,e);return this.__ownerID?(this._root=_,this.size=l,this.__altered=!0,this):_?Sr(this._comparator,this._options,l,_):Ir(this._comparator,this._options)},n.prototype.set=function(t,e){return kr(this,t,e)},n.prototype.remove=function(t){return kr(this,t,I)},n.prototype.fastRemove=function(t){return kr(this,t,I,!0)},n.prototype.subMap=function(t,e){return subMap(this,t,e)},n.prototype.sort=function(t){return n(this,t,this.getOptions())},n.prototype.sortBy=function(t,e){return n(mapFactory(this,t),e,this.getOptions())},n.prototype.__iterator=function(t,e){return this._factory.createIterator(this,t,e)},n.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Sr(this._comparator,this._options,this.size,this._root,t):0===this.size?Ir(this._comparator,this._options):(this.__ownerID=t,this.__altered=!1,this)},n.prototype.checkConsistency=function(t){var e=this;if(this._root)return 0<this.size?this._root.checkConsistency(t):1;if(0!==this.size)return 2;var r,n=0;return this.keySeq().forEach(function(t){if(n&&!(e._comparator(r,t)<0))return 3;r=t,n++}),this.size!==n?4:0},n.prototype.print=function(t){var e="SORTED MAP: size="+this.size;return this._options&&(e=e+", options="+JSON.stringify(this._options)),console.log(e),this._root&&this._root.print(1,t),this},n}(ne);function mr(t){return ie(t)&&D(t)}gr.isSortedMap=mr,gr.defaultComparator=function(t,e){if(vt(t,e))return 0;var r=typeof t,n=typeof e;if(r!==n)return r<n?-1:1;switch(r){case"undefined":break;case"object":if(null===t)return 1;if(null===e)return-1;t=t.toString(),e=e.toString();break;case"boolean":break;case"number":if(vt(t,NaN))return 1;if(vt(e,NaN))return-1;break;case"string":break;case"symbol":case"function":t=t.toString(),e=e.toString()}return t<e?-1:e<t?1:0},gr.defaultOptions={type:"btree"};var wr,br=gr.prototype;function Sr(t,e,r,n,i){var o=Object.create(br);if(o._comparator=t||gr.defaultComparator,o._options=e||gr.defaultOptions,o.size=r,o._root=n,o._factory=gr.getFactory(o._options),o.__ownerID=i,o.__altered=!1,o._options.btreeOrder&&o._options.btreeOrder<3)throw new Error("SortedMap: minimum value of options.btreeOrder is 3, but got: "+o._options.btreeOrder);if(!o._factory)throw new Error("SortedMap type not supported: "+o._options.type);return o}function Ir(t,e){return t===gr.defaultComparator&&e===gr.defaultOptions?wr||(wr=Sr(gr.defaultComparator,gr.defaultOptions,0)):Sr(t,e,0)}function kr(t,e,r,n){var i,o,s=r===I;if(t._root){var a=O(h),u=O(f);if(i=s?n?t._root.fastRemove(t.__ownerID,e,a,u):t._root.remove(t.__ownerID,e,a,u):t._root.upsert(t.__ownerID,e,r,a,u),!z(u))return t;0===(o=t.size+(z(a)?s?-1:1:0))&&(i=void 0)}else{if(s)return t;o=1;var c=[[e,r]];i=t._factory.createNode(t._comparator,t._options,t.__ownerID,c)}return t.__ownerID?(t.size=o,t._root=i,t.__altered=!0,t):i?Sr(t._comparator,t._options,o,i):Ir(t._comparator,t._options)}br[R]=!0,br[e]=br.remove,br.removeIn=br.deleteIn,br.removeAll=br.deleteAll,gr.getFactory=function(t){var e=t&&t.type?t.type:gr.defaultOptions.type;return gr.factories[e]},gr.factories={btree:new dr};var Or=function(o){function t(t){return null==t?xr():Er(t)?t:xr().pushAll(t)}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(t,e){var r=this._head;for(t=s(this,t);r&&t--;)r=r.next;return r?r.value:e},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;0<=n;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Mr(e,r)},t.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;if(0===this.size&&Er(t))return t;ee(t.size);var e=this.size,r=this._head;return t.__iterate(function(t){e++,r={value:t,next:r}},!0),this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Mr(e,r)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):xr()},t.prototype.slice=function(t,e){if(p(t,e,this.size))return this;var r=l(t,this.size);if(v(e,this.size)!==this.size)return o.prototype.slice.call(this,t,e);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):Mr(n,i)},t.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Mr(this.size,this._head,t,this.__hash):0===this.size?xr():(this.__ownerID=t,this.__altered=!1,this)},t.prototype.__iterate=function(r,t){var n=this;if(t)return new ot(this.toArray()).__iterate(function(t,e){return r(t,e,n)},t);for(var e=0,i=this._head;i&&!1!==r(i.value,e++,n);)i=i.next;return e},t.prototype.__iterator=function(e,t){if(t)return new ot(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new X(function(){if(n){var t=n.value;return n=n.next,W(e,r++,t)}return{value:void 0,done:!0}})},t}(U);function Er(t){return!(!t||!t[Nr])}Or.isStack=Er;var zr,Nr="@@__IMMUTABLE_STACK__@@",Dr=Or.prototype;function Mr(t,e,r,n){var i=Object.create(Dr);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function xr(){return zr||(zr=Mr(0))}function Ar(r,t){if(r===t)return!0;if(!y(t)||void 0!==r.size&&void 0!==t.size&&r.size!==t.size||void 0!==r.__hash&&void 0!==t.__hash&&r.__hash!==t.__hash||u(r)!==u(t)||d(r)!==d(t)||N(r)!==N(t)||D(r)!==D(t))return!1;if(0===r.size&&0===t.size)return!0;var n=!S(r);if(N(r)){var i=r.entries();return t.every(function(t,e){var r=i.next().value;return r&&vt(r[1],t)&&(n||vt(r[0],e))})&&i.next().done}var o=!1;if(void 0===r.size)if(void 0===t.size)"function"==typeof r.cacheResult&&r.cacheResult();else{o=!0;var e=r;r=t,t=e}var s=!0,a=t.__iterate(function(t,e){if(n?!r.has(t):o?!vt(t,r.get(e,I)):!vt(r.get(e,I),t))return s=!1});return s&&r.size===a}function qr(e,r){var t=function(t){e.prototype[t]=r[t]};return Object.keys(r).forEach(t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(t),e}Dr[Nr]=!0,Dr.withMutations=se.withMutations,Dr.asMutable=se.asMutable,Dr.asImmutable=se.asImmutable,Dr.wasAltered=se.wasAltered,Dr.shift=Dr.pop,Dr.unshift=Dr.push,Dr.unshiftAll=Dr.pushAll;var jr=function(n){function e(r){return null==r?Lr():Rr(r)&&!N(r)?r:Lr().withMutations(function(e){var t=n(r);ee(t.size),t.forEach(function(t){return e.add(t)})})}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).of=function(){return this(arguments)},e.fromKeys=function(t){return this(T(t).keySeq())},e.intersect=function(t){return(t=C(t).toArray()).length?Ur.intersect.apply(e(t.pop()),t):Lr()},e.union=function(t){return(t=C(t).toArray()).length?Ur.union.apply(e(t.pop()),t):Lr()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Pr(this,this._map.set(t,t))},e.prototype.remove=function(t){return Pr(this,this._map.remove(t))},e.prototype.clear=function(){return Pr(this,this._map.clear())},e.prototype.union=function(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return 0===(r=r.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){for(var t=0;t<r.length;t++)n(r[t]).forEach(function(t){return e.add(t)})}):this.constructor(r[0])},e.prototype.intersect=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return this;t=t.map(function(t){return n(t)});var r=[];return this.forEach(function(e){t.every(function(t){return t.includes(e)})||r.push(e)}),this.withMutations(function(e){r.forEach(function(t){e.remove(t)})})},e.prototype.subtract=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return this;var r=[];return this.forEach(function(e){t.some(function(t){return t.includes(e)})&&r.push(e)}),this.withMutations(function(e){r.forEach(function(t){e.remove(t)})})},e.prototype.merge=function(){return this.union.apply(this,arguments)},e.prototype.mergeWith=function(t){for(var e=[],r=arguments.length-1;0<r--;)e[r]=arguments[r+1];return this.union.apply(this,e)},e.prototype.sort=function(t){return un(Kt(this,t))},e.prototype.sortBy=function(t,e){return un(Kt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(r,t){var n=this;return this._map.__iterate(function(t,e){return r(e,e,n)},t)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?Lr():(this.__ownerID=t,this._map=e,this)},e}(P);function Rr(t){return!(!t||!t[Tr])}jr.isSet=Rr;var Cr,Tr="@@__IMMUTABLE_SET__@@",Ur=jr.prototype;function Pr(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Br(t,e){var r=Object.create(Ur);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Lr(){return Cr||(Cr=Br(de()))}Ur[Tr]=!0,Ur[e]=Ur.remove,Ur.mergeDeep=Ur.merge,Ur.mergeDeepWith=Ur.mergeWith,Ur.withMutations=se.withMutations,Ur.asMutable=se.asMutable,Ur.asImmutable=se.asImmutable,Ur.__empty=Lr,Ur.__make=Br;var Fr=function(t){function n(e,t,r){return t||(this instanceof n&&(t=this.getComparator()),t||(t=n.defaultComparator)),r||(this instanceof n&&(r=this.getOptions()),r||(r=n.defaultOptions)),null==e?Xr(t,r):Kr(e)&&e.getComparator()===t&&e.getOptions()===r?e:Xr(t,r).withMutations(function(t){t.pack(e)})}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).of=function(){return this(arguments)},n.fromKeys=function(t){return this(T(t).keySeq())},n.prototype.toString=function(){return this.__toString("SortedSet {","}")},n.prototype.getComparator=function(){return this._map.getComparator()},n.prototype.getOptions=function(){return this._map.getOptions()},n.prototype.pack=function(t){var e=void 0===t?void 0:P(t).toKeyedSeq().mapKeys(function(t,e){return e});return function(t,e){if(t.__ownerID)return t.size=e.size,t._map=e,t;return e===t._map?t:0===e.size?t.__empty():t.__make(e)}(this,this._map.pack(e))},n.prototype.sort=function(t){return n(this,t,this.getOptions())},n.prototype.sortBy=function(t,e){return n(Tt(this,t),e,this.getOptions())},n}(jr);function Kr(t){return Rr(t)&&D(t)}Fr.isSortedSet=Kr,Fr.defaultComparator=gr.defaultComparator,Fr.defaultOptions=gr.defaultOptions;var Jr=Fr.prototype;function Vr(t,e){var r=Object.create(Jr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function Xr(t,e){return Vr(Ir(t,e))}Jr[R]=!0,Jr.__empty=function(){return Xr(this.getComparator(),this.getOptions())},Jr.__make=Vr;var Wr,Hr=function(t){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);if(te(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),r=void 0===r?1:Math.abs(r),e<t&&(r=-r),this._start=t,this._end=e,this._step=r,this.size=Math.max(0,Math.ceil((e-t)/r-1)+1),0===this.size){if(Wr)return Wr;Wr=this}}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},n.prototype.get=function(t,e){return this.has(t)?this._start+s(this,t)*this._step:e},n.prototype.includes=function(t){var e=(t-this._start)/this._step;return 0<=e&&e<this.size&&e===Math.floor(e)},n.prototype.slice=function(t,e){return p(t,e,this.size)?this:(t=l(t,this.size),(e=v(e,this.size))<=t?new n(0,0):new n(this.get(t,this._end),this.get(e,this._end),this._step))},n.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var r=e/this._step;if(0<=r&&r<this.size)return r}return-1},n.prototype.lastIndexOf=function(t){return this.indexOf(t)},n.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==t(i,e?r-++o:o++,this);)i+=e?-n:n;return o},n.prototype.__iterator=function(e,r){var n=this.size,i=this._step,o=r?this._start+(n-1)*i:this._start,s=0;return new X(function(){if(s===n)return{value:void 0,done:!0};var t=o;return o+=r?-i:i,W(e,r?n-++s:s++,t)})},n.prototype.equals=function(t){return t instanceof n?this._start===t._start&&this._end===t._end&&this._step===t._step:Ar(this,t)},n}(rt);C.isIterable=y,C.isKeyed=u,C.isIndexed=d,C.isAssociative=S,C.isOrdered=N,C.Iterator=X,qr(C,{toArray:function(){ee(this.size);var r=new Array(this.size||0);return this.valueSeq().__iterate(function(t,e){r[e]=t}),r},toIndexedSeq:function(){return new qt(this)},toJS:function(){return this.toSeq().map(en).toJSON()},toKeyedSeq:function(){return new At(this,!0)},toMap:function(){return ne(this.toKeyedSeq())},toObject:function(){ee(this.size);var r={};return this.__iterate(function(t,e){r[e]=t}),r},toOrderedMap:function(){return He(this.toKeyedSeq())},toSortedMap:function(t,e){return gr(this.toKeyedSeq(),t,e)},toSortedSet:function(t,e){return Fr(u(this)?this.valueSeq():this,t,e)},toOrderedSet:function(){return un(u(this)?this.valueSeq():this)},toSet:function(){return jr(u(this)?this.valueSeq():this)},toSetSeq:function(){return new jt(this)},toSeq:function(){return d(this)?this.toIndexedSeq():u(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Or(u(this)?this.valueSeq():this)},toList:function(){return xe(u(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Wt(this,function(t,e){var r=u(t),n=[t].concat(e).map(function(t){return y(t)?r&&(t=T(t)):t=r?pt(t):lt(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===n.length)return t;if(1===n.length){var i=n[0];if(i===t||r&&u(i)||d(t)&&d(i))return i}var o=new ot(n);return r?o=o.toKeyedSeq():d(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce(function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}},0),o}(this,t))},includes:function(e){return this.some(function(t){return vt(t,e)})},entries:function(){return this.__iterator(F)},every:function(n,i){ee(this.size);var o=!0;return this.__iterate(function(t,e,r){if(!n.call(i,t,e,r))return o=!1}),o},filter:function(t,e){return Wt(this,Pt(this,t,e,!0))},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return ee(this.size),this.__iterate(e?t.bind(e):t)},join:function(e){ee(this.size),e=void 0!==e?""+e:",";var r="",n=!0;return this.__iterate(function(t){n?n=!1:r+=e,r+=null!=t?t.toString():""}),r},keys:function(){return this.__iterator(B)},map:function(t,e){return Wt(this,Tt(this,t,e))},reduce:function(t,e,r){return Qr(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return Qr(this,t,e,r,arguments.length<2,!0)},reverse:function(){return Wt(this,Ut(this,!0))},slice:function(t,e){return Wt(this,Bt(this,t,e,!0))},some:function(t,e){return!this.every(rn(t),e)},sort:function(t){return Wt(this,Kt(this,t))},values:function(){return this.__iterator(L)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return c(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return r=this,n=t,i=e,o=ne().asMutable(),r.__iterate(function(t,e){o.update(n.call(i,t,e,r),0,function(t){return t+1})}),o.asImmutable();var r,n,i,o},equals:function(t){return Ar(this,t)},entrySeq:function(){var t=this;if(t._cache)return new ot(t._cache);var e=t.toSeq().map(tn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e.toJS=function(){return this.map(function(t){return[en(t[0]),en(t[1])]}).toJSON()},e},filterNot:function(t,e){return this.filter(rn(t),e)},findEntry:function(n,i,t){var o=t;return this.__iterate(function(t,e,r){if(n.call(i,t,e,r))return!(o=[e,t])}),o},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(r)},flatMap:function(t,e){return Wt(this,(n=t,i=e,o=Yt(r=this),r.toSeq().map(function(t,e){return o(n.call(i,t,e,r))}).flatten(!0)));var r,n,i,o},flatten:function(t){return Wt(this,Ft(this,t,!0))},fromEntrySeq:function(){return new Rt(this)},get:function(r,t){return this.find(function(t,e){return vt(e,r)},void 0,t)},getIn:function(t,e){for(var r=this,n=Zt(t),i=0;i!==n.length;){if(!r||!r.get)throw new TypeError("Invalid keyPath: Value at ["+n.slice(0,i).map(re)+"] does not have a .get() method: "+r);if((r=r.get(n[i++],I))===I)return e}return r},groupBy:function(t,e){return function(n,t,i){var o=u(n),s=(N(n)?He():ne()).asMutable();n.__iterate(function(e,r){s.update(t.call(i,e,r,n),function(t){return(t=t||[]).push(o?[r,e]:e),t})});var e=Yt(n);return s.map(function(t){return Wt(n,e(t))})}(this,t,e)},has:function(t){return this.get(t,I)!==I},hasIn:function(t){return this.getIn(t,I)!==I},isSubset:function(e){return e="function"==typeof e.includes?e:C(e),this.every(function(t){return e.includes(t)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:C(t)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return vt(t,e)})},keySeq:function(){return this.toSeq().map(Zr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Jt(this,t)},maxBy:function(t,e){return Jt(this,e,t)},min:function(t){return Jt(this,t?nn(t):sn)},minBy:function(t,e){return Jt(this,e?nn(e):sn,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Wt(this,Lt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(rn(t),e)},sortBy:function(t,e){return Wt(this,Kt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Wt(this,(u=t,c=e,(n=Gt(r=this)).__iterateUncached=function(n,t){var i=this;if(t)return this.cacheResult().__iterate(n,t);var o=0;return r.__iterate(function(t,e,r){return u.call(c,t,e,r)&&++o&&n(t,e,i)}),o},n.__iteratorUncached=function(i,t){var o=this;if(t)return this.cacheResult().__iterator(i,t);var s=r.__iterator(F,t),a=!0;return new X(function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var e=t.value,r=e[0],n=e[1];return u.call(c,n,r,o)?i===F?t:W(i,r,n,t):{value:void 0,done:!(a=!1)}})},n));var r,u,c,n},takeUntil:function(t,e){return this.takeWhile(rn(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=N(t),r=u(t),n=e?1:0;return i=t.__iterate(r?e?function(t,e){n=31*n+an(wt(t),wt(e))|0}:function(t,e){n=n+an(wt(t),wt(e))|0}:e?function(t){n=31*n+wt(t)|0}:function(t){n=n+wt(t)|0}),o=n,o=gt(o,3432918353),o=gt(o<<15|o>>>-15,461845907),o=gt(o<<13|o>>>-13,5),o=gt((o=(o+3864292196|0)^i)^o>>>16,2246822507),o=mt((o=gt(o^o>>>13,3266489909))^o>>>16);var i,o}(this))}});var Yr=C.prototype;Yr[M]=!0,Yr[V]=Yr.values,Yr.toJSON=Yr.toArray,Yr.__toStringMapper=re,Yr.inspect=Yr.toSource=function(){return this.toString()},Yr.chain=Yr.flatMap,Yr.contains=Yr.includes,qr(T,{flip:function(){return Wt(this,Ct(this))},mapEntries:function(r,n){var i=this,o=0;return Wt(this,this.toSeq().map(function(t,e){return r.call(n,[e,t],o++,i)}).fromEntrySeq())},mapKeys:function(r,n){var i=this;return Wt(this,this.toSeq().flip().map(function(t,e){return r.call(n,t,e,i)}).flip())}});var Gr=T.prototype;Gr[x]=!0,Gr[V]=Yr.entries,Gr.toJSON=Yr.toObject,Gr.__toStringMapper=function(t,e){return re(e)+": "+re(t)},qr(U,{toKeyedSeq:function(){return new At(this,!1)},filter:function(t,e){return Wt(this,Pt(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Wt(this,Ut(this,!1))},slice:function(t,e){return Wt(this,Bt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=l(t,t<0?this.count():this.size);var n=this.slice(0,t);return Wt(this,1===r?n:n.concat(_(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Wt(this,Ft(this,t,!1))},get:function(r,t){return(r=s(this,r))<0||this.size===1/0||void 0!==this.size&&r>this.size?t:this.find(function(t,e){return e===r},void 0,t)},has:function(t){return 0<=(t=s(this,t))&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Wt(this,(s=t,(e=Gt(o=this)).size=o.size&&2*o.size-1,e.__iterateUncached=function(e,t){var r=this,n=0;return o.__iterate(function(t){return(!n||!1!==e(s,n++,r))&&!1!==e(t,n++,r)},t),n},e.__iteratorUncached=function(t,e){var r,n=o.__iterator(L,e),i=0;return new X(function(){return(!r||i%2)&&(r=n.next()).done?r:i%2?W(t,i++,s):W(t,i++,r.value,r)})},e));var o,s,e},interleave:function(){var t=[this].concat(_(arguments)),e=Xt(this.toSeq(),rt.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Wt(this,r)},keySeq:function(){return Hr(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Wt(this,Lt(this,t,e,!1))},zip:function(){return Wt(this,Xt(this,on,[this].concat(_(arguments))))},zipWith:function(t){var e=_(arguments);return Wt(e[0]=this,Xt(this,t,e))}});var $r=U.prototype;function Qr(t,n,i,o,s,e){return ee(t.size),t.__iterate(function(t,e,r){i=s?(s=!1,t):n.call(o,i,t,e,r)},e),i}function Zr(t,e){return e}function tn(t,e){return[e,t]}function en(t){return t&&"function"==typeof t.toJS?t.toJS():t}function rn(t){return function(){return!t.apply(this,arguments)}}function nn(t){return function(){return-t.apply(this,arguments)}}function on(){return _(arguments)}function sn(t,e){return t<e?1:e<t?-1:0}function an(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}$r[A]=!0,$r[q]=!0,qr(P,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),P.prototype.has=Yr.includes,P.prototype.contains=P.prototype.includes,qr(et,T.prototype),qr(rt,U.prototype),qr(nt,P.prototype);var un=function(t){function e(r){return null==r?ln():cn(r)?r:ln().withMutations(function(e){var t=P(r);ee(t.size),t.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).of=function(){return this(arguments)},e.fromKeys=function(t){return this(T(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(jr);function cn(t){return Rr(t)&&N(t)}un.isOrderedSet=cn;var hn,fn=un.prototype;function pn(t,e){var r=Object.create(fn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function ln(){return hn||(hn=pn($e()))}fn[q]=!0,fn.zip=$r.zip,fn.zipWith=$r.zipWith,fn.__empty=ln,fn.__make=pn;var _n=function(s,a){var u,c=function(t){var n=this;if(t instanceof c)return t;if(!(this instanceof c))return new c(t);if(!u){u=!0;var e=Object.keys(s),r=h._indices={};h._name=a,h._keys=e,h._defaultValues=s;for(var i=0;i<e.length;i++){var o=e[i];r[o]=i,h[o]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+dn(n)+' with property "'+o+'" since that property name is part of the Record API.'):mn(h,o)}}this.__ownerID=void 0,this._values=xe().withMutations(function(r){r.setSize(n._keys.length),T(t).forEach(function(t,e){r.set(n._indices[e],t===n._defaultValues[e]?void 0:t)})})},h=c.prototype=Object.create(vn);return h.constructor=c};_n.prototype.toString=function(){for(var t,e=dn(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)e+=(n?", ":"")+(t=r[n])+": "+re(this.get(t));return e+" }"},_n.prototype.equals=function(t){return this===t||this._keys===t._keys&&gn(this).equals(gn(t))},_n.prototype.hashCode=function(){return gn(this).hashCode()},_n.prototype.has=function(t){return this._indices.hasOwnProperty(t)},_n.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},_n.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return yn(this,r)}return this},_n.prototype.remove=function(t){return this.set(t)},_n.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:yn(this,t)},_n.prototype.wasAltered=function(){return this._values.wasAltered()},_n.prototype.toSeq=function(){return gn(this)},_n.prototype.toJS=function(){return gn(this).toJS()},_n.prototype.__iterator=function(t,e){return gn(this).__iterator(t,e)},_n.prototype.__iterate=function(t,e){return gn(this).__iterate(t,e)},_n.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?yn(this,e,t):(this.__ownerID=t,this._values=e,this)},_n.isRecord=o,_n.getDescriptiveName=dn;var vn=_n.prototype;function yn(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function dn(t){return t._name||t.constructor.name||"Record"}function gn(e){return pt(e._keys.map(function(t){return[t,e.get(t)]}))}function mn(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){te(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}vn[j]=!0,vn[e]=vn.remove,vn.deleteIn=vn.removeIn=se.removeIn,vn.getIn=Yr.getIn,vn.hasIn=Yr.hasIn,vn.merge=se.merge,vn.mergeWith=se.mergeWith,vn.mergeIn=se.mergeIn,vn.mergeDeep=se.mergeDeep,vn.mergeDeepWith=se.mergeDeepWith,vn.mergeDeepIn=se.mergeDeepIn,vn.setIn=se.setIn,vn.update=se.update,vn.updateIn=se.updateIn,vn.withMutations=se.withMutations,vn.asMutable=se.asMutable,vn.asImmutable=se.asImmutable,vn[V]=Yr.entries,vn.toJSON=vn.toObject=Yr.toObject,vn.inspect=vn.toSource=Yr.toSource;var wn,bn=function(t){function n(t,e){if(!(this instanceof n))return new n(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(wn)return wn;wn=this}}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},n.prototype.get=function(t,e){return this.has(t)?this._value:e},n.prototype.includes=function(t){return vt(this._value,t)},n.prototype.slice=function(t,e){var r=this.size;return p(t,e,r)?this:new n(this._value,v(e,r)-l(t,r))},n.prototype.reverse=function(){return this},n.prototype.indexOf=function(t){return vt(this._value,t)?0:-1},n.prototype.lastIndexOf=function(t){return vt(this._value,t)?this.size:-1},n.prototype.__iterate=function(t,e){for(var r=this.size,n=0;n!==r&&!1!==t(this._value,e?r-++n:n++,this););return n},n.prototype.__iterator=function(t,e){var r=this,n=this.size,i=0;return new X(function(){return i===n?{value:void 0,done:!0}:W(t,e?n-++i:i++,r._value)})},n.prototype.equals=function(t){return t instanceof n?vt(this._value,t._value):Ar(t)},n}(rt),Sn={Collection:C,Iterable:C,Seq:tt,Map:ne,OrderedMap:He,SortedMap:gr,List:xe,Stack:Or,Set:jr,OrderedSet:un,SortedSet:Fr,Record:_n,Range:Hr,Repeat:bn,is:vt,fromJS:yt,hash:wt,isImmutable:i,isCollection:y,isKeyed:u,isIndexed:d,isAssociative:S,isOrdered:N,isSorted:D,isValueObject:a},In=C;t.default=Sn,t.Collection=C,t.Iterable=In,t.Seq=tt,t.Map=ne,t.OrderedMap=He,t.SortedMap=gr,t.List=xe,t.Stack=Or,t.Set=jr,t.OrderedSet=un,t.SortedSet=Fr,t.Record=_n,t.Range=Hr,t.Repeat=bn,t.is=vt,t.fromJS=yt,t.hash=wt,t.isImmutable=i,t.isCollection=y,t.isKeyed=u,t.isIndexed=d,t.isAssociative=S,t.isOrdered=N,t.isSorted=D,t.isValueObject=a,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==r?e(n):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Immutable=t.Immutable||{})}).call(this,t("_process"))},{_process:12}]},{},[10]);